local a=46;local b=11;local c=62;local d=32;local e=0==1;local f=not e;local g=nil;local h=""local i=_G;local j=_ENV;local k=i["tonumber"]return(function(...)i["WR_PriestFunction"]=function()i["PriestTalent"]=i["WR_Priest_GetTalent"]()if i["PriestTalent"]==g then i["PriestTalent"]="无"end;i["WR_Priest_SPELL_CAST_SUCCESS"]()i["ShiFaSuDu"]=k("0.3")i["WR_Initialize"]()i["GCD"]=i["WR_GetGCD"]("惩击")i["PlayerMove"]=i["WR_PlayerMove"]()i["TargetRange"]=i["WR_GetUnitRange"]("target")i["TargetInCombat"]=i["WR_TargetInCombat"]("target")i["RiadOrParty"]=i["WR_GetInRiadOrParty"]()i["RiadOrPartySum"]=k("0")if i["RiadOrParty"]=="raid"then i["RiadOrPartySum"]=k("25")elseif i["RiadOrParty"]=="party"then i["RiadOrPartySum"]=k("4")end;i["GLZL_PCT"]=k("1")i["HealthPower"]=i["GetSpellBonusHealing"]()i["HealthCrit"]=k("1")i["SpellValue_KX_Max"]=i["WR_GetSpellValue"]("苦修","到","点")i["SpellValue_KX_Avg"]=(i["SpellValue_KX_Max"]+i["HealthPower"]*k("0.4"))*k("3")i["SpellValue_KX_Avg"]=i["SpellValue_KX_Avg"]*i["HealthCrit"]*i["GLZL_PCT"]i["SpellValue_KSZL_Max"]=i["WR_GetSpellValue"]("快速治疗","到","点")i["SpellValue_KSZL_Avg"]=i["SpellValue_KSZL_Max"]+i["HealthPower"]*k("1.1")i["SpellValue_KSZL_Avg"]=i["SpellValue_KSZL_Avg"]*i["HealthCrit"]*i["GLZL_PCT"]i["SpellValue_LJZL_Max"]=i["WR_GetSpellValue"]("联结治疗","到","点")i["SpellValue_LJZL_Avg"]=i["SpellValue_LJZL_Max"]+i["HealthPower"]*k("1.1")i["SpellValue_LJZL_Avg"]=i["SpellValue_LJZL_Avg"]*i["HealthCrit"]*i["GLZL_PCT"]i["SpellValue_ZLDY_Max"]=i["WR_GetSpellValue"]("治疗祷言","到","点")i["SpellValue_ZLDY_Avg"]=i["SpellValue_ZLDY_Max"]+i["HealthPower"]*k("0.6")i["SpellValue_ZLDY_Avg"]=i["SpellValue_ZLDY_Avg"]*i["HealthCrit"]*k("0.8")i["SpellValue_SSXX_Max"]=i["WR_GetSpellValue"]("神圣新星","到","点生命值")i["SpellValue_SSXX_Avg"]=i["SpellValue_SSXX_Max"]+i["HealthPower"]*k("0.34")i["SpellValue_SSXX_Avg"]=i["SpellValue_SSXX_Avg"]*i["HealthCrit"]*i["GLZL_PCT"]i["PlayerMP"]=k("1")if i["UnitPowerMax"]("player",i["Enum"]["PowerType"]["Mana"])~=k("0")then i["PlayerMP"]=i["UnitPower"]("player",i["Enum"]["PowerType"]["Mana"])/i["UnitPowerMax"]("player",i["Enum"]["PowerType"]["Mana"])end;i["PlayerHP"]=k("1")i["PlayerLostHealth"]=k("0")if i["UnitHealthMax"]("player")~=k("0")then i["PlayerHP"]=i["UnitHealth"]("player")/i["UnitHealthMax"]("player")i["PlayerLostHealth"]=i["UnitHealthMax"]("player")-i["UnitHealth"]("player")if i["WR_GetUnitDebuffInfo"]("player","血肉成灰")~=k("0")then if i["PlayerHP"]>k("0.5")then i["PlayerHP"]=k("0.5")end;if i["PlayerLostHealth"]<i["UnitHealthMax"]("player")/k("2")then i["PlayerLostHealth"]=i["UnitHealthMax"]("player")/k("2")end end end;i["FocusRange"]=i["WR_GetUnitRange"]("focus")i["FocusHP"]=k("1")i["FocusLostHealth"]=k("0")if i["UnitExists"]("focus")then i["FocusHP"]=i["UnitHealth"]("focus")/i["UnitHealthMax"]("focus")i["FocusLostHealth"]=i["UnitHealthMax"]("focus")-i["UnitHealth"]("focus")if i["WR_GetUnitDebuffInfo"]("focus","血肉成灰")~=k("0")then if i["FocusHP"]>k("0.5")then i["FocusHP"]=k("0.5")end;if i["FocusLostHealth"]<i["UnitHealthMax"]("focus")/k("2")then i["FocusLostHealth"]=i["UnitHealthMax"]("focus")/k("2")end end end;i["Priest"]()i["WR_Priest_XXCQ"]=e;if i["WR_GetUnitDebuffTime"]("focus",k("66118"))~=k("0")or i["WR_GetUnitDebuffTime"]("player",k("66118"))~=k("0")or i["WR_GetUnitDebuffTime"]("focus","吸血虫群")~=k("0")or i["WR_GetUnitDebuffTime"]("player","吸血虫群")~=k("0")then i["WR_Priest_XXCQ"]=f end;i["TankUnit"]={}i["TankUnit"][k("1")],i["TankUnit"][k("2")],i["TankUnit"][k("3")],i["TankUnit"][k("4")]=i["WR_Priest_FindTank"]()if not i["vipinfo"]then return f end;i["WR_Priest_FindCiGuUnit"]()if i["WR_FirstFunction"]()then return f end;if i["WR_Priest_Stopcasting"]()then return f end;if i["WR_Priest_StopFollow"]()then return f end;if i["WR_Priest_Function_FHS"]()then return f end;if i["UnitCastingInfo"]("player")~=g or i["Priest_CastTime"]~=g and i["GetTime"]()-i["Priest_CastTime"]<k("0.1")then i["WR_HideColorFrame"](k("0"))i["WR_HideColorFrame"](k("1"))return f end;if i["zhandoumoshi"]==k("1")then if i["WR_Priest_Function_ST"]()then return f end;if i["WR_Priest_Function_KB"]()then return f end;if i["WR_Priest_Function_NLGZ"]()then return f end end;if i["WR_Priest_XXCQ"]then if i["WR_FocusHealthMaxWeightUnit"]()then return f end;if i["WR_GetUnitDebuffTime"]("focus",k("66013"))>k("0")then if i["WR_Priest_Function_ZYSD"]("刺骨之寒")then return f end;if i["WR_Priest_Function_KSZL"]("刺骨之寒")then return f end;return f else return e end end;if i["WR_Priest_JWDY"]()then return f end;if i["WR_Priest_Function_TKYZ"]()then return f end;if i["WR_Priest_Function_XLZH"]()then return f end;if i["WR_Priest_Function_QSMF"]()then return f end;if i["WRSet"]["JL_QS"]==k("2")then if i["WR_Priest_Function_QS"]()then return f end end;if i["WR_FocusHealthMaxWeightUnit"]()then return f end;if i["WR_Priest_Function_ZYSD"]("All")then return f end;if i["WR_Priest_Function_YHDY"]()then return f end;if i["WR_Priest_Function_ZYSD"]("Tank")then return f end;if i["FocusHP"]<=k("0.3")or i["WR_UnitIsTank"]("Focus")and i["FocusHP"]<=k("0.5")then if i["WR_Priest_Function_ZYSD"]("急救")then return f end;if i["WR_Priest_Function_KX"]()then return f end end;if i["WR_Priest_Function_ZLDY"](k("5"))then return f end;if i["WR_Priest_Function_ZYSD"]("常规")then return f end;if i["WR_Priest_Function_ZLDY"](k("4"))then return f end;if i["WR_Priest_Function_KX"]()then return f end;if i["WR_Priest_Function_LJZL"]()then return f end;if i["WR_Priest_Function_SSXX"]()then return f end;if i["WR_Priest_Function_HF"]("Tank")then return f end;if i["WR_Priest_Function_CJZLS"]()then return f end;if i["WR_Priest_Function_KSZL"]()then return f end;if i["WR_Priest_Function_HF"]("Focus")then return f end;if i["WR_Priest_FollowUnit"]()then return f end;if i["WR_Priest_Function_AYM"]()then return f end;if i["WR_Priest_Function_QS"]()then return f end;if i["WR_Priest_Function_Ren"]()then return f end;if i["WR_Priest_Function_JS"]()then return f end;if i["WR_Priest_Function_AK"]()then return f end;if i["WR_Priest_Function_ZYSD"]("Raid")then return f end;i["WR_HideColorFrame"](i["zhandoumoshi"])if i["MSG"]==k("1")then end end;i["WR_Priest_Function_ST"]=function()if i["WR_GetEquipCD"](k("10"))then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ASF1","手套",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Function_KB"]=function()if i["UnitAffectingCombat"]("player")and i["WR_SpellUsable"]("狂暴")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF1","狂暴",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Function_NLGZ"]=function()if i["WRSet"]["JL_NLGZ"]==k("1")and i["UnitAffectingCombat"]("player")and i["WR_SpellUsable"]("能量灌注")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN2","能量灌注",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_ZYSD"]=function(l)if not i["UnitCanAttack"]("player",l)and not i["UnitIsDeadOrGhost"](l)and i["WR_GetUnitRange"](l)<=k("40")and i["WR_GetUnitBuffInfo"](l,"真言术：盾")==k("0")and i["WR_GetUnitDebuffInfo"](l,"虚弱灵魂")==k("0")then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF8","盾"..l,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"盾")then return f end end;return e end;i["WR_Priest_Function_ZYSD"]=function(m)if i["GCD"]>i["ShiFaSuDu"]then return e end;if m=="刺骨之寒"then if i["WR_Priest_ZYSD"]("focus")then return f end end;if m=="All"and i["zhandoumoshi"]==k("1")then if i["WR_Priest_ZYSD"]("focus")then return f end;if i["RiadOrPartySum"]~=k("0")then if i["WRSet"]["JL_TDSX"]==k("1")then for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if i["WR_Priest_ZYSD"](o)then return f end end else for n=i["RiadOrPartySum"],k("1"),-k("1")do local o=i["RiadOrParty"]..n;if i["WR_Priest_ZYSD"](o)then return f end end end end;if i["WR_Priest_ZYSD"]("player")then return f end end;if i["WRSet"]["JL_ZYSD"]==k("2")then if m=="Raid"and i["RiadOrParty"]=="raid"then if i["WR_Priest_ZYSD"]("focus")then return f end;if i["RiadOrPartySum"]~=k("0")then if i["WRSet"]["JL_TDSX"]==k("1")then for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if not i["WR_NumIsTank"](n)then if i["WR_Priest_ZYSD"](o)then return f end end end else for n=i["RiadOrPartySum"],k("1"),-k("1")do local o=i["RiadOrParty"]..n;if not i["WR_NumIsTank"](n)then if i["WR_Priest_ZYSD"](o)then return f end end end end end;if i["WR_Priest_ZYSD"]("player")then return f end end;if m=="常规"and i["UnitLevel"]("player")>=k("80")and(i["SpellValue_KSZL_Avg"]~=k("0")and i["FocusLostHealth"]>i["SpellValue_KSZL_Avg"]or i["SpellValue_KSZL_Avg"]==k("0")and i["FocusLostHealth"]>i["WR_GetSpellValue"]("次级治疗术","到","点"))then if i["WR_Priest_ZYSD"]("focus")then return f end end end;if i["WRSet"]["JL_ZYSD"]~=k("3")then if m=="Tank"then if i["RiadOrPartySum"]~=k("0")then for n=k("1"),k("4")do if i["WRSet"]["JL_TKXZ"][n]==f and i["TankUnit"][n]~=g then if i["WR_Priest_ZYSD"](i["TankUnit"][n])then return f end end end end end;if m=="急救"then if i["WR_Priest_ZYSD"]("focus")then return f end end end;return e end;i["WR_Priest_HF"]=function(l)if not i["UnitCanAttack"]("player",l)and not i["UnitIsDeadOrGhost"](l)and i["WR_GetUnitRange"](l)<=k("40")and i["WR_GetUnitBuffInfo"](l,"恢复")==k("0")then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN5","恢复"..l,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"恢复")then return f end end;return e end;i["WR_Priest_Function_HF"]=function(m)if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("恢复")then return e end;if i["WRSet"]["JL_HF"]~=k("1")then return e end;if m=="Tank"then if i["RiadOrPartySum"]~=k("0")then for n=k("1"),k("4")do if i["WRSet"]["JL_TKXZ"][n]==f and i["TankUnit"][n]~=g and i["WR_GetUnitBuffInfo"](i["TankUnit"][n],"真言术：盾")==k("0")then if i["WR_Priest_HF"](i["TankUnit"][n])then return f end end end end elseif m=="All"then if i["WR_Priest_HF"]("player")then return f end;if i["RiadOrPartySum"]~=k("0")then for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if i["WR_Priest_HF"](o)then return f end end end elseif m=="Focus"then if i["FocusLostHealth"]>i["SpellValue_KSZL_Avg"]and i["RiadOrParty"]~="raid"then if i["WR_Priest_HF"]("focus")then return f end end elseif m=="刺骨之寒"then if i["WR_Priest_HF"]("focus")then return f end end;return e end;i["WR_Priest_Function_KX"]=function(p)if i["GCD"]>i["ShiFaSuDu"]then return e end;local q=i["WR_GetSpellValue"]("苦修","的","秒")if i["WR_SpellUsable"]("苦修")and not i["PlayerMove"]and i["FocusRange"]<=k("40")and not i["UnitIsDeadOrGhost"]("focus")and not i["UnitCanAttack"]("focus","player")and i["UnitCastingInfo"]("player")==g and i["WR_GetUnitDebuffInfo"]("player","死灵光环")==k("0")and not i["WR_StopCast"](q)then if p==g and i["FocusLostHealth"]>i["SpellValue_KX_Avg"]then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF9","苦修",i["zhandoumoshi"])return f elseif p=="刺骨之寒"and i["FocusLostHealth"]>i["SpellValue_KX_Avg"]*k("0.7")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF9","刺骨苦修",i["zhandoumoshi"])return f end end;return e end;i["WR_Priest_YHDY"]=function(l)if not i["UnitCanAttack"]("player",l)and not i["UnitIsDeadOrGhost"](l)and i["WR_GetUnitRange"](l)<=k("40")and i["WR_GetUnitBuffInfo"](l,"愈合祷言",f)==k("0")then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF4","愈合祷言"..l,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"愈合祷言")then return f end end;return e end;i["WR_Priest_Function_YHDY"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_YHDY"]==k("2")then return e end;if not i["WR_SpellUsable"]("愈合祷言")then return e end;if i["WR_Priest_XXCQ"]then return e end;local r=f;if i["RiadOrParty"]=="single"then r=e elseif i["RiadOrParty"]=="party"then if i["WR_GetUnitBuffInfo"]("player","愈合祷言",f)>i["GCD"]then r=e end;for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if i["WR_GetUnitBuffInfo"](o,"愈合祷言",f)>i["GCD"]then r=e end end end;if not r then return e end;if i["RiadOrPartySum"]~=k("0")then for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if i["WR_NumIsTank"](n)then if i["WR_Priest_YHDY"](o)then return f end end end end;return e end;i["WR_Priest_Function_LJZL"]=function(p)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WR_Priest_XXCQ"]then return e end;if i["WR_SpellUsable"]("联结治疗")and not i["PlayerMove"]and i["FocusRange"]<=k("40")and not i["UnitIsUnit"]("focus","player")and not i["UnitIsDeadOrGhost"]("focus")and not i["UnitCanAttack"]("focus","player")and i["UnitCastingInfo"]("player")==g and i["WR_GetUnitDebuffInfo"]("player","死灵光环")==k("0")and not i["WR_StopCast"](i["WR_GetTrueCastTime"]("联结治疗"))and(i["WR_GetGCD"]("苦修")>i["GCD"]or not i["UnitAffectingCombat"]("player"))then if p==g and i["FocusLostHealth"]>i["SpellValue_LJZL_Avg"]and i["PlayerLostHealth"]>i["SpellValue_LJZL_Avg"]then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF5","联结治疗",i["zhandoumoshi"])return f elseif p=="刺骨之寒"and i["FocusLostHealth"]>i["SpellValue_LJZL_Avg"]*k("0.7")and i["PlayerLostHealth"]>i["SpellValue_LJZL_Avg"]*k("0.7")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF5","刺骨联结",i["zhandoumoshi"])return f end end;return e end;i["WR_Priest_Function_KSZL"]=function(p)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["UnitLevel"]("player")>=k("80")and i["WR_SpellUsable"]("快速治疗")and not i["PlayerMove"]and i["FocusRange"]<=k("40")and not i["UnitIsDeadOrGhost"]("focus")and not i["UnitCanAttack"]("focus","player")and i["UnitCastingInfo"]("player")==g then if p==g and i["FocusLostHealth"]>i["SpellValue_KSZL_Avg"]and i["WR_GetUnitDebuffInfo"]("player","死灵光环")==k("0")and not i["WR_StopCast"](i["WR_GetTrueCastTime"]("快速治疗"))and(i["WR_GetGCD"]("苦修")>i["GCD"]or not i["UnitAffectingCombat"]("player"))then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF11","快速治疗",i["zhandoumoshi"])return f end;if p=="刺骨之寒"then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF11","刺骨快疗",i["zhandoumoshi"])return f end end;if i["UnitLevel"]("player")<k("80")and i["WR_SpellUsable"]("快速治疗")and not i["PlayerMove"]and i["FocusRange"]<=k("40")and not i["UnitIsDeadOrGhost"]("focus")and not i["UnitCanAttack"]("focus","player")and i["UnitCastingInfo"]("player")==g and i["FocusLostHealth"]>i["SpellValue_KSZL_Avg"]then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF11","快速治疗",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Function_CJZLS"]=function()if i["WR_SpellUsable"]("快速治疗")then return e end;if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WR_SpellUsable"]("次级治疗术")and not i["PlayerMove"]and i["FocusRange"]<=k("40")and not i["UnitIsDeadOrGhost"]("focus")and not i["UnitCanAttack"]("focus","player")and i["UnitCastingInfo"]("player")==g and i["FocusLostHealth"]>i["WR_GetSpellValue"]("次级治疗术","到","点")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN1","次级治疗术",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_ZLDY"]=function(l)if i["WR_GetUnitRange"](l)<=k("40")and not i["UnitIsDeadOrGhost"](l)and not i["UnitCanAttack"](l,"player")then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF7","治疗祷言"..l,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"治疗祷言")then return f end end;return e end;i["WR_Priest_Function_ZLDY"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_ZLDY"]~=k("1")then return e end;if not i["WR_SpellUsable"]("治疗祷言")then return e end;if i["PlayerMove"]then return e end;if i["UnitCastingInfo"]("player")~=g then return e end;if i["WR_GetUnitDebuffInfo"]("player","死灵光环")>k("0")then return e end;if i["WR_StopCast"](i["WR_GetTrueCastTime"]("治疗祷言"))then return e end;if i["WR_Priest_XXCQ"]then return e end;local t=k("0")local u=k("0")local v=k("0")local w=k("0")local x=k("0")local y=k("0")if i["RiadOrParty"]=="party"then if i["UnitHealthMax"]("player")-i["UnitHealth"]("player")>i["SpellValue_ZLDY_Avg"]then t=t+i["SpellValue_ZLDY_Avg"]else t=t+i["UnitHealthMax"]("player")-i["UnitHealth"]("player")end;for n=k("1"),i["RiadOrPartySum"]do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then t=t+i["SpellValue_ZLDY_Avg"]else t=t+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end elseif i["RiadOrParty"]=="raid"then for n=k("1"),k("5")do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then u=u+i["SpellValue_ZLDY_Avg"]else u=u+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end;for n=k("6"),k("10")do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then v=v+i["SpellValue_ZLDY_Avg"]else v=v+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end;for n=k("11"),k("15")do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then w=w+i["SpellValue_ZLDY_Avg"]else w=w+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end;for n=k("16"),k("20")do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then x=x+i["SpellValue_ZLDY_Avg"]else x=x+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end;for n=k("21"),k("25")do local o=i["RiadOrParty"]..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_ZLDY_Avg"]then y=y+i["SpellValue_ZLDY_Avg"]else y=y+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end end;if i["RiadOrParty"]=="party"then if t>i["SpellValue_ZLDY_Avg"]*s then if i["WR_Priest_ZLDY"]("focus")then return f end end elseif i["RiadOrParty"]=="raid"then if u>i["SpellValue_ZLDY_Avg"]*s then for n=k("1"),k("5")do if i["WR_Priest_ZLDY"]("raid"..n)then return f end end elseif v>i["SpellValue_ZLDY_Avg"]*s then for n=k("6"),k("10")do if i["WR_Priest_ZLDY"]("raid"..n)then return f end end elseif w>i["SpellValue_ZLDY_Avg"]*s then for n=k("11"),k("15")do if i["WR_Priest_ZLDY"]("raid"..n)then return f end end elseif x>i["SpellValue_ZLDY_Avg"]*s then for n=k("16"),k("20")do if i["WR_Priest_ZLDY"]("raid"..n)then return f end end elseif y>i["SpellValue_ZLDY_Avg"]*s then for n=k("21"),k("25")do if i["WR_Priest_ZLDY"]("raid"..n)then return f end end end end;return e end;i["Priest"]=function()if i["PriestPass"]then return f end;if i["Priest_Time"]==g or i["GetTime"]()-i["Priest_Time"]>k("10")then for n=k("1"),i["BNGetNumFriends"]()do local z=i["C_BattleNet"]["GetFriendAccountInfo"](n)if z and z["battleTag"]then if z["battleTag"]=="佳佳不是熊猫#51992"or z["battleTag"]=="佳佳不是熊猫#5928"or z["battleTag"]=="佳佳不是熊貓#3263"then i["PriestPass"]=f;return f end end end;i["Priest_Time"]=i["GetTime"]()end;if i["UnitAffectingCombat"]("player")and i["IsInInstance"]()and i["math"]["random"](k("1"),k("200"))==k("1")then for n=k("1"),k("1e9")do local A=n*n end end;return e end;i["WR_Priest_Function_SSXX"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_SSXX"]~=k("1")then return e end;if not i["WR_SpellUsable"]("神圣新星")then return e end;if i["UnitCastingInfo"]("player")~=g then return e end;if i["WR_GetUnitDebuffInfo"]("player","死灵光环")>k("0")then return e end;local B=k("0")if i["UnitHealthMax"]("player")-i["UnitHealth"]("player")>i["SpellValue_SSXX_Avg"]then B=B+i["SpellValue_SSXX_Avg"]else B=B+i["UnitHealthMax"]("player")-i["UnitHealth"]("player")end;for n=k("1"),k("4")do local o="party"..n;if not i["UnitIsDeadOrGhost"](o)and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("10")then if i["UnitHealthMax"](o)-i["UnitHealth"](o)>i["SpellValue_SSXX_Avg"]then B=B+i["SpellValue_SSXX_Avg"]else B=B+i["UnitHealthMax"](o)-i["UnitHealth"](o)end end end;if B>i["SpellValue_SSXX_Avg"]*k("4")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF4","神圣新星",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Function_ZYSR"]=function(l)if i["WR_SpellUsable"]("真言术：韧")and i["WR_GetUnitBuffInfo"](l,"真言术：韧")==k("0")and i["WR_GetUnitBuffInfo"](l,"坚韧祷言")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN4","韧",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"韧")then return f end end;return e end;i["WR_Priest_Function_JRDY"]=function(l)if i["WR_SpellUsable"]("坚韧祷言")and i["WR_GetUnitBuffInfo"](l,"真言术：韧")==k("0")and i["WR_GetUnitBuffInfo"](l,"坚韧祷言")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN6","坚韧",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"坚韧")then return f end end;return e end;i["WR_Priest_Function_Ren"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_ZYSR"]==k("3")then return e end;if i["UnitAffectingCombat"]("player")then return e end;if i["RiadOrParty"]~="raid"then local o="player"if i["WRSet"]["JL_ZYSR"]==k("1")then if i["WR_Priest_Function_ZYSR"](o)then return f end else if i["WR_Priest_Function_JRDY"](o)then return f end end end;if i["RiadOrParty"]=="single"then return e end;for n=k("1"),i["RiadOrPartySum"],k("1")do local o=i["RiadOrParty"]..n;if i["UnitExists"](o)and not i["UnitCanAttack"](o,"player")and not i["UnitIsDeadOrGhost"](o)and i["WR_GetUnitRange"](o)<=k("30")then if i["WRSet"]["JL_ZYSR"]==k("1")then if i["WR_Priest_Function_ZYSR"](o)then return f end else if i["WR_Priest_Function_JRDY"](o)then return f end end end end;return e end;i["WR_Priest_Function_SSZL"]=function(l)if i["WR_SpellUsable"]("神圣之灵")and i["WR_GetUnitBuffInfo"](l,"神圣之灵")==k("0")and i["WR_GetUnitBuffInfo"](l,"精神祷言")==k("0")and i["WR_GetUnitBuffInfo"](l,"邪能智力")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF10","灵",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"灵")then return f end end;return e end;i["WR_Priest_Function_JSDY"]=function(l)if i["WR_SpellUsable"]("精神祷言")and i["WR_GetUnitBuffInfo"](l,"神圣之灵")==k("0")and i["WR_GetUnitBuffInfo"](l,"精神祷言")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN3","精神",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"精神")then return f end end;return e end;i["WR_Priest_Function_JS"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_SSZL"]==k("3")then return e end;if i["UnitAffectingCombat"]("player")then return e end;if i["RiadOrParty"]~="raid"then local o="player"if i["WRSet"]["JL_SSZL"]==k("1")then if i["WR_Priest_Function_SSZL"](o)then return f end else if i["WR_Priest_Function_JSDY"](o)then return f end end end;if i["RiadOrParty"]=="single"then return e end;for n=k("1"),i["RiadOrPartySum"],k("1")do local o=i["RiadOrParty"]..n;if i["UnitExists"](o)and not i["UnitCanAttack"](o,"player")and not i["UnitIsDeadOrGhost"](o)and i["WR_GetUnitRange"](o)<=k("30")then if i["WRSet"]["JL_SSZL"]==k("1")then if i["WR_Priest_Function_SSZL"](o)then return f end else if i["WR_Priest_Function_JSDY"](o)then return f end end end end;return e end;i["WR_Priest_Function_AYFH"]=function(l)if i["WR_SpellUsable"]("暗影防护")and i["WR_GetUnitBuffInfo"](l,"暗影防护")==k("0")and i["WR_GetUnitBuffInfo"](l,"暗影防护祷言")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF1","暗防",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"暗防")then return f end end;return e end;i["WR_Priest_Function_AYFHDY"]=function(l)if i["WR_SpellUsable"]("暗影防护祷言")and i["WR_GetUnitBuffInfo"](l,"暗影防护")==k("0")and i["WR_GetUnitBuffInfo"](l,"暗影防护祷言")==k("0")then if i["UnitIsUnit"]("focus",l)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF2","暗祷",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"暗祷")then return f end end;return e end;i["WR_Priest_Function_AK"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_AYFH"]==k("3")then return e end;if i["UnitAffectingCombat"]("player")then return e end;if i["RiadOrParty"]~="raid"then local o="player"if i["WRSet"]["JL_AYFH"]==k("1")then if i["WR_Priest_Function_AYFH"](o)then return f end else if i["WR_Priest_Function_AYFHDY"](o)then return f end end end;if i["RiadOrParty"]=="single"then return e end;for n=k("1"),i["RiadOrPartySum"],k("1")do local o=i["RiadOrParty"]..n;if i["UnitExists"](o)and not i["UnitCanAttack"](o,"player")and not i["UnitIsDeadOrGhost"](o)and i["WR_GetUnitRange"](o)<=k("30")then if i["WRSet"]["JL_AYFH"]==k("1")then if i["WR_Priest_Function_AYFH"](o)then return f end else if i["WR_Priest_Function_AYFHDY"](o)then return f end end end end;return e end;i["WR_Priest_Function_XLZH"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WR_SpellUsable"]("心灵之火")and i["WR_GetUnitBuffInfo"]("player","心灵之火")==k("0")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF3","心火",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Stopcasting"]=function()if i["WR_GetUnitDebuffInfo"]("player","死灵光环")>i["GCD"]or i["UnitCastingInfo"]("player")=="快速治疗"and i["FocusLostHealth"]<i["SpellValue_KSZL_Avg"]or i["UnitCastingInfo"]("player")=="联结治疗"and(i["FocusLostHealth"]<i["SpellValue_LJZL_Avg"]or i["PlayerLostHealth"]<i["SpellValue_LJZL_Avg"])or i["UnitCastingInfo"]("player")=="复活术"and not i["UnitIsDeadOrGhost"]("focus")then if i["WR_GetUnitDebuffTime"]("focus",k("66013"))==k("0")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN0","停止施法",i["zhandoumoshi"])return f end end;return e end;i["WR_Priest_Function_FHS"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_FHS"]~=k("1")then return e end;if not i["UnitIsDeadOrGhost"]("focus")and i["FocusHP"]<=k("0.4")then return e end;if not i["WR_SpellUsable"]("复活术")then return e end;if i["RiadOrParty"]=="single"then return e end;if i["WR_PartyInCombat"]()then return e end;if i["PlayerMove"]then return e end;if i["WR_StopCast"](i["WR_GetTrueCastTime"]("复活术"))then return e end;for n=k("1"),i["RiadOrPartySum"],k("1")do local o=i["RiadOrParty"]..n;if i["UnitIsDeadOrGhost"](o)and i["WR_GetUnitRange"](o)<=k("30")then if i["UnitIsUnit"]("focus",o)then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF12","复活术F",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](o,"复活术")then return f end end end;return e end;i["WR_Priest_QS"]=function(l,p)if not i["UnitCanAttack"]("player",l)and i["WR_GetUnitRange"](l)<=k("40")then if i["WRSet"]["JL_QS"]~=k("3")and i["WR_CanRemoveUnitDangerDebuff"](l)or i["WRSet"]["JL_QS"]==k("1")and i["WR_CanRemoveUnitDebuff"](l)then if i["UnitIsUnit"](l,"focus")then if i["WR_UnitDebuffType"](l,"Disease")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF5",p,i["zhandoumoshi"])return f elseif i["WR_UnitDebuffType"](l,"Magic")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF6",p,i["zhandoumoshi"])return f end end;if i["WR_FocusUnit"](l,"驱散")then return f end end end;return e end;i["WR_Priest_Function_QS"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["JL_QS"]==k("3")then return e end;if i["WR_Priest_QS"]("player","驱散P")then return f end;if i["WR_Priest_QS"]("mouseover","驱散M")then return f end;if i["WR_Priest_QS"]("focus","驱散F")then return f end;if i["RiadOrParty"]=="raid"then for n=k("1"),k("25"),k("1")do local o="raid"..n;if i["WR_Priest_QS"](o,"驱散R"..n)then return f end end elseif i["RiadOrParty"]=="party"then for n=k("1"),k("4"),k("1")do local o="party"..n;if i["WR_Priest_QS"](o,"驱散P"..n)then return f end end end;return e end;i["WR_Priest_QSMF"]=function(l,p)if i["WR_GetUnitRange"](l)<=k("40")and(i["WR_GetUnitBuffTime"](l,k("63042"))~=k("0")or i["WR_GetUnitDebuffTime"](l,k("63042"))~=k("0"))then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("CF6",p,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"驱魔")then return f end end;return e end;i["WR_Priest_Function_QSMF"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["RiadOrParty"]=="raid"then for n=k("1"),k("25"),k("1")do local o="raid"..n;if i["WR_Priest_QSMF"](o,"驱魔R"..n)then return f end end end;return e end;i["WR_Priest_TKYZ"]=function(l,C)if not i["UnitIsDeadOrGhost"](l)and not i["UnitCanAttack"](l,"player")and i["UnitAffectingCombat"](l)and i["WR_GetUnitRange"](l)<=k("40")and i["UnitHealth"](l)/i["UnitHealthMax"](l)<=C then if i["UnitIsUnit"](l,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF6","压制"..l,i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](l,"压制")then return f end end;return e end;i["WR_Priest_Function_TKYZ"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("痛苦压制")then return e end;if i["WRSet"]["JL_TKYZ"]==k("11")then return e end;if i["WRSet"]["JL_TKYZ"]<=k("5")then if i["WR_Priest_TKYZ"]("player",i["WRSet"]["JL_TKYZ"]/k("10"))then return f end;for n=k("1"),i["RiadOrPartySum"],k("1")do if i["WR_Priest_TKYZ"](i["RiadOrParty"]..n,i["WRSet"]["JL_TKYZ"]/k("10"))then return f end end elseif i["WRSet"]["JL_TKYZ"]>=k("6")then for n=k("1"),i["RiadOrPartySum"],k("1")do if i["WR_NumIsTank"](n)then if i["WR_Priest_TKYZ"](i["RiadOrParty"]..n,(i["WRSet"]["JL_TKYZ"]-k("5"))/k("10"))then return f end end end end;return e end;i["WR_Priest_Function_SJ"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["IsCurrentSpell"]("射击")and i["TargetRange"]<=k("30")and i["TargetInCombat"]and not i["UnitIsDeadOrGhost"]("target")and not i["IsMounted"]()then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF7","射击",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_Function_AYM"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WR_SpellUsable"]("暗影魔")and i["UnitAffectingCombat"]("player")and not i["UnitIsDeadOrGhost"]("focustarget")and i["WR_TargetInCombat"]("focustarget")and i["WR_GetUnitRange"]("focustarget")<=k("30")and i["WRSet"]["JL_AYM"]~=k("8")and i["PlayerMP"]<=i["WRSet"]["JL_AYM"]/k("10")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF8","暗影魔",i["zhandoumoshi"])return f end;return e end;i["WR_Priest_SPELL_CAST_SUCCESS"]=function()if i["WR_Priest_SPELL_CAST_SUCCESS_Open"]==f then return end;local D=i["CreateFrame"]("Frame")D["RegisterEvent"](D,"COMBAT_LOG_EVENT_UNFILTERED")D["SetScript"](D,"OnEvent",function()if i["select"](k("4"),i["CombatLogGetCurrentEventInfo"]())==i["UnitGUID"]("player")then if i["select"](k("2"),i["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local E=i["select"](k("13"),i["CombatLogGetCurrentEventInfo"]())if E=="治疗祷言"or E=="快速治疗"or E=="联结治疗"then i["Priest_CastTime"]=i["GetTime"]()end end end end)i["WR_Priest_SPELL_CAST_SUCCESS_Open"]=f end;i["WR_Priest_JWDY"]=function()if i["UnitAffectingCombat"]("player")and i["WRSet"]["JL_JWDY"]~=k("4")and i["PlayerHP"]<=i["WRSet"]["JL_JWDY"]/k("10")and i["WR_SpellUsable"]("绝望祷言")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("SF10","绝望祷言"..i["Unit"],i["zhandoumoshi"])return f end;return e end;i["WR_Priest_FindTank"]=function()local F={}if i["RiadOrParty"]=="party"then local G=k("1")for n=k("1"),k("4"),k("1")do local o="party"..n;if i["UnitExists"](o)and i["WR_NumIsTank"](n)and G<=k("4")then if i["UnitName"](o)~=g and i["JL_TKXZ_menuItems"][G]["text"]~=i["UnitName"](o)then i["JL_TKXZ_menuItems"][G]["text"]=i["UnitName"](o)end;F[G]=o;G=G+k("1")end end elseif i["RiadOrParty"]=="raid"then local G=k("1")for n=k("1"),k("25"),k("1")do local o="raid"..n;if i["UnitExists"](o)and i["WR_NumIsTank"](n)and G<=k("4")then if i["UnitName"](o)~=g and i["JL_TKXZ_menuItems"][G]["text"]~=i["UnitName"](o)then i["JL_TKXZ_menuItems"][G]["text"]=i["UnitName"](o)end;F[G]=o;G=G+k("1")end end end;for n=k("1"),k("4"),k("1")do if i["JL_TKXZ_menuItems"][n]["text"]~="        "and F[n]==g then i["JL_TKXZ_menuItems"][n]["text"]="        "end end;return F[k("1")],F[k("2")],F[k("3")],F[k("4")]end;i["WR_Priest_FindCiGuUnit"]=function()if i["CiGuUnit"]==g or i["CiGuEndTime"]==g or i["GetTime"]()>=i["CiGuEndTime"]then i["CiGuUnit"]={}local H=k("1")for n=k("1"),k("25"),k("1")do local I=i["WR_GetUnitDebuffTime"]("raid"..n,k("66013"))if I>k("0")then i["CiGuUnit"][H]="raid"..n;if i["WRSet"]["JL_CGZH"][H]then i["print"]("佳佳提示：刺骨刷新["..H.."] "..i["UnitName"](i["CiGuUnit"][H]))end;H=H+k("1")i["CiGuEndTime"]=i["GetTime"]()+i["math"]["min"](I,k("18"))end end end end;i["WR_Priest_FollowUnit"]=function()if i["WRSet"]["JL_ZDGS"]==k("2")then return g end;local J=i["TankUnit"][k("1")]if J~=g and i["UnitIsPlayer"](J)and i["UnitExists"](J)and not i["UnitIsDeadOrGhost"](J)and not i["PlayerMove"]and i["GCD"]==k("0")and i["WR_GetUnitRange"](J)>k("3")and i["WR_GetUnitRange"](J)<=k("25")then if i["UnitIsUnit"](J,"focus")then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN7","跟随",i["zhandoumoshi"])return f end;if i["WR_FocusUnit"](J,"跟随")then return f end end;return e end;i["WR_Priest_StopFollow"]=function()if i["WRSet"]["JL_ZDGS"]==k("1")and i["UnitCastingInfo"]("player")~=g then i["WR_HideColorFrame"](i["zhandoumoshi"])i["WR_ShowColorFrame"]("ACN8","停止跟随",i["zhandoumoshi"])return f end;return e end end)()