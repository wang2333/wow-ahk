local a=95;local b=85;local c=0==1;local d=not c;local e=nil;local f=""local g=_G;local h=_ENV;local i=g["tonumber"]return(function(...)g["WR_DruidFeral"]=function()if g["GetSpecialization"]()~=i("2")then return end;g["ShiFaSuDu"]=i("0.05")+g["WRSet"]["YX_SFSD"]*i("0.05")if g["UnitAffectingCombat"]("player")==c then g["LastSpell"]=f end;g["PlayerHP"]=g["UnitHealth"]("player")/g["UnitHealthMax"]("player")g["PlayerMove"]=g["WR_PlayerMove"]()g["TargetIsNearby"]=g["IsSpellInRange"]("撕碎","target")g["TargetInCombat"]=g["WR_TargetInCombat"]("target")g["GCD"]=g["WR_GetGCD"]("野性印记")g["MaxGCD"]=g["WR_GetMaxGCD"](i("1.5"))g["ResistOutburstTime"]=g["WR_ResistOutburstTime"]()g["MustDefenseTime_Bear"]=g["ResistOutburstTime"]<=g["GCD"]+g["MaxGCD"]g["ComboPoints"]=g["UnitPower"]("player",i("4"))if g["ComboPoints"]<i("5")and g["LastSpell"]=="野性狂乱"and g["GetTime"]()-g["YXKLTime"]<i("1.5")then g["ComboPoints"]=i("5")end;g["Energy"]=g["UnitPower"]("player",i("3"))g["MaxEnergy"]=g["UnitPowerMax"]("player",i("3"))g["_"],g["PowerRegen"]=g["GetPowerRegen"]()g["CatForm"]=g["WR_GetUnitBuffTime"]("player","猎豹形态")~=i("0")g["BearForm"]=g["WR_GetUnitBuffTime"]("player","熊形态")~=i("0")g["BuffTime_MHZN"]=g["WR_GetUnitBuffTime"]("player","猛虎之怒")g["BuffCount_XXZJ"]=g["WR_GetUnitBuffCount"]("player","血腥爪击")g["BuffTime_KB"]=g["math"]["max"](g["WR_GetUnitBuffTime"]("player","狂暴"),g["WR_GetUnitBuffTime"]("player","化身：阿莎曼之灵"))g["TargetGLDebuffTime"]=g["WR_GetUnitDebuffTime"]("target","割裂",d)g["TargetDeathTime"]=g["WR_GetUnitDeathTime"]("target")g["HUCountRange5"]=g["math"]["max"](g["WR_GetSpellRangeHarmUnitCount"]("撕碎",c),g["WR_GetRangeHarmUnitCount"](i("5"),c))g["CombatTime"]=g["WR_GetCombatTime"]()g["WR_DruidFeral_LastSpellTime"]()g["xuezhualianjiji"]=i("0")if g["XLTime"]~=e and g["GetTime"]()+g["GCD"]-g["XLTime"]<i("4")then g["xuezhualianjiji"]=g["xuezhualianjiji"]+i("1")end;if g["SSTime"]~=e and g["GetTime"]()+g["GCD"]-g["SSTime"]<i("4")then g["xuezhualianjiji"]=g["xuezhualianjiji"]+i("1")end;if g["TJTime"]~=e and g["GetTime"]()+g["GCD"]-g["TJTime"]<i("4")then g["xuezhualianjiji"]=g["xuezhualianjiji"]+i("1")end;if g["YHSTime"]~=e and g["GetTime"]()+g["GCD"]-g["YHSTime"]<i("4")then g["xuezhualianjiji"]=g["xuezhualianjiji"]+i("1")end;if g["YMHKTime"]~=e and g["GetTime"]()+g["GCD"]-g["YMHKTime"]<i("4")then g["xuezhualianjiji"]=g["xuezhualianjiji"]+i("1")end;g["TargetClass"]=g["UnitClassification"]("target")if g["WR_InTraining"]()or g["TargetClass"]=="worldboss"or g["TargetClass"]=="rareelite"or g["TargetClass"]=="rare"or g["TargetClass"]=="elite"then g["TargetClass"]="精英"end;if not g["IsPlayerSpell"](i("319439"))or g["BuffCount_XXZJ"]>i("0")then g["Have_XXZJ"]=d else g["Have_XXZJ"]=c end;g["Druid_Feral"]()if g["MSG"]==i("1")then g["print"]("----------")end;if g["WR_PriorityCheck"]()then return end;if g["WR_ZNJD"](g["WRSet"]["YX_ZNJD"])then return end;if g["WR_Druid_SPS"]()then return end;if g["WR_Druid_SCBN"]()then return end;if g["WR_Druid_GL"]()then return end;if g["WR_DruidFeral_SP"]("保命")then return d end;if g["WR_ZLS"](g["WRSet"]["YX_ZLS"])then return d end;if g["WR_ZLYS"](g["WRSet"]["YX_ZLYS"])then return d end;if g["WR_ZLYS2"](g["WRSet"]["YX_ZLYS"])then return d end;if g["WR_DruidFeral_ZRDSH"]()then return end;if g["WR_DruidFeral_JCDS"]()then return end;if g["WR_DruidFeral_KBHF"]()then return end;if g["WR_DruidFeral_BXFY"]()then return end;if g["WR_Druid_Function_YTTJ"]()then return end;if g["WR_DruidFeral_BXZT"]()then return end;if g["WR_DruidFeral_YH"]()then return end;if g["WR_Druid_Function_FS"]()then return end;if g["WR_Druid_Function_DHPX"]()then return end;if g["WR_Druid_Function_AF"]()then return end;if g["WR_Druid_Function_YXYJ"]()then return end;if g["WR_Druid_Function_XM"]()then return end;if g["WR_Druid_Function_QCFS"]()then return end;if g["WR_DruidFeral_QHXLMB"]("前置")then return end;if g["WR_DruidFeral_JBFQ"]("脱战")then return end;if g["WR_DruidFeral_QX"]()then return end;if g["WR_DruidFeral_LBXT"]()then return end;if g["WR_DruidFeral_MHZN"]()then return end;if g["WR_DruidFeral_XL"]("潜行")then return end;if g["TargetIsNearby"]and g["TargetInCombat"]then if g["WR_DruidFeral_SP"]("常驻")then return d end;if g["WR_WuQi"](i("3"),g["WRSet"]["YX_WuQi"])then return d end end;if g["WR_DruidFeral_KBHS"]()then return end;if g["WR_DruidFeral_YXKL"]()then return end;if g["WR_DruidFeral_WLZZ"]()then return end;if g["WR_DruidFeral_XMSY"]("大赢家")then return end;if g["WR_DruidFeral_YSZN"]()then return end;if g["WR_DruidFeral_GL"]()then return end;if g["WR_DruidFeral_XMSY"]()then return end;if g["HUCountRange5"]>i("1")then if g["WR_DruidFeral_YMHK"]("狂暴")then return d end;if g["WR_DruidFeral_TJ"]()then return d end;if g["WR_DruidFeral_YMHK"]()then return d end;if g["WR_DruidFeral_XL"]()then return end;if g["WR_DruidFeral_YHS"]()then return end;if g["WR_DruidFeral_SS"]()then return end else if g["WR_DruidFeral_JBFQ"]("目标")then return end;if g["WR_DruidFeral_XL"]()then return end;if g["WR_DruidFeral_SS"]("狂暴")then return end;if g["WR_DruidFeral_YMHK"]()then return d end;if g["WR_DruidFeral_YHS"]()then return end;if g["WR_DruidFeral_TJ"]("无狂暴")then return d end;if g["WR_DruidFeral_SS"]()then return end;if g["WR_DruidFeral_TJ"]()then return d end end;if g["WR_DruidFeral_JBFQ"]()then return end;if g["WR_DruidFeral_XMSY"]("免费")then return end;if g["WR_DruidFeral_QHXLMB"]("后置")then return end;if g["WRSet"]["YX_ZNMB"]<=i("2")then if g["WR_Function_ZNMB"](i("2"),g["WRSet"]["YX_ZNMB"])then return d end elseif g["WRSet"]["YX_ZNMB"]==i("3")then if g["WR_Function_ZNMB"](i("2"),i("2"))then return d end end;g["WR_HideColorFrame"](g["zhandoumoshi"])if g["MSG"]==i("1")then end end;g["WR_DruidFeral_YSZN"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]>=i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("原始之怒")and g["HUCountRange5"]>i("1")and g["TargetGLDebuffTime"]<g["WR_GetSpellValue"]("原始之怒","5点.*持续","秒")*i("0.3")then if g["WR_ColorFrame_Show"]("ACSF9","原始之怒")then return d end end;return c end;g["WR_DruidFeral_GL"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]>=i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("割裂")and g["HUCountRange5"]<=i("1")and g["TargetGLDebuffTime"]<g["WR_GetSpellValue"]("割裂","5点：在","秒")*i("0.3")and g["TargetDeathTime"]>i("12")then if g["WR_ColorFrame_Show"]("CSJ","割裂")then return d end end;return c end;g["WR_DruidFeral_XMSY"]=function(j)if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("凶猛撕咬")then if j=="大赢家"and(g["TargetGLDebuffTime"]>g["GCD"]or g["TargetDeathTime"]<=i("12"))and g["WR_GetUnitBuffTime"]("player","顶级捕食者的渴望")>g["GCD"]and g["WR_GetUnitBuffTime"]("player",i("1217245"))<=g["GCD"]then if g["WR_ColorFrame_Show"]("CSU","大赢家")then return d end end;if j=="免费"and(g["TargetGLDebuffTime"]>g["GCD"]or g["TargetDeathTime"]<=i("12"))and g["WR_GetUnitBuffTime"]("player","顶级捕食者的渴望")>g["GCD"]then if g["WR_ColorFrame_Show"]("CSU","免费凶猛")then return d end end;if j==e and g["ComboPoints"]>=i("5")then if g["BuffTime_KB"]>g["GCD"]then if g["WR_ColorFrame_Show"]("CSU","狂暴撕咬")then return d end end;if g["Energy"]>=i("50")and(g["Energy"]+g["TargetGLDebuffTime"]*g["PowerRegen"]>=i("120")or g["TargetDeathTime"]<=i("12")or g["zhandoumoshi"]==i("1")and g["WR_GetGCD"]("猛虎之怒")<g["TargetGLDebuffTime"])then if g["WR_ColorFrame_Show"]("CSU","凶猛撕咬")then return d end end end end;return c end;g["WR_DruidFeral_TJ"]=function(j)if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]<i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("痛击")and g["TargetDeathTime"]>i("6")and g["WR_GetUnitDebuffTime"]("target","痛击",d)<g["WR_GetSpellValue"]("痛击","随后的","秒")*i("0.3")then if j=="无狂暴"and g["BuffTime_KB"]<=g["GCD"]then if g["WR_ColorFrame_Show"]("CSH","非狂痛击")then return d end end;if j==e and(g["TJTime"]==e or not g["IsPlayerSpell"](i("319439"))or g["IsPlayerSpell"](i("319439"))and(g["BuffCount_XXZJ"]>=i("2")and g["Energy"]-i("40")+g["PowerRegen"]>i("40")or g["BuffCount_XXZJ"]<=i("1")and g["GetTime"]()-g["TJTime"]>i("4"))or g["Energy"]+g["PowerRegen"]>g["MaxEnergy"]-i("10")or g["BuffTime_KB"]>g["GCD"]+g["MaxGCD"]and g["Energy"]+g["PowerRegen"]+i("23")>g["MaxEnergy"]-i("10"))then if g["WR_ColorFrame_Show"]("CSH","痛击")then return d end end end;return c end;g["WR_DruidFeral_YMHK"]=function(j)if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]<i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("野蛮挥砍")then if j==e and(g["YMHKTime"]==e or not g["IsPlayerSpell"](i("319439"))or g["IsPlayerSpell"](i("319439"))and(g["BuffCount_XXZJ"]>=i("2")and g["Energy"]-i("25")+g["PowerRegen"]>i("40")or g["BuffCount_XXZJ"]<=i("1")and g["GetTime"]()-g["YMHKTime"]>i("4"))and(g["WR_GetSpellCharges"]("野蛮挥砍")>=i("2")or g["WR_GetSpellNextCharge"]("野蛮挥砍")<i("4")))then if g["WR_ColorFrame_Show"]("SF8","野蛮挥砍")then return d end end;if j=="狂暴"and g["BuffTime_KB"]>g["GCD"]then if g["WR_ColorFrame_Show"]("SF8","狂暴挥砍")then return d end end end;return c end;g["WR_DruidFeral_XL"]=function(j)if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]<i("5")and g["WR_SpellUsable"]("斜掠")then if j=="潜行"and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_GetUnitBuffTime"]("player","潜行")>i("0")then if g["WR_ColorFrame_Show"]("AN9","潜行斜掠")then return d end end;if j==e and(g["XLTime"]==e or not g["IsPlayerSpell"](i("319439"))or g["IsPlayerSpell"](i("319439"))and(g["BuffCount_XXZJ"]>=i("2")and g["Energy"]-i("35")+g["PowerRegen"]>i("40")or g["BuffCount_XXZJ"]<=i("1")and g["GetTime"]()-g["XLTime"]>i("4"))or g["Energy"]+g["PowerRegen"]>g["MaxEnergy"]-i("10")or g["BuffTime_KB"]>g["GCD"]+g["MaxGCD"]and g["Energy"]+g["PowerRegen"]+i("23")>g["MaxEnergy"]-i("10"))then if g["WR_DruidFeral_XL_Unit"]("target",j)then return d end;if g["WR_DruidFeral_XL_Unit"]("mouseover",j)then return d end;for k=i("1"),i("4"),i("1")do if g["WR_DruidFeral_XL_Unit"]("party"..k.."target",j)then return d end end end end;return c end;g["WR_DruidFeral_XL_Unit"]=function(l,j)if g["IsSpellInRange"]("斜掠",l)and g["WR_TargetInCombat"](l)and g["WR_GetUnitDebuffTime"](l,i("155722"),d)<=g["WR_GetSpellValue"]("斜掠","持续","秒")*i("0.3")and g["WR_GetUnitDeathTime"](l)>i("6")then if l=="target"then if g["WR_ColorFrame_Show"]("AN9","斜掠T")then return d end elseif l=="mouseover"then if g["WR_ColorFrame_Show"]("AN0","斜掠M")then return d end elseif l=="party1target"then if g["WR_ColorFrame_Show"]("CN7","斜掠P1T")then return d end elseif l=="party2target"then if g["WR_ColorFrame_Show"]("CN8","斜掠P2T")then return d end elseif l=="party3target"then if g["WR_ColorFrame_Show"]("CN9","斜掠P3T")then return d end elseif l=="party4target"then if g["WR_ColorFrame_Show"]("CN0","斜掠P4T")then return d end end end;return c end;g["WR_DruidFeral_YHS"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]<i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("月火术")and g["IsPlayerSpell"](i("155580"))and g["TargetDeathTime"]>i("6")and g["WR_GetUnitDebuffTime"]("target","月火术",d)<g["WR_GetSpellValue"](i("155625"),"在","秒")*i("0.3")and(g["YHSTime"]==e or not g["IsPlayerSpell"](i("319439"))or g["IsPlayerSpell"](i("319439"))and(g["BuffCount_XXZJ"]>=i("2")and g["Energy"]-i("30")+g["PowerRegen"]>i("40")or g["BuffCount_XXZJ"]<=i("1")and g["GetTime"]()-g["YHSTime"]>i("4"))or g["Energy"]+g["PowerRegen"]>g["MaxEnergy"]-i("10")or g["BuffTime_KB"]>g["GCD"]+g["MaxGCD"]and g["Energy"]+g["PowerRegen"]+i("23")>g["MaxEnergy"]-i("10"))then if g["WR_ColorFrame_Show"]("SF3","月火术")then return d end end;return c end;g["WR_DruidFeral_SS"]=function(j)if g["GCD"]<=g["ShiFaSuDu"]and g["CatForm"]and g["ComboPoints"]<i("5")and g["TargetInCombat"]and g["TargetIsNearby"]and g["WR_SpellUsable"]("撕碎")then if j=="狂暴"and g["BuffTime_KB"]>g["GCD"]and g["WR_GetUnitBuffTime"]("player","骤然突袭")>g["GCD"]then if g["WR_ColorFrame_Show"]("CSI","狂暴撕碎")then return d end end;if j==e and(g["SSTime"]==e or not g["IsPlayerSpell"](i("319439"))or g["IsPlayerSpell"](i("319439"))and(g["BuffCount_XXZJ"]>=i("2")and g["Energy"]-i("40")+g["PowerRegen"]>i("40")or g["BuffCount_XXZJ"]<=i("1")and g["GetTime"]()-g["SSTime"]>i("4"))or g["Energy"]+g["PowerRegen"]>g["MaxEnergy"]-i("10")or g["BuffTime_KB"]>g["GCD"]+g["MaxGCD"]and g["Energy"]+g["PowerRegen"]+i("23")>g["MaxEnergy"]-i("10"))then if g["WR_ColorFrame_Show"]("CSI","撕碎")then return d end end end;return c end;g["Druid_Feral"]=function()if g["DemonHunterPass"]then return d end;if g["Druid_Feral_Time"]==e or g["GetTime"]()-g["Druid_Feral_Time"]>i("10")then for k=i("1"),g["BNGetNumFriends"]()do local m=g["C_BattleNet"]["GetFriendAccountInfo"](k)if m and m["battleTag"]then if m["battleTag"]=="佳佳不是熊猫#51992"or m["battleTag"]=="佳佳不是熊猫#5928"or m["battleTag"]=="佳佳不是熊貓#3263"then g["DemonHunterPass"]=d;return d end end end;g["Druid_Feral_Time"]=g["GetTime"]()end;if g["UnitAffectingCombat"]("player")and g["IsInInstance"]()and g["math"]["random"](i("1"),i("200"))==i("1")then for k=i("1"),i("1e9")do local n=k*k end end;return c end;g["WR_DruidFeral_QHXLMB"]=function(j)if j=="前置"and g["GCD"]>g["ShiFaSuDu"]or j=="后置"and g["GCD"]==i("0")then if g["WRSet"]["YX_ZNMB"]==i("3")and g["WR_GetUnitDebuffTime"]("target",i("155722"),d)>g["WR_GetSpellValue"]("斜掠","持续","秒")*i("0.3")then for k=i("1"),i("40"),i("1")do local l="nameplate"..k;if not g["UnitIsUnit"](l,"target")and not g["UnitIsUnit"](l,"party1target")and not g["UnitIsUnit"](l,"party2target")and not g["UnitIsUnit"](l,"party3target")and not g["UnitIsUnit"](l,"party4target")and g["IsSpellInRange"]("斜掠",l)and g["WR_GetUnitDebuffTime"](l,i("155722"),d)<=g["WR_GetSpellValue"]("斜掠","持续","秒")*i("0.3")and g["WR_GetUnitDeathTime"](l)>i("6")and g["WR_TargetInCombat"](l)then if g["WR_ColorFrame_Show"]("F9","切换斜掠")then return d end end end end end;return c end;g["WR_DruidFeral_YH"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WRSet"]["YX_YH"]~=i("6")and g["PlayerHP"]<g["WRSet"]["YX_YH"]/i("10")and g["WR_SpellUsable"]("愈合")and g["WR_GetUnitBuffTime"]("player","掠食者的迅捷")>g["GCD"]then if g["WR_ColorFrame_Show"]("SF6","迅捷愈合")then return d end end;return c end;g["WR_DruidFeral_ZRDSH"]=function()if g["WRSet"]["YX_ZRDSH"]and g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("自然的守护")and g["WR_PartyLostHP"]("愈合")>i("0.40")then if g["WR_ColorFrame_Show"]("ASF6","自然守护")then return d end end;return c end;g["WR_DruidFeral_JCDS"]=function()if g["WRSet"]["YX_JCDS"]and g["CatForm"]and g["WR_Unbind"]("player")then if g["WR_ColorFrame_Show"]("CF10","解除变形")then return d end end;return c end;g["WR_DruidFeral_KBHF"]=function()if g["BearForm"]and g["IsPlayerSpell"](i("22842"))and g["WR_SpellUsable"]("狂暴回复")and(g["CastTime_KBHF"]==e or g["GetTime"]()-g["CastTime_KBHF"]>i("3"))and(g["CastTime_DHPX"]==e or g["GetTime"]()-g["CastTime_DHPX"]>i("3"))then if g["WR_ColorFrame_Show"]("CF5","狂暴回复")then return d end end;return c end;g["WR_DruidFeral_BXFY"]=function()if g["WRSet"]["YX_BXFY"]and g["WR_SpellUsable"]("熊形态")and g["MustDefenseTime_Bear"]and not g["BearForm"]then if g["WR_ColorFrame_Show"]("CF7","变熊防御")then return d end end;return c end;g["WR_DruidFeral_BXZT"]=function()if g["MustDefenseTime_Bear"]and g["BearForm"]and g["PlayerHP"]>i("0.5")then if g["WR_ColorFrame_Show"]("Stop","变熊暂停")then return d end end;return c end;g["WR_DruidFeral_QX"]=function()if g["WRSet"]["YX_QX"]and g["WR_SpellUsable"]("潜行")and g["WR_GetUnitBuffTime"]("player","潜行")==i("0")then if g["WR_ColorFrame_Show"]("ASF7","潜行")then return d end end;return c end;g["WR_DruidFeral_LBXT"]=function()if not g["CatForm"]and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("猎豹形态")then if g["WR_ColorFrame_Show"]("CF8","猎豹形态")then return d end end;return c end;g["WR_DruidFeral_MHZN"]=function()if g["zhandoumoshi"]==i("1")and g["TargetIsNearby"]and g["WR_SpellUsable"]("猛虎之怒")and(g["Energy"]<g["MaxEnergy"]-i("35")or g["ComboPoints"]==i("5")or g["ComboPoints"]>=i("3")and g["TargetGLDebuffTime"]<=i("5.7")and g["BuffCount_XXZJ"]>=i("1"))and(g["WR_GetGCD"]("狂暴")>i("20")or g["WR_GetGCD"]("狂暴")<g["GCD"])then if g["WR_ColorFrame_Show"]("SF5","猛虎之怒")then return d end end;return c end;g["WR_DruidFeral_JBFQ"]=function(j)if g["WR_SpellUsable"]("激变蜂群")then if j==e and g["GCD"]<=g["ShiFaSuDu"]and g["UnitAffectingCombat"]("player")and g["TargetInCombat"]and g["WR_GetUnitRange"]("target")<=i("20")then if j==e and(g["BuffCount_XXZJ"]>=i("1")or not g["IsPlayerSpell"](i("319439")))then if g["WR_ColorFrame_Show"]("CF12","蜂群T")then return d end end;if j=="目标"and(g["CombatTime"]<i("10")or g["BuffCount_XXZJ"]>=i("1")or not g["IsPlayerSpell"](i("319439")))then if g["WR_ColorFrame_Show"]("CF12","蜂群目标")then return d end end end;if j=="脱战"and g["WRSet"]["YX_YF"]and not g["UnitAffectingCombat"]("player")and g["IsPlayerSpell"](i("391951"))then local o=i("0")local p=f;local q=g["WR_GetUnitBuffCount"]("player","激变蜂群",d)if o<i("2")then if q<i("3")then o=q;p="player"end end;for k=i("1"),i("4"),i("1")do if o<i("2")then if g["WR_GetUnitRange"]("party"..k)<=i("20")then local q=g["WR_GetUnitBuffCount"]("party"..k,"激变蜂群",d)if q<i("3")and q>o then o=q;p="party"..k end end end end;if p=="player"then if g["WR_ColorFrame_Show"]("CSF8","蜂群P")then return d end elseif p=="party1"then if g["WR_ColorFrame_Show"]("CSF1","蜂群P1")then return d end elseif p=="party2"then if g["WR_ColorFrame_Show"]("CSF2","蜂群P2")then return d end elseif p=="party3"then if g["WR_ColorFrame_Show"]("CSF3","蜂群P3")then return d end elseif p=="party4"then if g["WR_ColorFrame_Show"]("CSF4","蜂群P4")then return d end end end end;return c end;g["WR_DruidFeral_SP"]=function(j)if j=="保命"then if g["WRSet"]["YX_SP1"]>=i("3")then if g["WR_ShiPin"](i("1"),g["WRSet"]["YX_SP1"])then return d end end;if g["WRSet"]["YX_SP2"]>=i("3")then if g["WR_ShiPin"](i("2"),g["WRSet"]["YX_SP2"])then return d end end elseif j=="常驻"then if g["WRSet"]["YX_SP1"]==i("1")then if g["WR_ShiPin"](i("1"),g["WRSet"]["YX_SP1"])then return d end end;if g["WRSet"]["YX_SP2"]==i("1")then if g["WR_ShiPin"](i("2"),g["WRSet"]["YX_SP2"])then return d end end elseif j=="爆发"then if g["WRSet"]["YX_SP1"]==i("2")then if g["WR_ShiPin"](i("1"),g["WRSet"]["YX_SP1"])then return d end end;if g["WRSet"]["YX_SP2"]==i("2")then if g["WR_ShiPin"](i("2"),g["WRSet"]["YX_SP2"])then return d end end end;return c end;g["WR_DruidFeral_KBHS"]=function()if g["CatForm"]and g["GCD"]<=g["ShiFaSuDu"]+i("0.2")and g["TargetInCombat"]and g["TargetIsNearby"]and g["zhandoumoshi"]==i("1")and(g["TargetGLDebuffTime"]>g["GCD"]or g["ComboPoints"]>=i("5"))and(g["IsPlayerSpell"](i("102543"))and g["WR_SpellUsable"]("化身：阿莎曼之灵")or not g["IsPlayerSpell"](i("102543"))and g["WR_SpellUsable"]("狂暴"))then if g["WR_DruidFeral_SP"]("爆发")then return d end;if g["WR_ColorFrame_Show"]("ASF8","狂暴化身")then return d end end;return c end;g["WR_DruidFeral_YXKL"]=function()if g["CatForm"]and g["TargetInCombat"]and g["TargetIsNearby"]and g["zhandoumoshi"]==i("1")and g["TargetGLDebuffTime"]>g["GCD"]and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("野性狂乱")and(g["ComboPoints"]<=i("1")or g["BuffTime_KB"]>g["GCD"]and g["ComboPoints"]<=i("2"))then if g["WR_ColorFrame_Show"]("SF7","野性狂乱")then return d end end;return c end;g["WR_DruidFeral_WLZZ"]=function()if g["CatForm"]and g["TargetInCombat"]and g["TargetIsNearby"]and g["zhandoumoshi"]==i("1")and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("万灵之召")and g["BuffTime_KB"]>g["GCD"]and(g["BuffTime_KB"]<=g["GCD"]+i("5")or g["BuffTime_MHZN"]<=g["GCD"]+i("5")and g["BuffTime_MHZN"]>g["GCD"]or g["TargetGLDebuffTime"]>g["GCD"]and g["BuffTime_MHZN"]>g["GCD"]and g["WR_GetSpellCharges"]("野蛮挥砍")==i("0")and g["Energy"]<i("40")and g["ComboPoints"]<i("5"))then if g["WR_ColorFrame_Show"]("CF6","万灵之召")then return d end end;return c end;g["WR_DruidFeral_LastSpellTime"]=function()if g["LastSpellIsOpen"]then return end;local r=g["CreateFrame"]("Frame")r["RegisterEvent"](r,"COMBAT_LOG_EVENT_UNFILTERED")r["SetScript"](r,"OnEvent",function()if g["select"](i("4"),g["CombatLogGetCurrentEventInfo"]())==g["UnitGUID"]("player")then if g["select"](i("2"),g["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local s=g["select"](i("13"),g["CombatLogGetCurrentEventInfo"]())if s=="斜掠"then g["XLTime"]=g["GetTime"]()g["LastSpell"]="斜掠"elseif s=="撕碎"then g["SSTime"]=g["GetTime"]()g["LastSpell"]="撕碎"elseif s=="野蛮挥砍"then g["YMHKTime"]=g["GetTime"]()g["LastSpell"]="野蛮挥砍"elseif s=="痛击"then g["TJTime"]=g["GetTime"]()g["LastSpell"]="痛击"elseif s=="野性狂乱"then g["YXKLTime"]=g["GetTime"]()g["LastSpell"]="野性狂乱"elseif s=="横扫"then g["HSTime"]=g["GetTime"]()g["LastSpell"]="横扫"elseif s=="月火术"then g["YHSTime"]=g["GetTime"]()g["LastSpell"]="月火术"elseif s=="凶猛撕咬"then g["LastSpell"]="凶猛撕咬"elseif s=="割裂"then g["LastSpell"]="割裂"elseif s=="原始之怒"then g["LastSpell"]="原始之怒"elseif s=="毁灭"then g["LastSpell"]="毁灭"elseif s=="狂暴回复"then g["CastTime_KBHF"]=g["GetTime"]()elseif s=="夺魂咆哮"then g["CastTime_DHPX"]=g["GetTime"]()end end end end)g["LastSpellIsOpen"]=d end end)()