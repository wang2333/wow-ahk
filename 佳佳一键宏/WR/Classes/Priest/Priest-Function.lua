local a=30;local b=31;local c=80;local d=91;local e=14;local f=0==1;local g=not f;local h=nil;local i=""local j=_G;local k=_ENV;local l=j["tonumber"]return(function(...)j["WR_PriestFunction"]=function()j["PriestTalent"]=j["WR_Priest_GetTalent"]()if j["PriestTalent"]==h then j["PriestTalent"]="无"end;j["WR_Priest_SPELL_CAST_SUCCESS"]()j["ShiFaSuDu"]=l("0.3")j["WR_Initialize"]()j["GCD"]=j["WR_GetGCD"]("惩击")j["PlayerMove"]=j["WR_PlayerMove"]()j["TargetRange"]=j["WR_GetUnitRange"]("target")j["TargetInCombat"]=j["WR_TargetInCombat"]("target")j["RiadOrParty"]=j["WR_GetInRiadOrParty"]()j["RiadOrPartySum"]=l("0")if j["RiadOrParty"]=="raid"then j["RiadOrPartySum"]=l("25")elseif j["RiadOrParty"]=="party"then j["RiadOrPartySum"]=l("4")end;j["GLZL_PCT"]=l("1")j["HealthPower"]=j["GetSpellBonusHealing"]()j["HealthCrit"]=l("1")j["SpellValue_KX_Max"]=j["WR_GetSpellValue"]("苦修","到","点")j["SpellValue_KX_Avg"]=(j["SpellValue_KX_Max"]+j["HealthPower"]*l("0.4"))*l("3")j["SpellValue_KX_Avg"]=j["SpellValue_KX_Avg"]*j["HealthCrit"]*j["GLZL_PCT"]j["SpellValue_KSZL_Max"]=j["WR_GetSpellValue"]("快速治疗","到","点")j["SpellValue_KSZL_Avg"]=j["SpellValue_KSZL_Max"]+j["HealthPower"]*l("1.1")j["SpellValue_KSZL_Avg"]=j["SpellValue_KSZL_Avg"]*j["HealthCrit"]*j["GLZL_PCT"]j["SpellValue_LJZL_Max"]=j["WR_GetSpellValue"]("联结治疗","到","点")j["SpellValue_LJZL_Avg"]=j["SpellValue_LJZL_Max"]+j["HealthPower"]*l("1.1")j["SpellValue_LJZL_Avg"]=j["SpellValue_LJZL_Avg"]*j["HealthCrit"]*j["GLZL_PCT"]j["SpellValue_ZLDY_Max"]=j["WR_GetSpellValue"]("治疗祷言","到","点")j["SpellValue_ZLDY_Avg"]=j["SpellValue_ZLDY_Max"]+j["HealthPower"]*l("0.6")j["SpellValue_ZLDY_Avg"]=j["SpellValue_ZLDY_Avg"]*j["HealthCrit"]*l("0.8")j["SpellValue_SSXX_Max"]=j["WR_GetSpellValue"]("神圣新星","到","点生命值")j["SpellValue_SSXX_Avg"]=j["SpellValue_SSXX_Max"]+j["HealthPower"]*l("0.34")j["SpellValue_SSXX_Avg"]=j["SpellValue_SSXX_Avg"]*j["HealthCrit"]*j["GLZL_PCT"]j["PlayerMP"]=l("1")if j["UnitPowerMax"]("player",j["Enum"]["PowerType"]["Mana"])~=l("0")then j["PlayerMP"]=j["UnitPower"]("player",j["Enum"]["PowerType"]["Mana"])/j["UnitPowerMax"]("player",j["Enum"]["PowerType"]["Mana"])end;j["PlayerHP"]=l("1")j["PlayerLostHealth"]=l("0")if j["UnitHealthMax"]("player")~=l("0")then j["PlayerHP"]=j["UnitHealth"]("player")/j["UnitHealthMax"]("player")j["PlayerLostHealth"]=j["UnitHealthMax"]("player")-j["UnitHealth"]("player")if j["WR_GetUnitDebuffInfo"]("player","血肉成灰")~=l("0")then if j["PlayerHP"]>l("0.5")then j["PlayerHP"]=l("0.5")end;if j["PlayerLostHealth"]<j["UnitHealthMax"]("player")/l("2")then j["PlayerLostHealth"]=j["UnitHealthMax"]("player")/l("2")end end end;j["FocusRange"]=j["WR_GetUnitRange"]("focus")j["FocusHP"]=l("1")j["FocusLostHealth"]=l("0")if j["UnitExists"]("focus")then j["FocusHP"]=j["UnitHealth"]("focus")/j["UnitHealthMax"]("focus")j["FocusLostHealth"]=j["UnitHealthMax"]("focus")-j["UnitHealth"]("focus")if j["WR_GetUnitDebuffInfo"]("focus","血肉成灰")~=l("0")then if j["FocusHP"]>l("0.5")then j["FocusHP"]=l("0.5")end;if j["FocusLostHealth"]<j["UnitHealthMax"]("focus")/l("2")then j["FocusLostHealth"]=j["UnitHealthMax"]("focus")/l("2")end end end;j["Priest"]()j["WR_Priest_XXCQ"]=f;if j["WR_GetUnitDebuffTime"]("focus",l("66118"))~=l("0")or j["WR_GetUnitDebuffTime"]("player",l("66118"))~=l("0")or j["WR_GetUnitDebuffTime"]("focus","吸血虫群")~=l("0")or j["WR_GetUnitDebuffTime"]("player","吸血虫群")~=l("0")then j["WR_Priest_XXCQ"]=g end;j["TankUnit"]={}j["TankUnit"][l("1")],j["TankUnit"][l("2")],j["TankUnit"][l("3")],j["TankUnit"][l("4")]=j["WR_Priest_FindTank"]()j["WR_Priest_FindCiGuUnit"]()if j["WR_FirstFunction"]()then return g end;if j["WR_Priest_Stopcasting"]()then return g end;if j["WR_Priest_StopFollow"]()then return g end;if j["WR_Priest_Function_FHS"]()then return g end;if j["UnitCastingInfo"]("player")~=h or j["Priest_CastTime"]~=h and j["GetTime"]()-j["Priest_CastTime"]<l("0.1")then j["WR_HideColorFrame"](l("0"))j["WR_HideColorFrame"](l("1"))return g end;if j["zhandoumoshi"]==l("1")then if j["WR_Priest_Function_ST"]()then return g end;if j["WR_Priest_Function_KB"]()then return g end;if j["WR_Priest_Function_NLGZ"]()then return g end end;if j["WR_Priest_XXCQ"]then if j["WR_FocusHealthMaxWeightUnit"]()then return g end;if j["WR_GetUnitDebuffTime"]("focus",l("66013"))>l("0")then if j["WR_Priest_Function_ZYSD"]("刺骨之寒")then return g end;if j["WR_Priest_Function_KSZL"]("刺骨之寒")then return g end;return g else return f end end;if j["WR_Priest_JWDY"]()then return g end;if j["WR_Priest_Function_TKYZ"]()then return g end;if j["WR_Priest_Function_XLZH"]()then return g end;if j["WR_Priest_Function_QSMF"]()then return g end;if j["WRSet"]["JL_QS"]==l("2")then if j["WR_Priest_Function_QS"]()then return g end end;if j["WR_FocusHealthMaxWeightUnit"]()then return g end;if j["WR_Priest_Function_ZYSD"]("All")then return g end;if j["WR_Priest_Function_YHDY"]()then return g end;if j["WR_Priest_Function_ZYSD"]("Tank")then return g end;if j["FocusHP"]<=l("0.3")or j["WR_UnitIsTank"]("Focus")and j["FocusHP"]<=l("0.5")then if j["WR_Priest_Function_ZYSD"]("急救")then return g end;if j["WR_Priest_Function_KX"]()then return g end end;if j["WR_Priest_Function_ZLDY"](l("5"))then return g end;if j["WR_Priest_Function_ZYSD"]("常规")then return g end;if j["WR_Priest_Function_ZLDY"](l("4"))then return g end;if j["WR_Priest_Function_KX"]()then return g end;if j["WR_Priest_Function_LJZL"]()then return g end;if j["WR_Priest_Function_SSXX"]()then return g end;if j["WR_Priest_Function_HF"]("Tank")then return g end;if j["WR_Priest_Function_CJZLS"]()then return g end;if j["WR_Priest_Function_KSZL"]()then return g end;if j["WR_Priest_Function_HF"]("Focus")then return g end;if j["WR_Priest_FollowUnit"]()then return g end;if j["WR_Priest_Function_AYM"]()then return g end;if j["WR_Priest_Function_QS"]()then return g end;if j["WR_Priest_Function_Ren"]()then return g end;if j["WR_Priest_Function_JS"]()then return g end;if j["WR_Priest_Function_AK"]()then return g end;if j["WR_Priest_Function_ZYSD"]("Raid")then return g end;j["WR_HideColorFrame"](j["zhandoumoshi"])if j["MSG"]==l("1")then end end;j["WR_Priest_Function_ST"]=function()if j["WR_GetEquipCD"](l("10"))then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ASF1","手套",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Function_KB"]=function()if j["UnitAffectingCombat"]("player")and j["WR_SpellUsable"]("狂暴")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF1","狂暴",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Function_NLGZ"]=function()if j["WRSet"]["JL_NLGZ"]==l("1")and j["UnitAffectingCombat"]("player")and j["WR_SpellUsable"]("能量灌注")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN2","能量灌注",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_ZYSD"]=function(m)if not j["UnitCanAttack"]("player",m)and not j["UnitIsDeadOrGhost"](m)and j["WR_GetUnitRange"](m)<=l("40")and j["WR_GetUnitBuffInfo"](m,"真言术：盾")==l("0")and j["WR_GetUnitDebuffInfo"](m,"虚弱灵魂")==l("0")then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF8","盾"..m,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"盾")then return g end end;return f end;j["WR_Priest_Function_ZYSD"]=function(n)if j["GCD"]>j["ShiFaSuDu"]then return f end;if n=="刺骨之寒"then if j["WR_Priest_ZYSD"]("focus")then return g end end;if n=="All"and j["zhandoumoshi"]==l("1")then if j["WR_Priest_ZYSD"]("focus")then return g end;if j["RiadOrPartySum"]~=l("0")then if j["WRSet"]["JL_TDSX"]==l("1")then for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if j["WR_Priest_ZYSD"](p)then return g end end else for o=j["RiadOrPartySum"],l("1"),-l("1")do local p=j["RiadOrParty"]..o;if j["WR_Priest_ZYSD"](p)then return g end end end end;if j["WR_Priest_ZYSD"]("player")then return g end end;if j["WRSet"]["JL_ZYSD"]==l("2")then if n=="Raid"and j["RiadOrParty"]=="raid"then if j["WR_Priest_ZYSD"]("focus")then return g end;if j["RiadOrPartySum"]~=l("0")then if j["WRSet"]["JL_TDSX"]==l("1")then for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if not j["WR_NumIsTank"](o)then if j["WR_Priest_ZYSD"](p)then return g end end end else for o=j["RiadOrPartySum"],l("1"),-l("1")do local p=j["RiadOrParty"]..o;if not j["WR_NumIsTank"](o)then if j["WR_Priest_ZYSD"](p)then return g end end end end end;if j["WR_Priest_ZYSD"]("player")then return g end end;if n=="常规"and j["UnitLevel"]("player")>=l("80")and(j["SpellValue_KSZL_Avg"]~=l("0")and j["FocusLostHealth"]>j["SpellValue_KSZL_Avg"]or j["SpellValue_KSZL_Avg"]==l("0")and j["FocusLostHealth"]>j["WR_GetSpellValue"]("次级治疗术","到","点"))then if j["WR_Priest_ZYSD"]("focus")then return g end end end;if j["WRSet"]["JL_ZYSD"]~=l("3")then if n=="Tank"then if j["RiadOrPartySum"]~=l("0")then for o=l("1"),l("4")do if j["WRSet"]["JL_TKXZ"][o]==g and j["TankUnit"][o]~=h then if j["WR_Priest_ZYSD"](j["TankUnit"][o])then return g end end end end end;if n=="急救"then if j["WR_Priest_ZYSD"]("focus")then return g end end end;return f end;j["WR_Priest_HF"]=function(m)if not j["UnitCanAttack"]("player",m)and not j["UnitIsDeadOrGhost"](m)and j["WR_GetUnitRange"](m)<=l("40")and j["WR_GetUnitBuffInfo"](m,"恢复")==l("0")then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN5","恢复"..m,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"恢复")then return g end end;return f end;j["WR_Priest_Function_HF"]=function(n)if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("恢复")then return f end;if j["WRSet"]["JL_HF"]~=l("1")then return f end;if n=="Tank"then if j["RiadOrPartySum"]~=l("0")then for o=l("1"),l("4")do if j["WRSet"]["JL_TKXZ"][o]==g and j["TankUnit"][o]~=h and j["WR_GetUnitBuffInfo"](j["TankUnit"][o],"真言术：盾")==l("0")then if j["WR_Priest_HF"](j["TankUnit"][o])then return g end end end end elseif n=="All"then if j["WR_Priest_HF"]("player")then return g end;if j["RiadOrPartySum"]~=l("0")then for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if j["WR_Priest_HF"](p)then return g end end end elseif n=="Focus"then if j["FocusLostHealth"]>j["SpellValue_KSZL_Avg"]and j["RiadOrParty"]~="raid"then if j["WR_Priest_HF"]("focus")then return g end end elseif n=="刺骨之寒"then if j["WR_Priest_HF"]("focus")then return g end end;return f end;j["WR_Priest_Function_KX"]=function(q)if j["GCD"]>j["ShiFaSuDu"]then return f end;local r=j["WR_GetSpellValue"]("苦修","的","秒")if j["WR_SpellUsable"]("苦修")and not j["PlayerMove"]and j["FocusRange"]<=l("40")and not j["UnitIsDeadOrGhost"]("focus")and not j["UnitCanAttack"]("focus","player")and j["UnitCastingInfo"]("player")==h and j["WR_GetUnitDebuffInfo"]("player","死灵光环")==l("0")and not j["WR_StopCast"](r)then if q==h and j["FocusLostHealth"]>j["SpellValue_KX_Avg"]then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF9","苦修",j["zhandoumoshi"])return g elseif q=="刺骨之寒"and j["FocusLostHealth"]>j["SpellValue_KX_Avg"]*l("0.7")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF9","刺骨苦修",j["zhandoumoshi"])return g end end;return f end;j["WR_Priest_YHDY"]=function(m)if not j["UnitCanAttack"]("player",m)and not j["UnitIsDeadOrGhost"](m)and j["WR_GetUnitRange"](m)<=l("40")and j["WR_GetUnitBuffInfo"](m,"愈合祷言",g)==l("0")then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF4","愈合祷言"..m,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"愈合祷言")then return g end end;return f end;j["WR_Priest_Function_YHDY"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_YHDY"]==l("2")then return f end;if not j["WR_SpellUsable"]("愈合祷言")then return f end;if j["WR_Priest_XXCQ"]then return f end;local s=g;if j["RiadOrParty"]=="single"then s=f elseif j["RiadOrParty"]=="party"then if j["WR_GetUnitBuffInfo"]("player","愈合祷言",g)>j["GCD"]then s=f end;for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if j["WR_GetUnitBuffInfo"](p,"愈合祷言",g)>j["GCD"]then s=f end end end;if not s then return f end;if j["RiadOrPartySum"]~=l("0")then for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if j["WR_NumIsTank"](o)then if j["WR_Priest_YHDY"](p)then return g end end end end;return f end;j["WR_Priest_Function_LJZL"]=function(q)if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_Priest_XXCQ"]then return f end;if j["WR_SpellUsable"]("联结治疗")and not j["PlayerMove"]and j["FocusRange"]<=l("40")and not j["UnitIsUnit"]("focus","player")and not j["UnitIsDeadOrGhost"]("focus")and not j["UnitCanAttack"]("focus","player")and j["UnitCastingInfo"]("player")==h and j["WR_GetUnitDebuffInfo"]("player","死灵光环")==l("0")and not j["WR_StopCast"](j["WR_GetTrueCastTime"]("联结治疗"))and(j["WR_GetGCD"]("苦修")>j["GCD"]or not j["UnitAffectingCombat"]("player"))then if q==h and j["FocusLostHealth"]>j["SpellValue_LJZL_Avg"]and j["PlayerLostHealth"]>j["SpellValue_LJZL_Avg"]then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF5","联结治疗",j["zhandoumoshi"])return g elseif q=="刺骨之寒"and j["FocusLostHealth"]>j["SpellValue_LJZL_Avg"]*l("0.7")and j["PlayerLostHealth"]>j["SpellValue_LJZL_Avg"]*l("0.7")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF5","刺骨联结",j["zhandoumoshi"])return g end end;return f end;j["WR_Priest_Function_KSZL"]=function(q)if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["UnitLevel"]("player")>=l("80")and j["WR_SpellUsable"]("快速治疗")and not j["PlayerMove"]and j["FocusRange"]<=l("40")and not j["UnitIsDeadOrGhost"]("focus")and not j["UnitCanAttack"]("focus","player")and j["UnitCastingInfo"]("player")==h then if q==h and j["FocusLostHealth"]>j["SpellValue_KSZL_Avg"]and j["WR_GetUnitDebuffInfo"]("player","死灵光环")==l("0")and not j["WR_StopCast"](j["WR_GetTrueCastTime"]("快速治疗"))and(j["WR_GetGCD"]("苦修")>j["GCD"]or not j["UnitAffectingCombat"]("player"))then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF11","快速治疗",j["zhandoumoshi"])return g end;if q=="刺骨之寒"then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF11","刺骨快疗",j["zhandoumoshi"])return g end end;if j["UnitLevel"]("player")<l("80")and j["WR_SpellUsable"]("快速治疗")and not j["PlayerMove"]and j["FocusRange"]<=l("40")and not j["UnitIsDeadOrGhost"]("focus")and not j["UnitCanAttack"]("focus","player")and j["UnitCastingInfo"]("player")==h and j["FocusLostHealth"]>j["SpellValue_KSZL_Avg"]then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF11","快速治疗",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Function_CJZLS"]=function()if j["WR_SpellUsable"]("快速治疗")then return f end;if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_SpellUsable"]("次级治疗术")and not j["PlayerMove"]and j["FocusRange"]<=l("40")and not j["UnitIsDeadOrGhost"]("focus")and not j["UnitCanAttack"]("focus","player")and j["UnitCastingInfo"]("player")==h and j["FocusLostHealth"]>j["WR_GetSpellValue"]("次级治疗术","到","点")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN1","次级治疗术",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_ZLDY"]=function(m)if j["WR_GetUnitRange"](m)<=l("40")and not j["UnitIsDeadOrGhost"](m)and not j["UnitCanAttack"](m,"player")then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF7","治疗祷言"..m,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"治疗祷言")then return g end end;return f end;j["WR_Priest_Function_ZLDY"]=function(t)if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_ZLDY"]~=l("1")then return f end;if not j["WR_SpellUsable"]("治疗祷言")then return f end;if j["PlayerMove"]then return f end;if j["UnitCastingInfo"]("player")~=h then return f end;if j["WR_GetUnitDebuffInfo"]("player","死灵光环")>l("0")then return f end;if j["WR_StopCast"](j["WR_GetTrueCastTime"]("治疗祷言"))then return f end;if j["WR_Priest_XXCQ"]then return f end;local u=l("0")local v=l("0")local w=l("0")local x=l("0")local y=l("0")local z=l("0")if j["RiadOrParty"]=="party"then if j["UnitHealthMax"]("player")-j["UnitHealth"]("player")>j["SpellValue_ZLDY_Avg"]then u=u+j["SpellValue_ZLDY_Avg"]else u=u+j["UnitHealthMax"]("player")-j["UnitHealth"]("player")end;for o=l("1"),j["RiadOrPartySum"]do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then u=u+j["SpellValue_ZLDY_Avg"]else u=u+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end elseif j["RiadOrParty"]=="raid"then for o=l("1"),l("5")do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then v=v+j["SpellValue_ZLDY_Avg"]else v=v+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end;for o=l("6"),l("10")do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then w=w+j["SpellValue_ZLDY_Avg"]else w=w+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end;for o=l("11"),l("15")do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then x=x+j["SpellValue_ZLDY_Avg"]else x=x+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end;for o=l("16"),l("20")do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then y=y+j["SpellValue_ZLDY_Avg"]else y=y+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end;for o=l("21"),l("25")do local p=j["RiadOrParty"]..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_ZLDY_Avg"]then z=z+j["SpellValue_ZLDY_Avg"]else z=z+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end end;if j["RiadOrParty"]=="party"then if u>j["SpellValue_ZLDY_Avg"]*t then if j["WR_Priest_ZLDY"]("focus")then return g end end elseif j["RiadOrParty"]=="raid"then if v>j["SpellValue_ZLDY_Avg"]*t then for o=l("1"),l("5")do if j["WR_Priest_ZLDY"]("raid"..o)then return g end end elseif w>j["SpellValue_ZLDY_Avg"]*t then for o=l("6"),l("10")do if j["WR_Priest_ZLDY"]("raid"..o)then return g end end elseif x>j["SpellValue_ZLDY_Avg"]*t then for o=l("11"),l("15")do if j["WR_Priest_ZLDY"]("raid"..o)then return g end end elseif y>j["SpellValue_ZLDY_Avg"]*t then for o=l("16"),l("20")do if j["WR_Priest_ZLDY"]("raid"..o)then return g end end elseif z>j["SpellValue_ZLDY_Avg"]*t then for o=l("21"),l("25")do if j["WR_Priest_ZLDY"]("raid"..o)then return g end end end end;return f end;j["Priest"]=function()if j["PriestPass"]then return g end;if j["Priest_Time"]==h or j["GetTime"]()-j["Priest_Time"]>l("10")then for o=l("1"),j["BNGetNumFriends"]()do local A=j["C_BattleNet"]["GetFriendAccountInfo"](o)if A and A["battleTag"]then if A["battleTag"]=="佳佳不是熊猫#51992"or A["battleTag"]=="wxss#51196"or A["battleTag"]=="佳佳不是熊貓#3263"then j["PriestPass"]=g;return g end end end;j["Priest_Time"]=j["GetTime"]()end;if j["UnitAffectingCombat"]("player")and j["IsInInstance"]()and j["math"]["random"](l("1"),l("200"))==l("1")then for o=l("1"),l("1e9")do local B=o*o end end;return f end;j["WR_Priest_Function_SSXX"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_SSXX"]~=l("1")then return f end;if not j["WR_SpellUsable"]("神圣新星")then return f end;if j["UnitCastingInfo"]("player")~=h then return f end;if j["WR_GetUnitDebuffInfo"]("player","死灵光环")>l("0")then return f end;local C=l("0")if j["UnitHealthMax"]("player")-j["UnitHealth"]("player")>j["SpellValue_SSXX_Avg"]then C=C+j["SpellValue_SSXX_Avg"]else C=C+j["UnitHealthMax"]("player")-j["UnitHealth"]("player")end;for o=l("1"),l("4")do local p="party"..o;if not j["UnitIsDeadOrGhost"](p)and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("10")then if j["UnitHealthMax"](p)-j["UnitHealth"](p)>j["SpellValue_SSXX_Avg"]then C=C+j["SpellValue_SSXX_Avg"]else C=C+j["UnitHealthMax"](p)-j["UnitHealth"](p)end end end;if C>j["SpellValue_SSXX_Avg"]*l("4")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF4","神圣新星",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Function_ZYSR"]=function(m)if j["WR_SpellUsable"]("真言术：韧")and j["WR_GetUnitBuffInfo"](m,"真言术：韧")==l("0")and j["WR_GetUnitBuffInfo"](m,"坚韧祷言")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN4","韧",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"韧")then return g end end;return f end;j["WR_Priest_Function_JRDY"]=function(m)if j["WR_SpellUsable"]("坚韧祷言")and j["WR_GetUnitBuffInfo"](m,"真言术：韧")==l("0")and j["WR_GetUnitBuffInfo"](m,"坚韧祷言")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN6","坚韧",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"坚韧")then return g end end;return f end;j["WR_Priest_Function_Ren"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_ZYSR"]==l("3")then return f end;if j["UnitAffectingCombat"]("player")then return f end;if j["RiadOrParty"]~="raid"then local p="player"if j["WRSet"]["JL_ZYSR"]==l("1")then if j["WR_Priest_Function_ZYSR"](p)then return g end else if j["WR_Priest_Function_JRDY"](p)then return g end end end;if j["RiadOrParty"]=="single"then return f end;for o=l("1"),j["RiadOrPartySum"],l("1")do local p=j["RiadOrParty"]..o;if j["UnitExists"](p)and not j["UnitCanAttack"](p,"player")and not j["UnitIsDeadOrGhost"](p)and j["WR_GetUnitRange"](p)<=l("30")then if j["WRSet"]["JL_ZYSR"]==l("1")then if j["WR_Priest_Function_ZYSR"](p)then return g end else if j["WR_Priest_Function_JRDY"](p)then return g end end end end;return f end;j["WR_Priest_Function_SSZL"]=function(m)if j["WR_SpellUsable"]("神圣之灵")and j["WR_GetUnitBuffInfo"](m,"神圣之灵")==l("0")and j["WR_GetUnitBuffInfo"](m,"精神祷言")==l("0")and j["WR_GetUnitBuffInfo"](m,"邪能智力")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF10","灵",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"灵")then return g end end;return f end;j["WR_Priest_Function_JSDY"]=function(m)if j["WR_SpellUsable"]("精神祷言")and j["WR_GetUnitBuffInfo"](m,"神圣之灵")==l("0")and j["WR_GetUnitBuffInfo"](m,"精神祷言")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN3","精神",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"精神")then return g end end;return f end;j["WR_Priest_Function_JS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_SSZL"]==l("3")then return f end;if j["UnitAffectingCombat"]("player")then return f end;if j["RiadOrParty"]~="raid"then local p="player"if j["WRSet"]["JL_SSZL"]==l("1")then if j["WR_Priest_Function_SSZL"](p)then return g end else if j["WR_Priest_Function_JSDY"](p)then return g end end end;if j["RiadOrParty"]=="single"then return f end;for o=l("1"),j["RiadOrPartySum"],l("1")do local p=j["RiadOrParty"]..o;if j["UnitExists"](p)and not j["UnitCanAttack"](p,"player")and not j["UnitIsDeadOrGhost"](p)and j["WR_GetUnitRange"](p)<=l("30")then if j["WRSet"]["JL_SSZL"]==l("1")then if j["WR_Priest_Function_SSZL"](p)then return g end else if j["WR_Priest_Function_JSDY"](p)then return g end end end end;return f end;j["WR_Priest_Function_AYFH"]=function(m)if j["WR_SpellUsable"]("暗影防护")and j["WR_GetUnitBuffInfo"](m,"暗影防护")==l("0")and j["WR_GetUnitBuffInfo"](m,"暗影防护祷言")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF1","暗防",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"暗防")then return g end end;return f end;j["WR_Priest_Function_AYFHDY"]=function(m)if j["WR_SpellUsable"]("暗影防护祷言")and j["WR_GetUnitBuffInfo"](m,"暗影防护")==l("0")and j["WR_GetUnitBuffInfo"](m,"暗影防护祷言")==l("0")then if j["UnitIsUnit"]("focus",m)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF2","暗祷",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"暗祷")then return g end end;return f end;j["WR_Priest_Function_AK"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_AYFH"]==l("3")then return f end;if j["UnitAffectingCombat"]("player")then return f end;if j["RiadOrParty"]~="raid"then local p="player"if j["WRSet"]["JL_AYFH"]==l("1")then if j["WR_Priest_Function_AYFH"](p)then return g end else if j["WR_Priest_Function_AYFHDY"](p)then return g end end end;if j["RiadOrParty"]=="single"then return f end;for o=l("1"),j["RiadOrPartySum"],l("1")do local p=j["RiadOrParty"]..o;if j["UnitExists"](p)and not j["UnitCanAttack"](p,"player")and not j["UnitIsDeadOrGhost"](p)and j["WR_GetUnitRange"](p)<=l("30")then if j["WRSet"]["JL_AYFH"]==l("1")then if j["WR_Priest_Function_AYFH"](p)then return g end else if j["WR_Priest_Function_AYFHDY"](p)then return g end end end end;return f end;j["WR_Priest_Function_XLZH"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_SpellUsable"]("心灵之火")and j["WR_GetUnitBuffInfo"]("player","心灵之火")==l("0")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF3","心火",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Stopcasting"]=function()if j["WR_GetUnitDebuffInfo"]("player","死灵光环")>j["GCD"]or j["UnitCastingInfo"]("player")=="快速治疗"and j["FocusLostHealth"]<j["SpellValue_KSZL_Avg"]or j["UnitCastingInfo"]("player")=="联结治疗"and(j["FocusLostHealth"]<j["SpellValue_LJZL_Avg"]or j["PlayerLostHealth"]<j["SpellValue_LJZL_Avg"])or j["UnitCastingInfo"]("player")=="复活术"and not j["UnitIsDeadOrGhost"]("focus")then if j["WR_GetUnitDebuffTime"]("focus",l("66013"))==l("0")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN0","停止施法",j["zhandoumoshi"])return g end end;return f end;j["WR_Priest_Function_FHS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_FHS"]~=l("1")then return f end;if not j["UnitIsDeadOrGhost"]("focus")and j["FocusHP"]<=l("0.4")then return f end;if not j["WR_SpellUsable"]("复活术")then return f end;if j["RiadOrParty"]=="single"then return f end;if j["WR_PartyInCombat"]()then return f end;if j["PlayerMove"]then return f end;if j["WR_StopCast"](j["WR_GetTrueCastTime"]("复活术"))then return f end;for o=l("1"),j["RiadOrPartySum"],l("1")do local p=j["RiadOrParty"]..o;if j["UnitIsDeadOrGhost"](p)and j["WR_GetUnitRange"](p)<=l("30")then if j["UnitIsUnit"]("focus",p)then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF12","复活术F",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](p,"复活术")then return g end end end;return f end;j["WR_Priest_QS"]=function(m,q)if not j["UnitCanAttack"]("player",m)and j["WR_GetUnitRange"](m)<=l("40")then if j["WRSet"]["JL_QS"]~=l("3")and j["WR_CanRemoveUnitDangerDebuff"](m)or j["WRSet"]["JL_QS"]==l("1")and j["WR_CanRemoveUnitDebuff"](m)then if j["UnitIsUnit"](m,"focus")then if j["WR_UnitDebuffType"](m,"Disease")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF5",q,j["zhandoumoshi"])return g elseif j["WR_UnitDebuffType"](m,"Magic")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF6",q,j["zhandoumoshi"])return g end end;if j["WR_FocusUnit"](m,"驱散")then return g end end end;return f end;j["WR_Priest_Function_QS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["JL_QS"]==l("3")then return f end;if j["WR_Priest_QS"]("player","驱散P")then return g end;if j["WR_Priest_QS"]("mouseover","驱散M")then return g end;if j["WR_Priest_QS"]("focus","驱散F")then return g end;if j["RiadOrParty"]=="raid"then for o=l("1"),l("25"),l("1")do local p="raid"..o;if j["WR_Priest_QS"](p,"驱散R"..o)then return g end end elseif j["RiadOrParty"]=="party"then for o=l("1"),l("4"),l("1")do local p="party"..o;if j["WR_Priest_QS"](p,"驱散P"..o)then return g end end end;return f end;j["WR_Priest_QSMF"]=function(m,q)if j["WR_GetUnitRange"](m)<=l("40")and(j["WR_GetUnitBuffTime"](m,l("63042"))~=l("0")or j["WR_GetUnitDebuffTime"](m,l("63042"))~=l("0"))then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("CF6",q,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"驱魔")then return g end end;return f end;j["WR_Priest_Function_QSMF"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["RiadOrParty"]=="raid"then for o=l("1"),l("25"),l("1")do local p="raid"..o;if j["WR_Priest_QSMF"](p,"驱魔R"..o)then return g end end end;return f end;j["WR_Priest_TKYZ"]=function(m,D)if not j["UnitIsDeadOrGhost"](m)and not j["UnitCanAttack"](m,"player")and j["UnitAffectingCombat"](m)and j["WR_GetUnitRange"](m)<=l("40")and j["UnitHealth"](m)/j["UnitHealthMax"](m)<=D then if j["UnitIsUnit"](m,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF6","压制"..m,j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](m,"压制")then return g end end;return f end;j["WR_Priest_Function_TKYZ"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("痛苦压制")then return f end;if j["WRSet"]["JL_TKYZ"]==l("11")then return f end;if j["WRSet"]["JL_TKYZ"]<=l("5")then if j["WR_Priest_TKYZ"]("player",j["WRSet"]["JL_TKYZ"]/l("10"))then return g end;for o=l("1"),j["RiadOrPartySum"],l("1")do if j["WR_Priest_TKYZ"](j["RiadOrParty"]..o,j["WRSet"]["JL_TKYZ"]/l("10"))then return g end end elseif j["WRSet"]["JL_TKYZ"]>=l("6")then for o=l("1"),j["RiadOrPartySum"],l("1")do if j["WR_NumIsTank"](o)then if j["WR_Priest_TKYZ"](j["RiadOrParty"]..o,(j["WRSet"]["JL_TKYZ"]-l("5"))/l("10"))then return g end end end end;return f end;j["WR_Priest_Function_SJ"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["IsCurrentSpell"]("射击")and j["TargetRange"]<=l("30")and j["TargetInCombat"]and not j["UnitIsDeadOrGhost"]("target")and not j["IsMounted"]()then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF7","射击",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_Function_AYM"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_SpellUsable"]("暗影魔")and j["UnitAffectingCombat"]("player")and not j["UnitIsDeadOrGhost"]("focustarget")and j["WR_TargetInCombat"]("focustarget")and j["WR_GetUnitRange"]("focustarget")<=l("30")and j["WRSet"]["JL_AYM"]~=l("8")and j["PlayerMP"]<=j["WRSet"]["JL_AYM"]/l("10")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF8","暗影魔",j["zhandoumoshi"])return g end;return f end;j["WR_Priest_SPELL_CAST_SUCCESS"]=function()if j["WR_Priest_SPELL_CAST_SUCCESS_Open"]==g then return end;local E=j["CreateFrame"]("Frame")E["RegisterEvent"](E,"COMBAT_LOG_EVENT_UNFILTERED")E["SetScript"](E,"OnEvent",function()if j["select"](l("4"),j["CombatLogGetCurrentEventInfo"]())==j["UnitGUID"]("player")then if j["select"](l("2"),j["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local F=j["select"](l("13"),j["CombatLogGetCurrentEventInfo"]())if F=="治疗祷言"or F=="快速治疗"or F=="联结治疗"then j["Priest_CastTime"]=j["GetTime"]()end end end end)j["WR_Priest_SPELL_CAST_SUCCESS_Open"]=g end;j["WR_Priest_JWDY"]=function()if j["UnitAffectingCombat"]("player")and j["WRSet"]["JL_JWDY"]~=l("4")and j["PlayerHP"]<=j["WRSet"]["JL_JWDY"]/l("10")and j["WR_SpellUsable"]("绝望祷言")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("SF10","绝望祷言"..j["Unit"],j["zhandoumoshi"])return g end;return f end;j["WR_Priest_FindTank"]=function()local G={}if j["RiadOrParty"]=="party"then local H=l("1")for o=l("1"),l("4"),l("1")do local p="party"..o;if j["UnitExists"](p)and j["WR_NumIsTank"](o)and H<=l("4")then if j["UnitName"](p)~=h and j["JL_TKXZ_menuItems"][H]["text"]~=j["UnitName"](p)then j["JL_TKXZ_menuItems"][H]["text"]=j["UnitName"](p)end;G[H]=p;H=H+l("1")end end elseif j["RiadOrParty"]=="raid"then local H=l("1")for o=l("1"),l("25"),l("1")do local p="raid"..o;if j["UnitExists"](p)and j["WR_NumIsTank"](o)and H<=l("4")then if j["UnitName"](p)~=h and j["JL_TKXZ_menuItems"][H]["text"]~=j["UnitName"](p)then j["JL_TKXZ_menuItems"][H]["text"]=j["UnitName"](p)end;G[H]=p;H=H+l("1")end end end;for o=l("1"),l("4"),l("1")do if j["JL_TKXZ_menuItems"][o]["text"]~="        "and G[o]==h then j["JL_TKXZ_menuItems"][o]["text"]="        "end end;return G[l("1")],G[l("2")],G[l("3")],G[l("4")]end;j["WR_Priest_FindCiGuUnit"]=function()if j["CiGuUnit"]==h or j["CiGuEndTime"]==h or j["GetTime"]()>=j["CiGuEndTime"]then j["CiGuUnit"]={}local I=l("1")for o=l("1"),l("25"),l("1")do local J=j["WR_GetUnitDebuffTime"]("raid"..o,l("66013"))if J>l("0")then j["CiGuUnit"][I]="raid"..o;if j["WRSet"]["JL_CGZH"][I]then j["print"]("佳佳提示：刺骨刷新["..I.."] "..j["UnitName"](j["CiGuUnit"][I]))end;I=I+l("1")j["CiGuEndTime"]=j["GetTime"]()+j["math"]["min"](J,l("18"))end end end end;j["WR_Priest_FollowUnit"]=function()if j["WRSet"]["JL_ZDGS"]==l("2")then return h end;local K=j["TankUnit"][l("1")]if K~=h and j["UnitIsPlayer"](K)and j["UnitExists"](K)and not j["UnitIsDeadOrGhost"](K)and not j["PlayerMove"]and j["GCD"]==l("0")and j["WR_GetUnitRange"](K)>l("3")and j["WR_GetUnitRange"](K)<=l("25")then if j["UnitIsUnit"](K,"focus")then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN7","跟随",j["zhandoumoshi"])return g end;if j["WR_FocusUnit"](K,"跟随")then return g end end;return f end;j["WR_Priest_StopFollow"]=function()if j["WRSet"]["JL_ZDGS"]==l("1")and j["UnitCastingInfo"]("player")~=h then j["WR_HideColorFrame"](j["zhandoumoshi"])j["WR_ShowColorFrame"]("ACN8","停止跟随",j["zhandoumoshi"])return g end;return f end end)()