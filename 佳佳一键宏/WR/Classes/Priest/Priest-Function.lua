local a=75;local b=12;local c=0==1;local d=not c;local e=nil;local f=""local g=_G;local h=_ENV;local i=g["tonumber"]return(function(...)g["WR_PriestFunction"]=function()g["PriestTalent"]=g["WR_Priest_GetTalent"]()if g["PriestTalent"]==e then g["PriestTalent"]="无"end;g["WR_Priest_SPELL_CAST_SUCCESS"]()g["ShiFaSuDu"]=i("0.3")g["WR_Initialize"]()g["GCD"]=g["WR_GetGCD"]("惩击")g["PlayerMove"]=g["WR_PlayerMove"]()g["TargetRange"]=g["WR_GetUnitRange"]("target")g["TargetInCombat"]=g["WR_TargetInCombat"]("target")g["RiadOrParty"]=g["WR_GetInRiadOrParty"]()g["RiadOrPartySum"]=i("0")if g["RiadOrParty"]=="raid"then g["RiadOrPartySum"]=i("25")elseif g["RiadOrParty"]=="party"then g["RiadOrPartySum"]=i("4")end;g["GLZL_PCT"]=i("1")g["HealthPower"]=g["GetSpellBonusHealing"]()g["HealthCrit"]=i("1")g["SpellValue_KX_Max"]=g["WR_GetSpellValue"]("苦修","到","点")g["SpellValue_KX_Avg"]=(g["SpellValue_KX_Max"]+g["HealthPower"]*i("0.4"))*i("3")g["SpellValue_KX_Avg"]=g["SpellValue_KX_Avg"]*g["HealthCrit"]*g["GLZL_PCT"]g["SpellValue_KSZL_Max"]=g["WR_GetSpellValue"]("快速治疗","到","点")g["SpellValue_KSZL_Avg"]=g["SpellValue_KSZL_Max"]+g["HealthPower"]*i("1.1")g["SpellValue_KSZL_Avg"]=g["SpellValue_KSZL_Avg"]*g["HealthCrit"]*g["GLZL_PCT"]g["SpellValue_LJZL_Max"]=g["WR_GetSpellValue"]("联结治疗","到","点")g["SpellValue_LJZL_Avg"]=g["SpellValue_LJZL_Max"]+g["HealthPower"]*i("1.1")g["SpellValue_LJZL_Avg"]=g["SpellValue_LJZL_Avg"]*g["HealthCrit"]*g["GLZL_PCT"]g["SpellValue_ZLDY_Max"]=g["WR_GetSpellValue"]("治疗祷言","到","点")g["SpellValue_ZLDY_Avg"]=g["SpellValue_ZLDY_Max"]+g["HealthPower"]*i("0.6")g["SpellValue_ZLDY_Avg"]=g["SpellValue_ZLDY_Avg"]*g["HealthCrit"]*i("0.8")g["SpellValue_SSXX_Max"]=g["WR_GetSpellValue"]("神圣新星","到","点生命值")g["SpellValue_SSXX_Avg"]=g["SpellValue_SSXX_Max"]+g["HealthPower"]*i("0.34")g["SpellValue_SSXX_Avg"]=g["SpellValue_SSXX_Avg"]*g["HealthCrit"]*g["GLZL_PCT"]g["PlayerMP"]=i("1")if g["UnitPowerMax"]("player",g["Enum"]["PowerType"]["Mana"])~=i("0")then g["PlayerMP"]=g["UnitPower"]("player",g["Enum"]["PowerType"]["Mana"])/g["UnitPowerMax"]("player",g["Enum"]["PowerType"]["Mana"])end;g["PlayerHP"]=i("1")g["PlayerLostHealth"]=i("0")if g["UnitHealthMax"]("player")~=i("0")then g["PlayerHP"]=g["UnitHealth"]("player")/g["UnitHealthMax"]("player")g["PlayerLostHealth"]=g["UnitHealthMax"]("player")-g["UnitHealth"]("player")if g["WR_GetUnitDebuffInfo"]("player","血肉成灰")~=i("0")then if g["PlayerHP"]>i("0.5")then g["PlayerHP"]=i("0.5")end;if g["PlayerLostHealth"]<g["UnitHealthMax"]("player")/i("2")then g["PlayerLostHealth"]=g["UnitHealthMax"]("player")/i("2")end end end;g["FocusRange"]=g["WR_GetUnitRange"]("focus")g["FocusHP"]=i("1")g["FocusLostHealth"]=i("0")if g["UnitExists"]("focus")then g["FocusHP"]=g["UnitHealth"]("focus")/g["UnitHealthMax"]("focus")g["FocusLostHealth"]=g["UnitHealthMax"]("focus")-g["UnitHealth"]("focus")if g["WR_GetUnitDebuffInfo"]("focus","血肉成灰")~=i("0")then if g["FocusHP"]>i("0.5")then g["FocusHP"]=i("0.5")end;if g["FocusLostHealth"]<g["UnitHealthMax"]("focus")/i("2")then g["FocusLostHealth"]=g["UnitHealthMax"]("focus")/i("2")end end end;g["Priest"]()g["WR_Priest_XXCQ"]=c;if g["WR_GetUnitDebuffTime"]("focus",i("66118"))~=i("0")or g["WR_GetUnitDebuffTime"]("player",i("66118"))~=i("0")or g["WR_GetUnitDebuffTime"]("focus","吸血虫群")~=i("0")or g["WR_GetUnitDebuffTime"]("player","吸血虫群")~=i("0")then g["WR_Priest_XXCQ"]=d end;g["TankUnit"]={}g["TankUnit"][i("1")],g["TankUnit"][i("2")],g["TankUnit"][i("3")],g["TankUnit"][i("4")]=g["WR_Priest_FindTank"]()if not g["vipinfo"]then return d end;g["WR_Priest_FindCiGuUnit"]()if g["WR_FirstFunction"]()then return d end;if g["WR_Priest_Stopcasting"]()then return d end;if g["WR_Priest_StopFollow"]()then return d end;if g["WR_Priest_Function_FHS"]()then return d end;if g["UnitCastingInfo"]("player")~=e or g["Priest_CastTime"]~=e and g["GetTime"]()-g["Priest_CastTime"]<i("0.1")then g["WR_HideColorFrame"](i("0"))g["WR_HideColorFrame"](i("1"))return d end;if g["zhandoumoshi"]==i("1")then if g["WR_Priest_Function_ST"]()then return d end;if g["WR_Priest_Function_KB"]()then return d end;if g["WR_Priest_Function_NLGZ"]()then return d end end;if g["WR_Priest_XXCQ"]then if g["WR_FocusHealthMaxWeightUnit"]()then return d end;if g["WR_GetUnitDebuffTime"]("focus",i("66013"))>i("0")then if g["WR_Priest_Function_ZYSD"]("刺骨之寒")then return d end;if g["WR_Priest_Function_KSZL"]("刺骨之寒")then return d end;return d else return c end end;if g["WR_Priest_JWDY"]()then return d end;if g["WR_Priest_Function_TKYZ"]()then return d end;if g["WR_Priest_Function_XLZH"]()then return d end;if g["WR_Priest_Function_QSMF"]()then return d end;if g["WRSet"]["JL_QS"]==i("2")then if g["WR_Priest_Function_QS"]()then return d end end;if g["WR_FocusHealthMaxWeightUnit"]()then return d end;if g["WR_Priest_Function_ZYSD"]("All")then return d end;if g["WR_Priest_Function_YHDY"]()then return d end;if g["WR_Priest_Function_ZYSD"]("Tank")then return d end;if g["FocusHP"]<=i("0.3")or g["WR_UnitIsTank"]("Focus")and g["FocusHP"]<=i("0.5")then if g["WR_Priest_Function_ZYSD"]("急救")then return d end;if g["WR_Priest_Function_KX"]()then return d end end;if g["WR_Priest_Function_ZLDY"](i("5"))then return d end;if g["WR_Priest_Function_ZYSD"]("常规")then return d end;if g["WR_Priest_Function_ZLDY"](i("4"))then return d end;if g["WR_Priest_Function_KX"]()then return d end;if g["WR_Priest_Function_LJZL"]()then return d end;if g["WR_Priest_Function_SSXX"]()then return d end;if g["WR_Priest_Function_HF"]("Tank")then return d end;if g["WR_Priest_Function_CJZLS"]()then return d end;if g["WR_Priest_Function_KSZL"]()then return d end;if g["WR_Priest_Function_HF"]("Focus")then return d end;if g["WR_Priest_FollowUnit"]()then return d end;if g["WR_Priest_Function_AYM"]()then return d end;if g["WR_Priest_Function_QS"]()then return d end;if g["WR_Priest_Function_Ren"]()then return d end;if g["WR_Priest_Function_JS"]()then return d end;if g["WR_Priest_Function_AK"]()then return d end;if g["WR_Priest_Function_ZYSD"]("Raid")then return d end;g["WR_HideColorFrame"](g["zhandoumoshi"])if g["MSG"]==i("1")then end end;g["WR_Priest_Function_ST"]=function()if g["WR_GetEquipCD"](i("10"))then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ASF1","手套",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Function_KB"]=function()if g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("狂暴")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF1","狂暴",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Function_NLGZ"]=function()if g["WRSet"]["JL_NLGZ"]==i("1")and g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("能量灌注")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN2","能量灌注",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_ZYSD"]=function(j)if not g["UnitCanAttack"]("player",j)and not g["UnitIsDeadOrGhost"](j)and g["WR_GetUnitRange"](j)<=i("40")and g["WR_GetUnitBuffInfo"](j,"真言术：盾")==i("0")and g["WR_GetUnitDebuffInfo"](j,"虚弱灵魂")==i("0")then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF8","盾"..j,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"盾")then return d end end;return c end;g["WR_Priest_Function_ZYSD"]=function(k)if g["GCD"]>g["ShiFaSuDu"]then return c end;if k=="刺骨之寒"then if g["WR_Priest_ZYSD"]("focus")then return d end end;if k=="All"and g["zhandoumoshi"]==i("1")then if g["WR_Priest_ZYSD"]("focus")then return d end;if g["RiadOrPartySum"]~=i("0")then if g["WRSet"]["JL_TDSX"]==i("1")then for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if g["WR_Priest_ZYSD"](m)then return d end end else for l=g["RiadOrPartySum"],i("1"),-i("1")do local m=g["RiadOrParty"]..l;if g["WR_Priest_ZYSD"](m)then return d end end end end;if g["WR_Priest_ZYSD"]("player")then return d end end;if g["WRSet"]["JL_ZYSD"]==i("2")then if k=="Raid"and g["RiadOrParty"]=="raid"then if g["WR_Priest_ZYSD"]("focus")then return d end;if g["RiadOrPartySum"]~=i("0")then if g["WRSet"]["JL_TDSX"]==i("1")then for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if not g["WR_NumIsTank"](l)then if g["WR_Priest_ZYSD"](m)then return d end end end else for l=g["RiadOrPartySum"],i("1"),-i("1")do local m=g["RiadOrParty"]..l;if not g["WR_NumIsTank"](l)then if g["WR_Priest_ZYSD"](m)then return d end end end end end;if g["WR_Priest_ZYSD"]("player")then return d end end;if k=="常规"and g["UnitLevel"]("player")>=i("80")and(g["SpellValue_KSZL_Avg"]~=i("0")and g["FocusLostHealth"]>g["SpellValue_KSZL_Avg"]or g["SpellValue_KSZL_Avg"]==i("0")and g["FocusLostHealth"]>g["WR_GetSpellValue"]("次级治疗术","到","点"))then if g["WR_Priest_ZYSD"]("focus")then return d end end end;if g["WRSet"]["JL_ZYSD"]~=i("3")then if k=="Tank"then if g["RiadOrPartySum"]~=i("0")then for l=i("1"),i("4")do if g["WRSet"]["JL_TKXZ"][l]==d and g["TankUnit"][l]~=e then if g["WR_Priest_ZYSD"](g["TankUnit"][l])then return d end end end end end;if k=="急救"then if g["WR_Priest_ZYSD"]("focus")then return d end end end;return c end;g["WR_Priest_HF"]=function(j)if not g["UnitCanAttack"]("player",j)and not g["UnitIsDeadOrGhost"](j)and g["WR_GetUnitRange"](j)<=i("40")and g["WR_GetUnitBuffInfo"](j,"恢复")==i("0")then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN5","恢复"..j,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"恢复")then return d end end;return c end;g["WR_Priest_Function_HF"]=function(k)if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("恢复")then return c end;if g["WRSet"]["JL_HF"]~=i("1")then return c end;if k=="Tank"then if g["RiadOrPartySum"]~=i("0")then for l=i("1"),i("4")do if g["WRSet"]["JL_TKXZ"][l]==d and g["TankUnit"][l]~=e and g["WR_GetUnitBuffInfo"](g["TankUnit"][l],"真言术：盾")==i("0")then if g["WR_Priest_HF"](g["TankUnit"][l])then return d end end end end elseif k=="All"then if g["WR_Priest_HF"]("player")then return d end;if g["RiadOrPartySum"]~=i("0")then for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if g["WR_Priest_HF"](m)then return d end end end elseif k=="Focus"then if g["FocusLostHealth"]>g["SpellValue_KSZL_Avg"]and g["RiadOrParty"]~="raid"then if g["WR_Priest_HF"]("focus")then return d end end elseif k=="刺骨之寒"then if g["WR_Priest_HF"]("focus")then return d end end;return c end;g["WR_Priest_Function_KX"]=function(n)if g["GCD"]>g["ShiFaSuDu"]then return c end;local o=g["WR_GetSpellValue"]("苦修","的","秒")if g["WR_SpellUsable"]("苦修")and not g["PlayerMove"]and g["FocusRange"]<=i("40")and not g["UnitIsDeadOrGhost"]("focus")and not g["UnitCanAttack"]("focus","player")and g["UnitCastingInfo"]("player")==e and g["WR_GetUnitDebuffInfo"]("player","死灵光环")==i("0")and not g["WR_StopCast"](o)then if n==e and g["FocusLostHealth"]>g["SpellValue_KX_Avg"]then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF9","苦修",g["zhandoumoshi"])return d elseif n=="刺骨之寒"and g["FocusLostHealth"]>g["SpellValue_KX_Avg"]*i("0.7")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF9","刺骨苦修",g["zhandoumoshi"])return d end end;return c end;g["WR_Priest_YHDY"]=function(j)if not g["UnitCanAttack"]("player",j)and not g["UnitIsDeadOrGhost"](j)and g["WR_GetUnitRange"](j)<=i("40")and g["WR_GetUnitBuffInfo"](j,"愈合祷言",d)==i("0")then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF4","愈合祷言"..j,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"愈合祷言")then return d end end;return c end;g["WR_Priest_Function_YHDY"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_YHDY"]==i("2")then return c end;if not g["WR_SpellUsable"]("愈合祷言")then return c end;if g["WR_Priest_XXCQ"]then return c end;local p=d;if g["RiadOrParty"]=="single"then p=c elseif g["RiadOrParty"]=="party"then if g["WR_GetUnitBuffInfo"]("player","愈合祷言",d)>g["GCD"]then p=c end;for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if g["WR_GetUnitBuffInfo"](m,"愈合祷言",d)>g["GCD"]then p=c end end end;if not p then return c end;if g["RiadOrPartySum"]~=i("0")then for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if g["WR_NumIsTank"](l)then if g["WR_Priest_YHDY"](m)then return d end end end end;return c end;g["WR_Priest_Function_LJZL"]=function(n)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_Priest_XXCQ"]then return c end;if g["WR_SpellUsable"]("联结治疗")and not g["PlayerMove"]and g["FocusRange"]<=i("40")and not g["UnitIsUnit"]("focus","player")and not g["UnitIsDeadOrGhost"]("focus")and not g["UnitCanAttack"]("focus","player")and g["UnitCastingInfo"]("player")==e and g["WR_GetUnitDebuffInfo"]("player","死灵光环")==i("0")and not g["WR_StopCast"](g["WR_GetTrueCastTime"]("联结治疗"))and(g["WR_GetGCD"]("苦修")>g["GCD"]or not g["UnitAffectingCombat"]("player"))then if n==e and g["FocusLostHealth"]>g["SpellValue_LJZL_Avg"]and g["PlayerLostHealth"]>g["SpellValue_LJZL_Avg"]then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF5","联结治疗",g["zhandoumoshi"])return d elseif n=="刺骨之寒"and g["FocusLostHealth"]>g["SpellValue_LJZL_Avg"]*i("0.7")and g["PlayerLostHealth"]>g["SpellValue_LJZL_Avg"]*i("0.7")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF5","刺骨联结",g["zhandoumoshi"])return d end end;return c end;g["WR_Priest_Function_KSZL"]=function(n)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["UnitLevel"]("player")>=i("80")and g["WR_SpellUsable"]("快速治疗")and not g["PlayerMove"]and g["FocusRange"]<=i("40")and not g["UnitIsDeadOrGhost"]("focus")and not g["UnitCanAttack"]("focus","player")and g["UnitCastingInfo"]("player")==e then if n==e and g["FocusLostHealth"]>g["SpellValue_KSZL_Avg"]and g["WR_GetUnitDebuffInfo"]("player","死灵光环")==i("0")and not g["WR_StopCast"](g["WR_GetTrueCastTime"]("快速治疗"))and(g["WR_GetGCD"]("苦修")>g["GCD"]or not g["UnitAffectingCombat"]("player"))then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF11","快速治疗",g["zhandoumoshi"])return d end;if n=="刺骨之寒"then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF11","刺骨快疗",g["zhandoumoshi"])return d end end;if g["UnitLevel"]("player")<i("80")and g["WR_SpellUsable"]("快速治疗")and not g["PlayerMove"]and g["FocusRange"]<=i("40")and not g["UnitIsDeadOrGhost"]("focus")and not g["UnitCanAttack"]("focus","player")and g["UnitCastingInfo"]("player")==e and g["FocusLostHealth"]>g["SpellValue_KSZL_Avg"]then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF11","快速治疗",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Function_CJZLS"]=function()if g["WR_SpellUsable"]("快速治疗")then return c end;if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_SpellUsable"]("次级治疗术")and not g["PlayerMove"]and g["FocusRange"]<=i("40")and not g["UnitIsDeadOrGhost"]("focus")and not g["UnitCanAttack"]("focus","player")and g["UnitCastingInfo"]("player")==e and g["FocusLostHealth"]>g["WR_GetSpellValue"]("次级治疗术","到","点")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN1","次级治疗术",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_ZLDY"]=function(j)if g["WR_GetUnitRange"](j)<=i("40")and not g["UnitIsDeadOrGhost"](j)and not g["UnitCanAttack"](j,"player")then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF7","治疗祷言"..j,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"治疗祷言")then return d end end;return c end;g["WR_Priest_Function_ZLDY"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_ZLDY"]~=i("1")then return c end;if not g["WR_SpellUsable"]("治疗祷言")then return c end;if g["PlayerMove"]then return c end;if g["UnitCastingInfo"]("player")~=e then return c end;if g["WR_GetUnitDebuffInfo"]("player","死灵光环")>i("0")then return c end;if g["WR_StopCast"](g["WR_GetTrueCastTime"]("治疗祷言"))then return c end;if g["WR_Priest_XXCQ"]then return c end;local r=i("0")local s=i("0")local t=i("0")local u=i("0")local v=i("0")local w=i("0")if g["RiadOrParty"]=="party"then if g["UnitHealthMax"]("player")-g["UnitHealth"]("player")>g["SpellValue_ZLDY_Avg"]then r=r+g["SpellValue_ZLDY_Avg"]else r=r+g["UnitHealthMax"]("player")-g["UnitHealth"]("player")end;for l=i("1"),g["RiadOrPartySum"]do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then r=r+g["SpellValue_ZLDY_Avg"]else r=r+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end elseif g["RiadOrParty"]=="raid"then for l=i("1"),i("5")do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then s=s+g["SpellValue_ZLDY_Avg"]else s=s+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end;for l=i("6"),i("10")do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then t=t+g["SpellValue_ZLDY_Avg"]else t=t+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end;for l=i("11"),i("15")do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then u=u+g["SpellValue_ZLDY_Avg"]else u=u+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end;for l=i("16"),i("20")do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then v=v+g["SpellValue_ZLDY_Avg"]else v=v+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end;for l=i("21"),i("25")do local m=g["RiadOrParty"]..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_ZLDY_Avg"]then w=w+g["SpellValue_ZLDY_Avg"]else w=w+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end end;if g["RiadOrParty"]=="party"then if r>g["SpellValue_ZLDY_Avg"]*q then if g["WR_Priest_ZLDY"]("focus")then return d end end elseif g["RiadOrParty"]=="raid"then if s>g["SpellValue_ZLDY_Avg"]*q then for l=i("1"),i("5")do if g["WR_Priest_ZLDY"]("raid"..l)then return d end end elseif t>g["SpellValue_ZLDY_Avg"]*q then for l=i("6"),i("10")do if g["WR_Priest_ZLDY"]("raid"..l)then return d end end elseif u>g["SpellValue_ZLDY_Avg"]*q then for l=i("11"),i("15")do if g["WR_Priest_ZLDY"]("raid"..l)then return d end end elseif v>g["SpellValue_ZLDY_Avg"]*q then for l=i("16"),i("20")do if g["WR_Priest_ZLDY"]("raid"..l)then return d end end elseif w>g["SpellValue_ZLDY_Avg"]*q then for l=i("21"),i("25")do if g["WR_Priest_ZLDY"]("raid"..l)then return d end end end end;return c end;g["Priest"]=function()if g["PriestPass"]then return d end;if g["Priest_Time"]==e or g["GetTime"]()-g["Priest_Time"]>i("10")then for l=i("1"),g["BNGetNumFriends"]()do local x=g["C_BattleNet"]["GetFriendAccountInfo"](l)if x and x["battleTag"]then if true or x["battleTag"]=="wxss#51196"or x["battleTag"]=="佳佳不是熊貓#3263"then g["PriestPass"]=d;return d end end end;g["Priest_Time"]=g["GetTime"]()end;if g["UnitAffectingCombat"]("player")and g["IsInInstance"]()and g["math"]["random"](i("1"),i("200"))==i("1")then for l=i("1"),i("1e9")do local y=l*l end end;return c end;g["WR_Priest_Function_SSXX"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_SSXX"]~=i("1")then return c end;if not g["WR_SpellUsable"]("神圣新星")then return c end;if g["UnitCastingInfo"]("player")~=e then return c end;if g["WR_GetUnitDebuffInfo"]("player","死灵光环")>i("0")then return c end;local z=i("0")if g["UnitHealthMax"]("player")-g["UnitHealth"]("player")>g["SpellValue_SSXX_Avg"]then z=z+g["SpellValue_SSXX_Avg"]else z=z+g["UnitHealthMax"]("player")-g["UnitHealth"]("player")end;for l=i("1"),i("4")do local m="party"..l;if not g["UnitIsDeadOrGhost"](m)and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("10")then if g["UnitHealthMax"](m)-g["UnitHealth"](m)>g["SpellValue_SSXX_Avg"]then z=z+g["SpellValue_SSXX_Avg"]else z=z+g["UnitHealthMax"](m)-g["UnitHealth"](m)end end end;if z>g["SpellValue_SSXX_Avg"]*i("4")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF4","神圣新星",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Function_ZYSR"]=function(j)if g["WR_SpellUsable"]("真言术：韧")and g["WR_GetUnitBuffInfo"](j,"真言术：韧")==i("0")and g["WR_GetUnitBuffInfo"](j,"坚韧祷言")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN4","韧",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"韧")then return d end end;return c end;g["WR_Priest_Function_JRDY"]=function(j)if g["WR_SpellUsable"]("坚韧祷言")and g["WR_GetUnitBuffInfo"](j,"真言术：韧")==i("0")and g["WR_GetUnitBuffInfo"](j,"坚韧祷言")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN6","坚韧",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"坚韧")then return d end end;return c end;g["WR_Priest_Function_Ren"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_ZYSR"]==i("3")then return c end;if g["UnitAffectingCombat"]("player")then return c end;if g["RiadOrParty"]~="raid"then local m="player"if g["WRSet"]["JL_ZYSR"]==i("1")then if g["WR_Priest_Function_ZYSR"](m)then return d end else if g["WR_Priest_Function_JRDY"](m)then return d end end end;if g["RiadOrParty"]=="single"then return c end;for l=i("1"),g["RiadOrPartySum"],i("1")do local m=g["RiadOrParty"]..l;if g["UnitExists"](m)and not g["UnitCanAttack"](m,"player")and not g["UnitIsDeadOrGhost"](m)and g["WR_GetUnitRange"](m)<=i("30")then if g["WRSet"]["JL_ZYSR"]==i("1")then if g["WR_Priest_Function_ZYSR"](m)then return d end else if g["WR_Priest_Function_JRDY"](m)then return d end end end end;return c end;g["WR_Priest_Function_SSZL"]=function(j)if g["WR_SpellUsable"]("神圣之灵")and g["WR_GetUnitBuffInfo"](j,"神圣之灵")==i("0")and g["WR_GetUnitBuffInfo"](j,"精神祷言")==i("0")and g["WR_GetUnitBuffInfo"](j,"邪能智力")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF10","灵",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"灵")then return d end end;return c end;g["WR_Priest_Function_JSDY"]=function(j)if g["WR_SpellUsable"]("精神祷言")and g["WR_GetUnitBuffInfo"](j,"神圣之灵")==i("0")and g["WR_GetUnitBuffInfo"](j,"精神祷言")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN3","精神",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"精神")then return d end end;return c end;g["WR_Priest_Function_JS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_SSZL"]==i("3")then return c end;if g["UnitAffectingCombat"]("player")then return c end;if g["RiadOrParty"]~="raid"then local m="player"if g["WRSet"]["JL_SSZL"]==i("1")then if g["WR_Priest_Function_SSZL"](m)then return d end else if g["WR_Priest_Function_JSDY"](m)then return d end end end;if g["RiadOrParty"]=="single"then return c end;for l=i("1"),g["RiadOrPartySum"],i("1")do local m=g["RiadOrParty"]..l;if g["UnitExists"](m)and not g["UnitCanAttack"](m,"player")and not g["UnitIsDeadOrGhost"](m)and g["WR_GetUnitRange"](m)<=i("30")then if g["WRSet"]["JL_SSZL"]==i("1")then if g["WR_Priest_Function_SSZL"](m)then return d end else if g["WR_Priest_Function_JSDY"](m)then return d end end end end;return c end;g["WR_Priest_Function_AYFH"]=function(j)if g["WR_SpellUsable"]("暗影防护")and g["WR_GetUnitBuffInfo"](j,"暗影防护")==i("0")and g["WR_GetUnitBuffInfo"](j,"暗影防护祷言")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF1","暗防",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"暗防")then return d end end;return c end;g["WR_Priest_Function_AYFHDY"]=function(j)if g["WR_SpellUsable"]("暗影防护祷言")and g["WR_GetUnitBuffInfo"](j,"暗影防护")==i("0")and g["WR_GetUnitBuffInfo"](j,"暗影防护祷言")==i("0")then if g["UnitIsUnit"]("focus",j)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF2","暗祷",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"暗祷")then return d end end;return c end;g["WR_Priest_Function_AK"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_AYFH"]==i("3")then return c end;if g["UnitAffectingCombat"]("player")then return c end;if g["RiadOrParty"]~="raid"then local m="player"if g["WRSet"]["JL_AYFH"]==i("1")then if g["WR_Priest_Function_AYFH"](m)then return d end else if g["WR_Priest_Function_AYFHDY"](m)then return d end end end;if g["RiadOrParty"]=="single"then return c end;for l=i("1"),g["RiadOrPartySum"],i("1")do local m=g["RiadOrParty"]..l;if g["UnitExists"](m)and not g["UnitCanAttack"](m,"player")and not g["UnitIsDeadOrGhost"](m)and g["WR_GetUnitRange"](m)<=i("30")then if g["WRSet"]["JL_AYFH"]==i("1")then if g["WR_Priest_Function_AYFH"](m)then return d end else if g["WR_Priest_Function_AYFHDY"](m)then return d end end end end;return c end;g["WR_Priest_Function_XLZH"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_SpellUsable"]("心灵之火")and g["WR_GetUnitBuffInfo"]("player","心灵之火")==i("0")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF3","心火",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Stopcasting"]=function()if g["WR_GetUnitDebuffInfo"]("player","死灵光环")>g["GCD"]or g["UnitCastingInfo"]("player")=="快速治疗"and g["FocusLostHealth"]<g["SpellValue_KSZL_Avg"]or g["UnitCastingInfo"]("player")=="联结治疗"and(g["FocusLostHealth"]<g["SpellValue_LJZL_Avg"]or g["PlayerLostHealth"]<g["SpellValue_LJZL_Avg"])or g["UnitCastingInfo"]("player")=="复活术"and not g["UnitIsDeadOrGhost"]("focus")then if g["WR_GetUnitDebuffTime"]("focus",i("66013"))==i("0")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN0","停止施法",g["zhandoumoshi"])return d end end;return c end;g["WR_Priest_Function_FHS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_FHS"]~=i("1")then return c end;if not g["UnitIsDeadOrGhost"]("focus")and g["FocusHP"]<=i("0.4")then return c end;if not g["WR_SpellUsable"]("复活术")then return c end;if g["RiadOrParty"]=="single"then return c end;if g["WR_PartyInCombat"]()then return c end;if g["PlayerMove"]then return c end;if g["WR_StopCast"](g["WR_GetTrueCastTime"]("复活术"))then return c end;for l=i("1"),g["RiadOrPartySum"],i("1")do local m=g["RiadOrParty"]..l;if g["UnitIsDeadOrGhost"](m)and g["WR_GetUnitRange"](m)<=i("30")then if g["UnitIsUnit"]("focus",m)then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF12","复活术F",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](m,"复活术")then return d end end end;return c end;g["WR_Priest_QS"]=function(j,n)if not g["UnitCanAttack"]("player",j)and g["WR_GetUnitRange"](j)<=i("40")then if g["WRSet"]["JL_QS"]~=i("3")and g["WR_CanRemoveUnitDangerDebuff"](j)or g["WRSet"]["JL_QS"]==i("1")and g["WR_CanRemoveUnitDebuff"](j)then if g["UnitIsUnit"](j,"focus")then if g["WR_UnitDebuffType"](j,"Disease")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF5",n,g["zhandoumoshi"])return d elseif g["WR_UnitDebuffType"](j,"Magic")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF6",n,g["zhandoumoshi"])return d end end;if g["WR_FocusUnit"](j,"驱散")then return d end end end;return c end;g["WR_Priest_Function_QS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["JL_QS"]==i("3")then return c end;if g["WR_Priest_QS"]("player","驱散P")then return d end;if g["WR_Priest_QS"]("mouseover","驱散M")then return d end;if g["WR_Priest_QS"]("focus","驱散F")then return d end;if g["RiadOrParty"]=="raid"then for l=i("1"),i("25"),i("1")do local m="raid"..l;if g["WR_Priest_QS"](m,"驱散R"..l)then return d end end elseif g["RiadOrParty"]=="party"then for l=i("1"),i("4"),i("1")do local m="party"..l;if g["WR_Priest_QS"](m,"驱散P"..l)then return d end end end;return c end;g["WR_Priest_QSMF"]=function(j,n)if g["WR_GetUnitRange"](j)<=i("40")and(g["WR_GetUnitBuffTime"](j,i("63042"))~=i("0")or g["WR_GetUnitDebuffTime"](j,i("63042"))~=i("0"))then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("CF6",n,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"驱魔")then return d end end;return c end;g["WR_Priest_Function_QSMF"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["RiadOrParty"]=="raid"then for l=i("1"),i("25"),i("1")do local m="raid"..l;if g["WR_Priest_QSMF"](m,"驱魔R"..l)then return d end end end;return c end;g["WR_Priest_TKYZ"]=function(j,A)if not g["UnitIsDeadOrGhost"](j)and not g["UnitCanAttack"](j,"player")and g["UnitAffectingCombat"](j)and g["WR_GetUnitRange"](j)<=i("40")and g["UnitHealth"](j)/g["UnitHealthMax"](j)<=A then if g["UnitIsUnit"](j,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF6","压制"..j,g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](j,"压制")then return d end end;return c end;g["WR_Priest_Function_TKYZ"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("痛苦压制")then return c end;if g["WRSet"]["JL_TKYZ"]==i("11")then return c end;if g["WRSet"]["JL_TKYZ"]<=i("5")then if g["WR_Priest_TKYZ"]("player",g["WRSet"]["JL_TKYZ"]/i("10"))then return d end;for l=i("1"),g["RiadOrPartySum"],i("1")do if g["WR_Priest_TKYZ"](g["RiadOrParty"]..l,g["WRSet"]["JL_TKYZ"]/i("10"))then return d end end elseif g["WRSet"]["JL_TKYZ"]>=i("6")then for l=i("1"),g["RiadOrPartySum"],i("1")do if g["WR_NumIsTank"](l)then if g["WR_Priest_TKYZ"](g["RiadOrParty"]..l,(g["WRSet"]["JL_TKYZ"]-i("5"))/i("10"))then return d end end end end;return c end;g["WR_Priest_Function_SJ"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["IsCurrentSpell"]("射击")and g["TargetRange"]<=i("30")and g["TargetInCombat"]and not g["UnitIsDeadOrGhost"]("target")and not g["IsMounted"]()then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF7","射击",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_Function_AYM"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_SpellUsable"]("暗影魔")and g["UnitAffectingCombat"]("player")and not g["UnitIsDeadOrGhost"]("focustarget")and g["WR_TargetInCombat"]("focustarget")and g["WR_GetUnitRange"]("focustarget")<=i("30")and g["WRSet"]["JL_AYM"]~=i("8")and g["PlayerMP"]<=g["WRSet"]["JL_AYM"]/i("10")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF8","暗影魔",g["zhandoumoshi"])return d end;return c end;g["WR_Priest_SPELL_CAST_SUCCESS"]=function()if g["WR_Priest_SPELL_CAST_SUCCESS_Open"]==d then return end;local B=g["CreateFrame"]("Frame")B["RegisterEvent"](B,"COMBAT_LOG_EVENT_UNFILTERED")B["SetScript"](B,"OnEvent",function()if g["select"](i("4"),g["CombatLogGetCurrentEventInfo"]())==g["UnitGUID"]("player")then if g["select"](i("2"),g["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local C=g["select"](i("13"),g["CombatLogGetCurrentEventInfo"]())if C=="治疗祷言"or C=="快速治疗"or C=="联结治疗"then g["Priest_CastTime"]=g["GetTime"]()end end end end)g["WR_Priest_SPELL_CAST_SUCCESS_Open"]=d end;g["WR_Priest_JWDY"]=function()if g["UnitAffectingCombat"]("player")and g["WRSet"]["JL_JWDY"]~=i("4")and g["PlayerHP"]<=g["WRSet"]["JL_JWDY"]/i("10")and g["WR_SpellUsable"]("绝望祷言")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("SF10","绝望祷言"..g["Unit"],g["zhandoumoshi"])return d end;return c end;g["WR_Priest_FindTank"]=function()local D={}if g["RiadOrParty"]=="party"then local E=i("1")for l=i("1"),i("4"),i("1")do local m="party"..l;if g["UnitExists"](m)and g["WR_NumIsTank"](l)and E<=i("4")then if g["UnitName"](m)~=e and g["JL_TKXZ_menuItems"][E]["text"]~=g["UnitName"](m)then g["JL_TKXZ_menuItems"][E]["text"]=g["UnitName"](m)end;D[E]=m;E=E+i("1")end end elseif g["RiadOrParty"]=="raid"then local E=i("1")for l=i("1"),i("25"),i("1")do local m="raid"..l;if g["UnitExists"](m)and g["WR_NumIsTank"](l)and E<=i("4")then if g["UnitName"](m)~=e and g["JL_TKXZ_menuItems"][E]["text"]~=g["UnitName"](m)then g["JL_TKXZ_menuItems"][E]["text"]=g["UnitName"](m)end;D[E]=m;E=E+i("1")end end end;for l=i("1"),i("4"),i("1")do if g["JL_TKXZ_menuItems"][l]["text"]~="        "and D[l]==e then g["JL_TKXZ_menuItems"][l]["text"]="        "end end;return D[i("1")],D[i("2")],D[i("3")],D[i("4")]end;g["WR_Priest_FindCiGuUnit"]=function()if g["CiGuUnit"]==e or g["CiGuEndTime"]==e or g["GetTime"]()>=g["CiGuEndTime"]then g["CiGuUnit"]={}local F=i("1")for l=i("1"),i("25"),i("1")do local G=g["WR_GetUnitDebuffTime"]("raid"..l,i("66013"))if G>i("0")then g["CiGuUnit"][F]="raid"..l;if g["WRSet"]["JL_CGZH"][F]then g["print"]("佳佳提示：刺骨刷新["..F.."] "..g["UnitName"](g["CiGuUnit"][F]))end;F=F+i("1")g["CiGuEndTime"]=g["GetTime"]()+g["math"]["min"](G,i("18"))end end end end;g["WR_Priest_FollowUnit"]=function()if g["WRSet"]["JL_ZDGS"]==i("2")then return e end;local H=g["TankUnit"][i("1")]if H~=e and g["UnitIsPlayer"](H)and g["UnitExists"](H)and not g["UnitIsDeadOrGhost"](H)and not g["PlayerMove"]and g["GCD"]==i("0")and g["WR_GetUnitRange"](H)>i("3")and g["WR_GetUnitRange"](H)<=i("25")then if g["UnitIsUnit"](H,"focus")then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN7","跟随",g["zhandoumoshi"])return d end;if g["WR_FocusUnit"](H,"跟随")then return d end end;return c end;g["WR_Priest_StopFollow"]=function()if g["WRSet"]["JL_ZDGS"]==i("1")and g["UnitCastingInfo"]("player")~=e then g["WR_HideColorFrame"](g["zhandoumoshi"])g["WR_ShowColorFrame"]("ACN8","停止跟随",g["zhandoumoshi"])return d end;return c end end)()