local a=92;local b=51;local c=0==1;local d=not c;local e=nil;local f=""local g=_G;local h=_ENV;local i=g["tonumber"]return(function(...)g["WR_DruidRestoration"]=function()g["WR_DebugTime"](i("0"))if g["GetSpecialization"]()~=i("4")then return end;g["ShiFaSuDu"]=i("0.05")+g["WRSet"]["HF_SFSD"]*i("0.05")g["GCD"]=g["WR_GetGCD"]("野性印记")g["MaxGCD"]=g["WR_GetMaxGCD"](i("1.5"))g["PlayerInCombat"]=g["UnitAffectingCombat"]("player")g["PlayerHP"]=g["UnitHealth"]("player")/g["UnitHealthMax"]("player")g["FocusHP"]=g["WR_GetUnitHP"]("focus")g["PlayerMove"]=g["WR_PlayerMove"]()g["PlayerMP"]=g["WR_GetUnitMP"]("player")g["PartyLostHP"]=g["WR_PartyLostHP"]()g["TargetCloseRange"]=g["C_Spell"]["IsSpellInRange"]("撕碎","target")g["TargetRange"]=g["WR_GetUnitRange"]("target")g["FocusRange"]=g["WR_GetUnitRange"]("focus")g["FocusMustheal"]=g["WR_Mustheal"]("focus")g["FocusLostHealth"]=g["WR_GetUnitLostHealth"]("focus")g["CatForm"]=g["WR_GetUnitBuffTime"]("player","猎豹形态")~=i("0")g["MoonkinForm"]=g["WR_GetUnitBuffTime"]("player","枭兽形态")~=i("0")g["BearForm"]=g["WR_GetUnitBuffTime"]("player","熊形态")~=i("0")g["TreeForm"]=g["WR_GetUnitBuffTime"]("player","化身：生命之树")~=i("0")g["TargetInCombat"]=g["WR_TargetInCombat"]("target")g["InBossCombat"]=g["WR_InBossCombat"]()g["InRaidOrParty"]=g["WR_GetInRaidOrParty"]()g["HUCountRangeClose"]=g["WR_GetSpellRangeHarmUnitCount"]("撕碎",c)g["HUCountRange45"]=g["WR_GetRangeHarmUnitCount"](i("45"),not g["WR_InTraining"]())g["ResistOutburstTime"]=g["WR_ResistOutburstTime"]()g["MustDefenseTime_Bear"]=g["ResistOutburstTime"]<=g["GCD"]+g["MaxGCD"]g["Resist"]=c;g["ResistSustained"]=g["WR_ResistSustained"]()g["MustDefenseTime"]=g["WR_MustDefenseTime"]()if g["ResistSustained"]or g["ResistOutburstTime"]<=i("5")or g["MustDefenseTime"]<=i("5")then g["Resist"]=d end;g["WR_DruidRestoration_SpecialCombat"]()g["WR_DruidRestoration_LastSpellTime"]()g["PartySum"]=i("1")g["HCS_BuffSum"]=i("0")g["SMZF_BuffSum"]=i("0")g["SMZF_BuffMinTime"]=i("15")if g["WR_GetUnitBuffTime"]("player","生命绽放",d)>i("0")then g["SMZF_BuffSum"]=g["SMZF_BuffSum"]+i("1")if g["WR_GetUnitBuffTime"]("player","生命绽放",d)<g["SMZF_BuffMinTime"]then g["SMZF_BuffMinTime"]=g["WR_GetUnitBuffTime"]("player","生命绽放",d)end end;if g["WR_GetUnitBuffTime"]("player","回春术",d)>i("0")then g["HCS_BuffSum"]=g["HCS_BuffSum"]+i("1")end;if g["WR_DruidRefreshTime"]==e then g["WR_DruidRefreshTime"]=g["GetTime"]()g["MasteryADD"]=g["WR_DruidRestoration_GetADD_Mastery"]("focus")g["XJZY_Health"]=g["WR_GetSpellValue"]("迅捷治愈","恢复","点生命值")+g["WR_GetSpellValue"]("迅捷治愈","回复"," 点生命值")g["XJZY_Health"]=g["XJZY_Health"]*g["MasteryADD"]g["YH_Health"]=g["WR_GetSpellValue"]("愈合","目标恢复","点生命值")+g["WR_GetSpellValue"]("愈合","额外恢复","点生命值")if g["WR_GetUnitBuffTime"]("player","丛林之魂")>g["GCD"]+g["WR_GetTrueCastTime"]("愈合")+i("0.2")then g["YH_Health"]=g["YH_Health"]*(i("1")+i("1.5"))end;g["YH_Health"]=g["YH_Health"]*g["MasteryADD"]g["LMWS_Health"]=g["WR_GetSpellValue"]("林莽卫士","迅捷治愈，为其恢复","点生命值")g["LMWS_Health"]=g["LMWS_Health"]*g["MasteryADD"]if g["PlayerInCombat"]then if g["UnitGroupRolesAssigned"](g["Unit"])~="TANK"then g["XJZY_Health"]=g["XJZY_Health"]*i("1.3")if g["WR_GetUnitBuffCount"]("player","节能施法")==i("0")then g["YH_Health"]=g["YH_Health"]*i("2.5")elseif g["WR_GetUnitBuffCount"]("player","节能施法")>=i("1")then g["YH_Health"]=g["YH_Health"]*i("1.3")end;g["LMWS_Health"]=g["LMWS_Health"]*i("1.5")else g["XJZY_Health"]=g["XJZY_Health"]*i("3")g["YH_Health"]=g["YH_Health"]*i("3")g["LMWS_Health"]=g["LMWS_Health"]*i("3")end end;if not g["UnitAffectingCombat"]("player")then for j=i("1"),i("4"),i("1")do local k="party"..j;if g["WR_GetUnitBuffTime"](k,"生命绽放",d)>i("0")then g["SMZF_BuffSum"]=g["SMZF_BuffSum"]+i("1")if g["WR_GetUnitBuffTime"](k,"生命绽放",d)<g["SMZF_BuffMinTime"]then g["SMZF_BuffMinTime"]=g["WR_GetUnitBuffTime"](k,"生命绽放",d)end end;if g["WR_GetUnitBuffTime"](k,"回春术",d)>i("0")then g["HCS_BuffSum"]=g["HCS_BuffSum"]+i("1")end;if not g["UnitIsDead"](k)and not g["UnitCanAttack"]("player",k)and g["UnitGroupRolesAssigned"](k)~="TANK"then g["PartySum"]=g["PartySum"]+i("1")end end;for j=i("1"),i("4"),i("1")do local k="party"..j;if g["UnitExists"](k)and g["UnitName"](k)~=e then if g["HF_SMZF_menuItems"][j]["text"]~=g["UnitName"](k)then g["HF_SMZF_UpdateMenuItemText"](j,g["UnitName"](k))g["HF_MSZF_UpdateMenuItemText"](j,g["UnitName"](k))end else if g["HF_SMZF_menuItems"][j]["text"]~=f then g["HF_SMZF_UpdateMenuItemText"](j,f)g["HF_MSZF_UpdateMenuItemText"](j,f)end end end;if g["HF_SMZF_menuItems"][i("5")]["text"]~=g["UnitName"]("player")then g["HF_SMZF_UpdateMenuItemText"](i("5"),g["UnitName"]("player"))g["HF_MSZF_UpdateMenuItemText"](i("5"),g["UnitName"]("player"))end end elseif g["GetTime"]()-g["WR_DruidRefreshTime"]>=i("1")then g["WR_DruidRefreshTime"]=e end;g["Druid_Restoration"]()if g["MSG"]==i("1")then end;if g["WR_PriorityCheck"]()then return end;if g["WR_DruidRestoration_Function_StopCasting"]()then return end;if g["WR_DruidRestoration_Function_YD"]()then return end;if g["WR_DruidRestoration_Function_GL"]()then return end;if g["WR_DruidRestoration_SP"]("保命")then return d end;if g["WR_ZLS"](g["WRSet"]["HF_ZLS"])then return d end;if g["WR_ZLYS"](g["WRSet"]["HF_ZLYS"])then return d end;if g["WR_ZLYS2"](g["WRSet"]["HF_ZLYS"])then return d end;if g["WR_DruidRestoration_Function_ZWJS"]()then return end;if g["WR_DruidRestoration_Function_CancelForm"]()then return end;if g["WR_DruidRestoration_Function_KBHF"]()then return end;if g["WR_Druid_Function_FS"]()then return end;if g["WR_DruidRestoration_Function_BXFY"]()then return end;if g["WR_DruidRestoration_Function_BXJCDS"]()then return end;if g["WR_DruidRestoration_Function_BXZT"]()then return end;if g["WR_Druid_Function_AF"]()then return end;if g["WR_Druid_Function_DHPX"]()then return end;if g["WR_Druid_Function_YXYJ"]()then return end;if g["WR_Druid_Function_YTTJ"]()then return end;if g["WR_DruidRestoration_Function_JH"]()then return end;if g["WR_DruidRestoration_Function_ZRZY"]()then return end;if g["WR_DruidRestoration_Function_YHZT"]()then return end;if g["WR_DruidRestoration_Function_XS"]()then return end;if g["WR_DruidRestoration_SP"]("常驻")then return d end;if g["WR_DruidRestoration_SP"]("爆发")then return d end;if g["WR_FocusMaxWeightUnit"]()then return end;if g["WR_DruidRestoration_Function_DYJS"]()then return end;if g["WR_DruidRestoration_Function_LMWS"]()then return end;if g["WR_DruidRestoration_Function_HSSMZS"]()then return end;if g["WR_DruidRestoration_Function_JJZL"]()then return end;if g["WR_DruidRestoration_TSXD"]()then return end;if g["WR_DruidRestoration_ZRDSH"]()then return end;if g["WR_DruidRestoration_Function_WLZZ"]()then return end;if g["WR_DruidRestoration_Function_FanSheng"]()then return end;if g["WR_DruidRestoration_Function_YXCZ"]()then return end;if g["WR_DruidRestoration_Function_YXZL"]()then return end;if g["WR_DruidRestoration_Function_BHQF"]()then return end;if g["WR_DruidRestoration_XJZY"]()then return d end;if g["WR_DruidRestoration_Function_SNLAJJ"]()then return end;if g["WR_DruidRestoration_YH"]("节能")then return d end;if g["WR_DruidRestoration_Function_HCS_Assist"]()then return end;if g["WR_DruidRestoration_Function_SMZF"]()then return end;if g["WR_DruidRestoration_YH"]("HOT")then return d end;if g["WR_DruidRestoration_Function_HCS"]()then return end;if g["WR_DruidRestoration_YH"]("填充")then return d end;if g["WR_DruidRestoration_Function_Fight"]()then return end;g["WR_HideColorFrame"](g["zhandoumoshi"])end;g["WR_DruidRestoration_TSXD"]=function()if g["IsPlayerSpell"](i("426784"))and g["IsPlayerSpell"](i("158504"))and g["zhandoumoshi"]==i("1")then if g["WR_GetUnitBuffTime"]("player","野性之心")==i("0")and g["WR_GetUnitBuffTime"]("player",i("429474"))>g["GCD"]+g["MaxGCD"]and g["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")==i("0")then if g["WR_DruidRestoration_Function_XYS"]()then return d end end;if g["WR_GetUnitBuffTime"]("player","野性之心")>g["GCD"]and g["WR_GetUnitBuffTime"]("player",i("429474"))>g["GCD"]then if g["WR_DruidRestoration_Function_XHS"]()then return d end;if g["WR_DruidRestoration_Function_FN"]()then return d end end end;return c end;g["WR_DruidRestoration_Function_Fight"]=function()if g["GCD"]>i("0")then return c end;if g["UnitCastingInfo"]("boss1")=="宇宙奇点"then return c end;if g["WR_DruidRestoration_YXZX"]()then return d end;if g["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")>i("6")or not g["IsPlayerSpell"](i("426784"))then if g["WR_DruidRestoration_Function_XYS"]()then return d end end;if g["WR_GetUnitBuffTime"]("player",i("429474"))>g["GCD"]then if g["WR_DruidRestoration_Function_XHS"]()then return d end;if g["WR_DruidRestoration_Function_FN"]()then return d end end;if not g["IsPlayerSpell"](i("439528"))then if g["WR_DruidRestoration_Function_YYS"]()then return d end;if g["HUCountRange45"]<i("3")then if g["WR_DruidRestoration_Function_YHS"]()then return d end end end;if g["WR_GetUnitBuffTime"]("player","化身")==i("0")and(g["WRSet"]["HF_LBXT"]==i("2")or g["WRSet"]["HF_LBXT"]==i("1")and g["zhandoumoshi"]~=i("1"))then if g["WR_SpellUsable"]("猎豹形态")and not g["CatForm"]and not g["TreeForm"]and g["HUCountRangeClose"]>=i("1")and not g["ResistSustained"]and g["ResistOutburstTime"]>i("5")and g["SMZF_BuffMinTime"]>i("2")then if g["WR_DruidRestoration_Function_XL"]()then return d end;if g["WR_DruidRestoration_Function_SS"]()then return d end;if not g["IsPlayerSpell"](i("449193"))then if g["WR_ColorFrame_Show"]("CF8","猎豹形态")then return d end end end;if g["WR_DruidRestoration_Function_GeLie"]()then return d end;if g["WR_DruidRestoration_Function_XMSY"]()then return d end;if g["WR_DruidRestoration_Function_XL"]()then return d end;if g["WR_DruidRestoration_Function_TJ"]()then return d end;if g["WR_DruidRestoration_Function_SS"]()then return d end;if g["WR_DruidRestoration_Function_HS"]()then return d end end;if g["WR_DruidRestoration_Function_YYS"]()then return d end;if g["WR_DruidRestoration_Function_YHS"]()then return d end;if g["WR_DruidRestoration_Function_XHS"]()then return d end;if g["WR_DruidRestoration_Function_FN"]()then return d end;return c end;g["WR_DruidRestoration_Function_StopCasting"]=function()if g["UnitCastingInfo"]("player")~=e and(g["UnitCastingInfo"]("player")=="新生"and not g["WR_PartyIsDeath"]()or g["UnitCastingInfo"]("player")=="星火术"and(g["WRSet"]["HF_BXFY"]and g["MustDefenseTime_Bear"]and not g["BearForm"]or g["FocusHP"]<i("0.60")and g["Resist"]))then if g["WR_ColorFrame_Show"]("CSN","停止施法")then return d end end;return c end;g["WR_DruidRestoration_Function_YD"]=function()if g["InRaidOrParty"]=="raid"then return c end;if g["WR_Escape"]()and g["WR_SpellUsable"]("影遁")then if g["WR_ColorFrame_Show"]("ASF1","影遁")then return d end end;return c end;g["WR_DruidRestoration_Function_GL"]=function()if g["WRSet"]["HF_GL"]~=i("6")and(g["PlayerHP"]<g["WRSet"]["HF_GL"]/i("10")or g["MustDefenseTime"]<=i("1")and g["PlayerHP"]<i("0.8"))and g["PlayerInCombat"]and g["WR_SpellUsable"]("甘霖")and(g["ZLS_EndTime"]==e or g["GetTime"]()-g["ZLS_EndTime"]>i("0.5"))and(g["ZLYS_EndTime"]==e or g["GetTime"]()-g["ZLYS_EndTime"]>i("0.5"))then g["GL_EndTime"]=g["GetTime"]()+g["GCD"]if g["WR_ColorFrame_Show"]("CF2","甘霖")then return d end end;return c end;g["WR_DruidRestoration_Function_ZLS"]=function()if g["WRSet"]["HF_ZLS"]~=i("5")and(g["PlayerHP"]<g["WRSet"]["HF_ZLS"]/i("10")or g["MustDefenseTime"]<=i("1")and g["PlayerHP"]<i("0.8"))and g["PlayerInCombat"]and g["WR_Use_ZLS"]()and(g["GL_EndTime"]==e or g["GetTime"]()-g["GL_EndTime"]>i("0.5"))and(g["ZLYS_EndTime"]==e or g["GetTime"]()-g["ZLYS_EndTime"]>i("0.5"))then g["ZLS_EndTime"]=g["GetTime"]()+g["GCD"]if g["WR_ColorFrame_Show"]("CSF","治疗石")then return d end end;return c end;g["WR_DruidRestoration_Function_ZLYS"]=function()if g["WRSet"]["HF_ZLYS"]~=i("5")and(g["PlayerHP"]<g["WRSet"]["HF_ZLYS"]/i("10")or g["MustDefenseTime"]<=i("1")and g["PlayerHP"]<i("0.8"))and g["PlayerInCombat"]and g["WR_Use_ZLYS"]()and(g["GL_EndTime"]==e or g["GetTime"]()-g["GL_EndTime"]>i("0.5"))and(g["ZLS_EndTime"]==e or g["GetTime"]()-g["ZLS_EndTime"]>i("0.5"))then g["ZLYS_EndTime"]=g["GetTime"]()+g["GCD"]if g["WR_ColorFrame_Show"]("CST","治疗药水")then return d end end;return c end;g["WR_DruidRestoration_Function_ZWJS"]=function()if g["WR_GetUnitBuffTime"]("player","树皮术")==i("0")and(g["MustDefenseTime"]<i("5")or g["InBossCombat"]and g["ResistSustained"]and g["PlayerHP"]<i("0.95"))then if g["WRSet"]["HF_SPS"]and g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("树皮术")and(g["TMSP_EndTime"]==e or g["GetTime"]()-g["TMSP_EndTime"]>i("0.5"))then g["SPS_EndTime"]=g["GetTime"]()+g["GCD"]if g["WR_ColorFrame_Show"]("CF3","树皮术")then return d end end end;return c end;g["WR_DruidRestoration_Function_CancelForm"]=function()if g["WRSet"]["HF_JCDS"]and g["WR_Unbind"]("player")and(g["BearForm"]or g["CatForm"]or g["TreeForm"]and g["IsPlayerSpell"](i("33891")))then if g["WR_ColorFrame_Show"]("CF10","解除变形")then return d end end;return c end;g["WR_DruidRestoration_Function_KBHF"]=function()if g["BearForm"]and g["IsPlayerSpell"](i("22842"))and g["WR_SpellUsable"]("狂暴回复")and(g["CastTime_KBHF"]==e or g["GetTime"]()-g["CastTime_KBHF"]>i("3"))and(g["CastTime_DHPX"]==e or g["GetTime"]()-g["CastTime_DHPX"]>i("3"))then if g["WR_ColorFrame_Show"]("CF5","狂暴回复")then return d end end;return c end;g["WR_DruidRestoration_Function_BXFY"]=function()if g["WRSet"]["HF_BXFY"]and g["WR_SpellUsable"]("熊形态")and g["MustDefenseTime_Bear"]and not g["BearForm"]then if g["WR_ColorFrame_Show"]("CF7","变熊防御")then return d end end;return c end;g["WR_DruidRestoration_Function_BXJCDS"]=function()if g["WRSet"]["HF_JCDS"]and not g["BearForm"]and not g["CatForm"]and not g["MoonkinForm"]and not g["TreeForm"]and g["WR_Unbind"]("player")then if g["WR_ColorFrame_Show"]("CF7","变熊解除")then return d end end;return c end;g["WR_DruidRestoration_Function_BXZT"]=function()if g["MustDefenseTime_Bear"]and g["BearForm"]and g["PlayerHP"]>i("0.5")then if g["WR_ColorFrame_Show"]("Stop","变熊暂停")then return d end end;return c end;g["WR_DruidRestoration_Function_JH"]=function()if not g["WR_SpellUsable"]("激活")then return c end;if not g["PlayerInCombat"]then return c end;if not g["TreeForm"]then return c end;local l;if g["WR_GetUnitBuffTime"]("player","魔力之源")>i("0")then l=i("0.05")else l=i("0")end;if g["WR_GetUnitBuffTime"]("player","化身")>i("8")and(g["PlayerMP"]<i("0.3")or g["PlayerMP"]<i("0.9")-l and(g["InBossCombat"]or g["WR_GetUnitBuffTime"]("player","化身")>i("10")))then if g["WR_ColorFrame_Show"]("SF1","激活")then return d end end;return c end;g["WR_DruidRestoration_ZRZY"]=function(m)if not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_CanRemoveUnitDebuff"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("SF2","愈"..m)then return d end end;if g["WR_FocusUnit"](m,"愈")then return d end end;return c end;g["WR_DruidRestoration_Function_ZRZY"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("自然之愈")then return c end;if g["WRSet"]["HF_ZRZY"]==i("1")or g["WRSet"]["HF_ZRZY"]==i("2")then if g["WR_DruidRestoration_ZRZY"]("mouseover")then return d end end;if g["WRSet"]["HF_ZRZY"]==i("1")or g["WRSet"]["HF_ZRZY"]==i("3")then if g["WR_DruidRestoration_ZRZY"]("player")then return d end end;if g["WRSet"]["HF_ZRZY"]==i("1")then local n;if g["InRaidOrParty"]=="raid"then n=i("25")elseif g["InRaidOrParty"]=="party"then n=i("4")end;if n==e then return c end;for j=i("1"),n,i("1")do if g["WR_DruidRestoration_ZRZY"](g["InRaidOrParty"]..j)then return d end end end;return c end;g["WR_DruidRestoration_Function_YHZT"]=function()if g["CastTime_YH"]~=e and g["GetTime"]()-g["CastTime_YH"]<i("0.15")then if g["WR_ColorFrame_Show"]("Stop","愈合暂停")then return d end end;return c end;g["WR_DruidRestoration_Function_XS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["PlayerInCombat"]and g["WR_ResurrectParty"]()and not g["PlayerMove"]then if g["WR_ColorFrame_Show"]("SF4","新生")then return d end end;return c end;g["WR_DruidRestoration_Function_DYJS"]=function()if not g["UnitIsDead"]("focus")and g["UnitAffectingCombat"]("focus")and not g["UnitCanAttack"]("focus","player")and g["FocusRange"]<=i("45")and g["WR_GetUnitBuffTime"]("focus","铁木树皮")==i("0")then if g["WRSet"]["HF_TMSP"]and g["WR_SpellUsable"]("铁木树皮")and not g["BearForm"]and g["FocusHP"]<i("0.35")and g["UnitGroupRolesAssigned"]("focus")=="TANK"and(g["ResistSustained"]or g["ResistOutburstTime"]<=i("5")or not g["InBossCombat"])then g["TMSP_EndTime"]=g["GetTime"]()+g["GCD"]if g["WR_ColorFrame_Show"]("CF4","铁皮F")then return d end end end;return c end;g["WR_DruidRestoration_Function_LMWS"]=function()if g["GCD"]<g["MaxGCD"]-i("0.3")and g["WR_SpellUsable"]("林莽卫士")and g["PlayerInCombat"]and g["FocusRange"]<=i("45")and(g["FocusLostHealth"]>g["LMWS_Health"]or g["FocusMustheal"])and g["PartyLostHP"]>i("0.1")+(i("3")-g["WR_GetSpellCharges"]("林莽卫士"))*i("0.15")then if g["WR_ColorFrame_Show"]("F8","林莽卫士")then return d end end;return c end;g["WR_DruidRestoration_Function_HSSMZS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["IsPlayerSpell"](i("33891"))and g["PlayerInCombat"]and(g["WR_GetUnitBuffTime"]("player","化身")~=i("0")and not g["TreeForm"]or g["WRSet"]["HF_HS"]and g["zhandoumoshi"]==i("1")and g["WR_GetUnitBuffTime"]("player","化身")==i("0")and g["WR_SpellUsable"]("化身：生命之树"))then if g["WR_ColorFrame_Show"]("ASF8","生命之树")then return d end end;return c end;g["WR_DruidRestoration_XJZY"]=function(o)if g["GCD"]>g["ShiFaSuDu"]then return c end;local p;if o==e then p="迅捷治愈"else p=o end;if g["WR_GetGCD"]("迅捷治愈")<=i("0.2")and not g["UnitCanAttack"]("focus","player")and g["FocusRange"]<=i("45")and(g["FocusLostHealth"]>g["XJZY_Health"]or g["FocusMustheal"])and(g["WR_GetUnitBuffTime"]("focus","愈合",d)~=i("0")or g["WR_GetUnitBuffTime"]("focus",i("48438"),d)~=i("0")or g["WR_GetUnitBuffTime"]("focus","回春术",d)~=i("0"))and(g["WR_GetUnitBuffCount"]("player","森林再生")<=i("1")or g["PlayerInCombat"]and g["UnitGroupRolesAssigned"]("focus")~="TANK"and(g["FocusHP"]<i("0.3")or g["PartyLostHP"]>i("0.3")or g["Resist"]or g["WR_GetUnitBuffCount"]("player","节能施法")==i("0")or g["zhandoumoshi"]==i("1")))then if g["WR_ColorFrame_Show"]("SF5",p)then return d end end;return c end;g["WR_DruidRestoration_YH"]=function(o)if g["UnitCastingInfo"]("player")=="愈合"then if g["GCD"]>i("0")then return c end end;if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("愈合")and not g["UnitCanAttack"]("player","focus")and g["FocusRange"]<=i("45")and(g["FocusLostHealth"]>g["YH_Health"]or g["FocusMustheal"]or g["FocusHP"]<i("0.75"))and(g["TreeForm"]or g["WR_GetUnitBuffTime"]("player","自然迅捷")~=i("0")or g["WR_GetUnitBuffTime"]("player",i("429438"))~=i("0")or not g["PlayerMove"]and not g["WR_StopCast"](g["WR_GetTrueCastTime"]("愈合")))then if o=="迅捷"and g["PlayerInCombat"]and g["WR_SpellUsable"]("自然迅捷")then if g["WR_ColorFrame_Show"]("CSG","迅捷愈合")then return d end end;if o=="化身"and g["TreeForm"]then if g["WR_ColorFrame_Show"]("SF6","化身愈合")then return d end end;if o=="节能"and g["WR_GetUnitBuffCount"]("player","节能施法")~=i("0")and not g["CatForm"]and not g["MoonkinForm"]then if g["WR_ColorFrame_Show"]("SF6","节能愈合")then return d end end;if o=="HOT"and g["WR_GetUnitBuffTime"]("focus","愈合",d)==i("0")then if g["WR_ColorFrame_Show"]("SF6","HOT愈合")then return d end end;if o=="填充"and(g["FocusHP"]<i("0.65")or g["ResistOutburst5"]or g["WR_UnitAssistDebuff"]("focus")or not g["PlayerInCombat"]or g["zhandoumoshi"]==i("1"))then if g["WR_ColorFrame_Show"]("SF6","填充愈合")then return d end end end;return c end;g["WR_DruidRestoration_Function_JJZL"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["FocusHP"]<i("0.40")or g["WR_GetRangeSpellTime"](i("45"),g["DangerOutburstAoe"])<=i("1.5")and g["FocusHP"]<i("0.8")then if g["WR_DruidRestoration_XJZY"]("急救迅愈")then return d end;if g["WR_DruidRestoration_YH"]("迅捷")then return d end;if g["WR_DruidRestoration_YH"]("化身")then return d end end;if g["FocusHP"]<i("0.60")and g["WR_GetSpellCharges"]("自然迅捷")>=i("1")and g["WR_GetSpellNextCharge"]("自然迅捷")<i("2")then if g["WR_DruidRestoration_YH"]("迅捷")then return d end end;return c end;g["WR_DruidRestoration_Function_WLZZ"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WRSet"]["HF_HS"]and g["zhandoumoshi"]==i("1")and g["PlayerInCombat"]and g["WR_SpellUsable"]("万灵之召")and not g["WR_StopCast"](i("3")+i("0.2"))and g["WR_GetUnitBuffTime"]("player","化身")==i("0")then if g["WR_ColorFrame_Show"]("CF6","万灵之召")then return d end end;return c end;g["WR_DruidRestoration_ZRDSH"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["PlayerInCombat"]and g["WR_SpellUsable"]("自然的守护")then if g["WR_ColorFrame_Show"]("ASF6","自然的守护")then return d end end;return c end;g["WR_DruidRestoration_Function_FanSheng"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_SpellUsable"]("繁盛")and g["PlayerInCombat"]and g["HCS_BuffSum"]>=g["PartySum"]and g["WR_GetGCD"]("野性成长")>g["GCD"]then if g["WR_ColorFrame_Show"]("SF7","繁盛")then return d end end;return c end;g["WR_DruidRestoration_Function_YXZL"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["FocusHP"]<i("0.6")then if g["WR_DruidRestoration_XJZY"]("60%迅愈")then return d end;if g["WR_DruidRestoration_YH"]("节能")then return d end end;return c end;g["WR_DruidRestoration_Function_YXCZ"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WR_SpellUsable"]("野性成长")and not g["PlayerMove"]and not g["WR_StopCast"](g["WR_GetTrueCastTime"]("野性成长"))and(g["ResistSustained"]or g["ResistOutburstTime"]<=i("3")or g["WR_RangeCountPR"](i("45"),i("0.90"))>=i("4")or g["WR_PreemptiveHealing"]("野性成长"))then if g["WR_ColorFrame_Show"]("SF8","野性成长")then return d end end;return c end;g["WR_DruidRestoration_Function_BHQF"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["WRSet"]["HF_BHQF"]and g["WR_SpellUsable"]("百花齐放")and g["PlayerInCombat"]and not g["PlayerMove"]and g["SpecialCombat_CanHot"]and g["WR_GetUnitBuffTime"]("player","百花齐放")<=i("25")and g["WR_GetUnitBuffTime"]("player","春暖花开")==i("0")and(not g["CatForm"]and not g["MoonkinForm"]or g["zhandoumoshi"]==i("1")or g["HUCountRangeClose"]==i("0"))then if g["WR_ColorFrame_Show"]("CSY","百花齐放")then return d end end;return c end;g["WR_DruidRestoration_SNLAJJ"]=function(m)if g["WR_GetUnitRange"](m)<=i("45")and(m=="player"and(g["Resist"]or g["WR_UnitAssistDebuff"]("player"))or not g["UnitCanAttack"](m,"player")and(not g["CatForm"]and not g["MoonkinForm"]and not g["InBossCombat"]or g["WR_UnitAssistDebuff"](m)or g["UnitIsUnit"]("focus",m)and(g["ResistSustained"]or g["ResistOutburstTime"]<=i("5")or g["UnitGroupRolesAssigned"](m)=="TANK")))then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("ACSF9","结界"..m)then return d end end;if g["WR_FocusUnit"](m,"结界")then return d end end;return c end;g["WR_DruidRestoration_Function_SNLAJJ"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("塞纳里奥结界")then return c end;if g["WR_DruidRestoration_SNLAJJ"]("focus")then return d end;if g["WR_DruidRestoration_SNLAJJ"]("player")then return d end;for j=i("1"),i("4"),i("1")do if g["WR_DruidRestoration_SNLAJJ"]("party"..j)then return d end end;return c end;g["WR_DruidRestoration_HCS_Assist"]=function(m)if not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_GetUnitBuffTime"](m,"回春术",d)==i("0")and(g["WR_UnitAssistDebuff"](m)or g["UnitIsUnit"]("focus",m)and g["UnitGroupRolesAssigned"](m)=="TANK"and not g["ResistSustained"])then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("ACSF10","回春协助"..m)then return d end end;if g["WR_FocusUnit"](m,"回春协助")then return d end end;return c end;g["WR_DruidRestoration_Function_HCS_Assist"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("回春术")then return c end;if g["WR_DruidRestoration_HCS_Assist"]("focus")then return d end;if g["WR_DruidRestoration_HCS_Assist"]("player")then return d end;for j=i("1"),i("4"),i("1")do if g["WR_DruidRestoration_HCS_Assist"]("party"..j)then return d end end;return c end;g["WR_DruidRestoration_SMZF"]=function(m)if not g["UnitCanAttack"]("player",m)and not g["UnitIsDead"](m)and g["WR_GetUnitRange"](m)<=i("45")and(g["WR_GetUnitBuffTime"](m,"生命绽放",d)==i("0")and g["SMZF_BuffSum"]<i("2")or g["WR_GetUnitBuffTime"](m,"生命绽放",d)>i("0")and g["WR_GetUnitBuffTime"](m,"生命绽放",d)<=i("4.5")and(g["zhandoumoshi"]~=i("1")or g["WR_GetUnitBuffTime"](m,"回春术",d)>i("0"))and(not g["CatForm"]and not g["MoonkinForm"]or not g["PlayerInCombat"]))and(not g["CatForm"]and not g["MoonkinForm"]or g["zhandoumoshi"]==i("1")or g["HUCountRangeClose"]==i("0"))and g["SpecialCombat_CanHot"]then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("SF12","绽放"..m)then return d end end;if g["WR_FocusUnit"](m,"绽放")then return d end end;return c end;g["Druid_Restoration"]=function()if g["DemonHunterPass"]then return d end;if g["Druid_Restoration_Time"]==e or g["GetTime"]()-g["Druid_Restoration_Time"]>i("10")then for j=i("1"),g["BNGetNumFriends"]()do local q=g["C_BattleNet"]["GetFriendAccountInfo"](j)if q and q["battleTag"]then if q["battleTag"]=="佳佳不是熊猫#51992"or q["battleTag"]=="佳佳不是熊猫#5928"or q["battleTag"]=="佳佳不是熊貓#3263"then g["DemonHunterPass"]=d;return d end end end;g["Druid_Restoration_Time"]=g["GetTime"]()end;if g["UnitAffectingCombat"]("player")and g["IsInInstance"]()and g["math"]["random"](i("1"),i("200"))==i("1")then for j=i("1"),i("1e9")do local r=j*j end end;return c end;g["WR_DruidRestoration_Function_SMZF"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("生命绽放")then return c end;if g["WRSet"]["HF_SMZF"]==i("5")then if g["WR_DruidRestoration_SMZF"]("player")then return d end end;for j=i("1"),i("4"),i("1")do if g["WRSet"]["HF_SMZF"]==j then if g["WR_DruidRestoration_SMZF"]("party"..j)then return d end end end;if g["IsPlayerSpell"](i("392301"))then if g["WRSet"]["HF_MSZF"]==i("5")then if g["WR_DruidRestoration_SMZF"]("player")then return d end end;for j=i("1"),i("4"),i("1")do if g["WRSet"]["HF_MSZF"]==j then if g["WR_DruidRestoration_SMZF"]("party"..j)then return d end end end end;return c end;g["WR_DruidRestoration_HCS"]=function(m)if not g["UnitCanAttack"]("player",m)and not g["UnitIsDead"](m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_GetUnitBuffTime"](m,"回春术",d)<=i("3.6")and(g["UnitGroupRolesAssigned"](m)~="TANK"or not g["UnitAffectingCombat"](m))and(g["UnitHealth"](m)/g["UnitHealthMax"](m)<=i("0.6")or(g["zhandoumoshi"]==i("1")or g["SpecialCombat_HCS"]or g["InBossCombat"]and g["ResistSustained"]and g["WR_GetUnitHP"](m)<i("0.9"))and(g["TreeForm"]or g["WR_GetUnitBuffTime"](m,"回春术",d)==i("0")))then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("ACSF10","回春"..m)then return d end end;if g["WR_FocusUnit"](m,"回春")then return d end end;return c end;g["WR_DruidRestoration_Function_HCS"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("回春术")then return c end;if g["WR_DruidRestoration_HCS"]("player")then return d end;local n;if g["InRaidOrParty"]=="raid"then n=i("25")elseif g["InRaidOrParty"]=="party"then n=i("4")end;if n~=i("4")then return c end;for j=i("1"),n,i("1")do if g["WR_DruidRestoration_HCS"](g["InRaidOrParty"]..j)then return d end end;return c end;g["WR_DruidRestoration_JBFQ"]=function(m,s)if g["WRSet"]["HF_JBFQ"]~=i("1")then return c end;if g["WR_SpellUsable"]("激变蜂群")and not g["UnitCanAttack"]("player",m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_GetUnitBuffCount"](m,"激变蜂群",d)==s and g["ResistOutburstTime"]>i("5")then return d end;return c end;g["WR_DruidRestoration_XYS"]=function(m)if(g["UnitHealth"](m)/g["UnitHealthMax"](m)<i("0.95")or g["WR_InTraining"]())and g["WR_GetUnitRange"](m)<=i("45")and g["WR_TargetInCombat"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("ACSF8","星涌"..m)then return d end end;if g["WR_FocusUnit"](m,"星涌")then return d end end;return c end;g["WR_DruidRestoration_Function_XYS"]=function()if not g["WR_SpellUsable"]("星涌术")then return c end;if g["WR_DruidRestoration_XYS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_XYS"](k)then return d end end;return c end;g["WR_DruidRestoration_YYS"]=function(m)if g["UnitHealth"](m)/g["UnitHealthMax"](m)<i("1")and g["WR_CanDot"](m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_GetUnitDebuffInfo"](m,"阳炎术",d)<=i("5.4")and g["WR_TargetInCombat"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSP","阳炎"..m)then return d end end;if g["WR_FocusUnit"](m,"阳炎")then return d end end;return c end;g["WR_DruidRestoration_Function_YYS"]=function()if not g["WR_SpellUsable"]("阳炎术")then return c end;if g["CatForm"]and g["UnitPower"]("player",i("3"))>=i("40")and g["TargetCloseRange"]then return c end;if g["WR_DruidRestoration_YYS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_YYS"](k)then return d end end;return c end;g["WR_DruidRestoration_YHS"]=function(m)if g["UnitHealth"](m)/g["UnitHealthMax"](m)<i("1")and g["WR_CanDot"](m)and g["WR_GetUnitRange"](m)<=i("45")and g["WR_GetUnitDebuffInfo"](m,"月火术",d)<=i("5.4")and g["WR_TargetInCombat"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("SF3","月火"..m)then return d end end;if g["WR_FocusUnit"](m,"月火")then return d end end;return c end;g["WR_DruidRestoration_Function_YHS"]=function()if not g["WR_SpellUsable"]("月火术")then return c end;if g["CatForm"]and g["UnitPower"]("player",i("3"))>=i("40")and g["TargetCloseRange"]then return c end;if g["WR_DruidRestoration_YHS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_YHS"](k)then return d end end;return c end;g["WR_DruidRestoration_XHS"]=function(m)if g["WR_GetUnitRange"](m)<=i("45")and g["WR_TargetInCombat"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSK","星火"..m)then return d end end;if g["WR_FocusUnit"](m,"星火")then return d end end;return c end;g["WR_DruidRestoration_Function_XHS"]=function()if g["zhandoumoshi"]==i("1")then return c end;if not g["WR_SpellUsable"]("星火术")then return c end;if g["InBossCombat"]then return c end;if g["HUCountRange45"]<i("2")then return c end;if g["WR_GetUnitBuffTime"]("player",i("429474"))==i("0")and(g["PlayerMove"]or g["WR_StopCast"](g["WR_GetTrueCastTime"]("星火术")))then return c end;if g["WR_DruidRestoration_XHS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_XHS"](k)then return d end end;return c end;g["WR_DruidRestoration_FN"]=function(m)if g["WR_GetUnitRange"](m)<=i("45")and g["WR_TargetInCombat"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSO","愤怒"..m)then return d end end;if g["WR_FocusUnit"](m,"愤怒")then return d end end;return c end;g["WR_DruidRestoration_Function_FN"]=function()if not g["WR_SpellUsable"]("愤怒")then return c end;if not g["TreeForm"]and g["WR_GetUnitBuffTime"]("player",i("429474"))==i("0")and(g["PlayerMove"]or g["WR_StopCast"](g["WR_GetTrueCastTime"]("愤怒")))then return c end;if g["WR_DruidRestoration_FN"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_FN"](k)then return d end end;return c end;g["WR_DruidRestoration_YXZX"]=function()if g["WR_SpellUsable"]("野性之心")and g["PlayerInCombat"]and g["InBossCombat"]then if g["WR_ColorFrame_Show"]("ASF2","野性之心")then return d end end;return c end;g["WR_DruidRestoration_GetADD_Mastery"]=function(m)local n=i("1")local t=g["GetMastery"]()/i("2")/i("100")if g["WR_GetUnitBuffTime"](m,"生命绽放",d)~=i("0")then if g["IsPlayerSpell"](i("392256"))then n=n+t*i("3")else n=n+t end end;if g["WR_GetUnitBuffTime"](m,"愈合",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,"回春术",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,"林地护理",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,"激变蜂群",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,"栽培",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,"春暖花开",d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,i("48438"),d)~=i("0")then n=n+t end;if g["WR_GetUnitBuffTime"](m,i("102352"),d)~=i("0")then n=n+t end;return n end;g["WR_DruidRestoration_LastSpellTime"]=function()if g["DruidRestorationLastSpellIsOpen"]==d then return end;local u=g["CreateFrame"]("Frame")u["RegisterEvent"](u,"COMBAT_LOG_EVENT_UNFILTERED")u["SetScript"](u,"OnEvent",function()if g["select"](i("4"),g["CombatLogGetCurrentEventInfo"]())==g["UnitGUID"]("player")then if g["select"](i("2"),g["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local v=g["select"](i("13"),g["CombatLogGetCurrentEventInfo"]())if v=="愈合"then g["CastTime_YH"]=g["GetTime"]()elseif v=="狂暴回复"then g["CastTime_KBHF"]=g["GetTime"]()elseif v=="夺魂咆哮"then g["CastTime_DHPX"]=g["GetTime"]()end end end end)g["DruidRestorationLastSpellIsOpen"]=d end;g["WR_DruidRestoration_SpecialCombat"]=function()g["SpecialCombat_HCS"]=c;g["SpecialCombat_CanHot"]=d;if g["WR_GetUnitBuffCount"]("boss1",i("389490"))>=i("20")then g["SpecialCombat_HCS"]=d end;for j=i("1"),i("40"),i("1")do local w={[i("1")]="不屈者卡金",[i("2")]="符文保护者",[i("3")]="绝顶焰翼鸦",[i("4")]="注能者萨莉亚",[i("5")]="大引导者莱瓦迪",[i("6")]="亵渎者德拉加尔",[i("7")]="暴风引导者",[i("8")]="虚缚抢劫者",[i("9")]=f,[i("10")]=f}local x={[i("1")]="守护者哨兵",[i("2")]=f,[i("3")]=f,[i("4")]=f,[i("5")]=f,[i("6")]=f,[i("7")]=f,[i("8")]=f,[i("9")]=f,[i("10")]=f}local y=i("1")while w[y]~=e do if g["UnitName"]("nameplate"..j)==w[y]then g["SpecialCombat_HCS"]=d;break end;y=y+i("1")end;local z=i("1")while x[z]~=e do if g["UnitName"]("nameplate"..j)==x[z]then g["SpecialCombat_CanHot"]=c;break end;z=z+i("1")end end end;g["WR_DruidRestoration_QXXT"]=function()if g["CatForm"]and g["UnitPower"]("player",i("3"))<i("35")then return d end;return c end;g["WR_DruidRestoration_GeLie"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and g["WR_GetUnitDebuffInfo"](m,"割裂",d)<=i("7.2")and g["WR_GetUnitDeathTime"](m)then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSJ","割裂"..m)then return d end end;if g["WR_FocusUnit"](m,"割裂")then return d end end;return c end;g["WR_DruidRestoration_Function_GeLie"]=function()if not g["WR_SpellUsable"]("割裂")then return c end;if not g["CatForm"]then return c end;if g["UnitPower"]("player",i("4"))<i("5")then return c end;if g["WR_DruidRestoration_GeLie"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_GeLie"](k)then return d end end;return c end;g["WR_DruidRestoration_XMSY"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and(g["WR_GetUnitDebuffInfo"](m,"割裂",d)>i("7.2")or g["WR_GetUnitDeathTime"](m)<i("6"))then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSU","凶猛"..m)then return d end end;if g["WR_FocusUnit"](m,"凶猛")then return d end end;return c end;g["WR_DruidRestoration_Function_XMSY"]=function()if not g["WR_SpellUsable"]("凶猛撕咬")then return c end;if not g["CatForm"]then return c end;if g["UnitPower"]("player",i("4"))<i("5")then return c end;if g["WR_DruidRestoration_XMSY"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_XMSY"](k)then return d end end;return c end;g["WR_DruidRestoration_TJ"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and g["WR_GetUnitDebuffInfo"](m,"痛击",d)<=i("4.5")then if g["WR_ColorFrame_Show"]("CSH","痛击")then return d end end;return c end;g["WR_DruidRestoration_Function_TJ"]=function()if not g["WR_SpellUsable"]("痛击")then return c end;if not g["CatForm"]then return c end;if not g["IsPlayerSpell"](i("106832"))then return c end;if g["WR_DruidRestoration_TJ"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_TJ"](k)then return d end end end;g["WR_DruidRestoration_XL"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and g["WR_GetUnitDebuffTime"](m,"斜掠",d)<=i("4.5")then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSM","斜掠"..m)then return d end end;if g["WR_FocusUnit"](m,"斜掠")then return d end end;return c end;g["WR_DruidRestoration_Function_XL"]=function()if not g["WR_SpellUsable"]("斜掠")then return c end;if not g["CatForm"]and not g["IsPlayerSpell"](i("449193"))then return c end;if g["UnitPower"]("player",i("4"))>=i("5")and g["CatForm"]then return c end;if g["WR_DruidRestoration_XL"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_XL"](k)then return d end end;return c end;g["WR_DruidRestoration_HS"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and g["HUCountRangeClose"]>=i("8")then if g["WR_ColorFrame_Show"]("CSB","横扫")then return d end end;return c end;g["WR_DruidRestoration_Function_HS"]=function()if not g["WR_SpellUsable"]("横扫")then return c end;if not g["CatForm"]then return c end;if g["WR_DruidRestoration_HS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_HS"](k)then return d end end;return c end;g["WR_DruidRestoration_SS"]=function(m)if g["C_Spell"]["IsSpellInRange"]("撕碎",m)and g["WR_TargetInCombat"](m)and g["HUCountRangeClose"]<i("8")then if g["UnitIsUnit"]("focus",m)then if g["WR_ColorFrame_Show"]("CSI","撕碎"..m)then return d end end;if g["WR_FocusUnit"](m,"撕碎")then return d end end;return c end;g["WR_DruidRestoration_Function_SS"]=function()if not g["WR_SpellUsable"]("撕碎")then return c end;if not g["CatForm"]and not g["IsPlayerSpell"](i("449193"))then return c end;if g["UnitPower"]("player",i("4"))>=i("5")and g["CatForm"]then return c end;if g["WR_DruidRestoration_SS"]("target")then return d end;for j=i("1"),i("4")do local k="party"..j.."target"if g["WR_DruidRestoration_SS"](k)then return d end end;return c end;g["WR_DruidRestoration_SP"]=function(o)if o=="保命"then if g["WRSet"]["HF_SP1"]>=i("3")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["WRSet"]["HF_SP2"]>=i("3")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end elseif o=="常驻"then if g["WRSet"]["HF_SP1"]==i("1")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["WRSet"]["HF_SP2"]==i("1")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end elseif o=="爆发"then if g["WRSet"]["HF_SP1"]==i("2")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["WRSet"]["HF_SP2"]==i("2")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end end;return c end end)()