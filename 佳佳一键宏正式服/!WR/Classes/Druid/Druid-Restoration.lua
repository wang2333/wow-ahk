local a=48;local b=92;local c=36;local d=20;local e=34;local f=0==1;local g=not f;local h=nil;local i=""local j=_G;local k=_ENV;local l=j["tonumber"]return(function(...)j["WR_DruidRestoration"]=function()j["WR_DebugTime"](l("0"))if j["GetSpecialization"]()~=l("4")then return end;j["ShiFaSuDu"]=l("0.05")+j["WRSet"]["HF_SFSD"]*l("0.05")j["GCD"]=j["WR_GetGCD"]("野性印记")j["MaxGCD"]=j["WR_GetMaxGCD"](l("1.5"))j["PlayerInCombat"]=j["UnitAffectingCombat"]("player")j["PlayerHP"]=j["UnitHealth"]("player")/j["UnitHealthMax"]("player")j["FocusHP"]=j["WR_GetUnitHP"]("focus")j["PlayerMove"]=j["WR_PlayerMove"]()j["PlayerMP"]=j["WR_GetUnitMP"]("player")j["PartyLostHP"]=j["WR_PartyLostHP"]()j["TargetCloseRange"]=j["C_Spell"]["IsSpellInRange"]("撕碎","target")j["TargetRange"]=j["WR_GetUnitRange"]("target")j["FocusRange"]=j["WR_GetUnitRange"]("focus")j["FocusMustheal"]=j["WR_Mustheal"]("focus")j["FocusLostHealth"]=j["WR_GetUnitLostHealth"]("focus")j["CatForm"]=j["WR_GetUnitBuffTime"]("player","猎豹形态")~=l("0")j["MoonkinForm"]=j["WR_GetUnitBuffTime"]("player","枭兽形态")~=l("0")j["BearForm"]=j["WR_GetUnitBuffTime"]("player","熊形态")~=l("0")j["TreeForm"]=j["WR_GetUnitBuffTime"]("player","化身：生命之树")~=l("0")j["TargetInCombat"]=j["WR_TargetInCombat"]("target")j["InBossCombat"]=j["WR_InBossCombat"]()j["InRaidOrParty"]=j["WR_GetInRaidOrParty"]()j["HUCountRangeClose"]=j["WR_GetSpellRangeHarmUnitCount"]("撕碎",f)j["HUCountRange45"]=j["WR_GetRangeHarmUnitCount"](l("45"),not j["WR_InTraining"]())j["ResistOutburstTime"]=j["WR_ResistOutburstTime"]()j["MustDefenseTime_Bear"]=j["ResistOutburstTime"]<=j["GCD"]+j["MaxGCD"]j["Resist"]=f;j["ResistSustained"]=j["WR_ResistSustained"]()j["MustDefenseTime"]=j["WR_MustDefenseTime"]()if j["ResistSustained"]or j["ResistOutburstTime"]<=l("5")or j["MustDefenseTime"]<=l("5")then j["Resist"]=g end;j["WR_DruidRestoration_SpecialCombat"]()j["WR_DruidRestoration_LastSpellTime"]()j["PartySum"]=l("1")j["HCS_BuffSum"]=l("0")j["SMZF_BuffSum"]=l("0")j["SMZF_BuffMinTime"]=l("15")if j["WR_GetUnitBuffTime"]("player","生命绽放",g)>l("0")then j["SMZF_BuffSum"]=j["SMZF_BuffSum"]+l("1")if j["WR_GetUnitBuffTime"]("player","生命绽放",g)<j["SMZF_BuffMinTime"]then j["SMZF_BuffMinTime"]=j["WR_GetUnitBuffTime"]("player","生命绽放",g)end end;if j["WR_GetUnitBuffTime"]("player","回春术",g)>l("0")then j["HCS_BuffSum"]=j["HCS_BuffSum"]+l("1")end;if j["WR_DruidRefreshTime"]==h then j["WR_DruidRefreshTime"]=j["GetTime"]()j["MasteryADD"]=j["WR_DruidRestoration_GetADD_Mastery"]("focus")j["XJZY_Health"]=j["WR_GetSpellValue"]("迅捷治愈","恢复","点生命值")+j["WR_GetSpellValue"]("迅捷治愈","回复"," 点生命值")j["XJZY_Health"]=j["XJZY_Health"]*j["MasteryADD"]j["YH_Health"]=j["WR_GetSpellValue"]("愈合","目标恢复","点生命值")+j["WR_GetSpellValue"]("愈合","额外恢复","点生命值")if j["WR_GetUnitBuffTime"]("player","丛林之魂")>j["GCD"]+j["WR_GetTrueCastTime"]("愈合")+l("0.2")then j["YH_Health"]=j["YH_Health"]*(l("1")+l("1.5"))end;j["YH_Health"]=j["YH_Health"]*j["MasteryADD"]j["LMWS_Health"]=j["WR_GetSpellValue"]("林莽卫士","迅捷治愈，为其恢复","点生命值")j["LMWS_Health"]=j["LMWS_Health"]*j["MasteryADD"]if j["PlayerInCombat"]then if j["UnitGroupRolesAssigned"](j["Unit"])~="TANK"then j["XJZY_Health"]=j["XJZY_Health"]*l("1.3")if j["WR_GetUnitBuffCount"]("player","节能施法")==l("0")then j["YH_Health"]=j["YH_Health"]*l("2.5")elseif j["WR_GetUnitBuffCount"]("player","节能施法")>=l("1")then j["YH_Health"]=j["YH_Health"]*l("1.3")end;j["LMWS_Health"]=j["LMWS_Health"]*l("1.5")else j["XJZY_Health"]=j["XJZY_Health"]*l("3")j["YH_Health"]=j["YH_Health"]*l("3")j["LMWS_Health"]=j["LMWS_Health"]*l("3")end end;if not j["UnitAffectingCombat"]("player")then for m=l("1"),l("4"),l("1")do local n="party"..m;if j["WR_GetUnitBuffTime"](n,"生命绽放",g)>l("0")then j["SMZF_BuffSum"]=j["SMZF_BuffSum"]+l("1")if j["WR_GetUnitBuffTime"](n,"生命绽放",g)<j["SMZF_BuffMinTime"]then j["SMZF_BuffMinTime"]=j["WR_GetUnitBuffTime"](n,"生命绽放",g)end end;if j["WR_GetUnitBuffTime"](n,"回春术",g)>l("0")then j["HCS_BuffSum"]=j["HCS_BuffSum"]+l("1")end;if not j["UnitIsDead"](n)and not j["UnitCanAttack"]("player",n)and j["UnitGroupRolesAssigned"](n)~="TANK"then j["PartySum"]=j["PartySum"]+l("1")end end;for m=l("1"),l("4"),l("1")do local n="party"..m;if j["UnitExists"](n)and j["UnitName"](n)~=h then if j["HF_SMZF_menuItems"][m]["text"]~=j["UnitName"](n)then j["HF_SMZF_UpdateMenuItemText"](m,j["UnitName"](n))j["HF_MSZF_UpdateMenuItemText"](m,j["UnitName"](n))end else if j["HF_SMZF_menuItems"][m]["text"]~=i then j["HF_SMZF_UpdateMenuItemText"](m,i)j["HF_MSZF_UpdateMenuItemText"](m,i)end end end;if j["HF_SMZF_menuItems"][l("5")]["text"]~=j["UnitName"]("player")then j["HF_SMZF_UpdateMenuItemText"](l("5"),j["UnitName"]("player"))j["HF_MSZF_UpdateMenuItemText"](l("5"),j["UnitName"]("player"))end end elseif j["GetTime"]()-j["WR_DruidRefreshTime"]>=l("1")then j["WR_DruidRefreshTime"]=h end;j["Druid_Restoration"]()if j["MSG"]==l("1")then end;if j["WR_PriorityCheck"]()then return end;if j["WR_DruidRestoration_Function_StopCasting"]()then return end;if j["WR_DruidRestoration_Function_YD"]()then return end;if j["WR_DruidRestoration_Function_GL"]()then return end;if j["WR_DruidRestoration_SP"]("保命")then return g end;if j["WR_ZLS"](j["WRSet"]["HF_ZLS"])then return g end;if j["WR_ZLYS"](j["WRSet"]["HF_ZLYS"])then return g end;if j["WR_ZLYS2"](j["WRSet"]["HF_ZLYS"])then return g end;if j["WR_DruidRestoration_Function_ZWJS"]()then return end;if j["WR_DruidRestoration_Function_CancelForm"]()then return end;if j["WR_DruidRestoration_Function_KBHF"]()then return end;if j["WR_Druid_Function_FS"]()then return end;if j["WR_DruidRestoration_Function_BXFY"]()then return end;if j["WR_DruidRestoration_Function_BXJCDS"]()then return end;if j["WR_DruidRestoration_Function_BXZT"]()then return end;if j["WR_Druid_Function_AF"]()then return end;if j["WR_Druid_Function_DHPX"]()then return end;if j["WR_Druid_Function_YXYJ"]()then return end;if j["WR_Druid_Function_YTTJ"]()then return end;if j["WR_DruidRestoration_Function_JH"]()then return end;if j["WR_DruidRestoration_Function_ZRZY"]()then return end;if j["WR_DruidRestoration_Function_YHZT"]()then return end;if j["WR_DruidRestoration_Function_XS"]()then return end;if j["WR_DruidRestoration_SP"]("常驻")then return g end;if j["WR_DruidRestoration_SP"]("爆发")then return g end;if j["WR_FocusMaxWeightUnit"]()then return end;if j["WR_DruidRestoration_Function_DYJS"]()then return end;if j["WR_DruidRestoration_Function_LMWS"]()then return end;if j["WR_DruidRestoration_Function_HSSMZS"]()then return end;if j["WR_DruidRestoration_Function_JJZL"]()then return end;if j["WR_DruidRestoration_TSXD"]()then return end;if j["WR_DruidRestoration_ZRDSH"]()then return end;if j["WR_DruidRestoration_Function_WLZZ"]()then return end;if j["WR_DruidRestoration_Function_FanSheng"]()then return end;if j["WR_DruidRestoration_Function_YXCZ"]()then return end;if j["WR_DruidRestoration_Function_YXZL"]()then return end;if j["WR_DruidRestoration_Function_BHQF"]()then return end;if j["WR_DruidRestoration_XJZY"]()then return g end;if j["WR_DruidRestoration_Function_SNLAJJ"]()then return end;if j["WR_DruidRestoration_YH"]("节能")then return g end;if j["WR_DruidRestoration_Function_HCS_Assist"]()then return end;if j["WR_DruidRestoration_Function_SMZF"]()then return end;if j["WR_DruidRestoration_YH"]("HOT")then return g end;if j["WR_DruidRestoration_Function_HCS"]()then return end;if j["WR_DruidRestoration_YH"]("填充")then return g end;if j["WR_DruidRestoration_Function_Fight"]()then return end;j["WR_HideColorFrame"](j["zhandoumoshi"])end;j["WR_DruidRestoration_TSXD"]=function()if j["IsPlayerSpell"](l("426784"))and j["IsPlayerSpell"](l("158504"))and j["zhandoumoshi"]==l("1")then if j["WR_GetUnitBuffTime"]("player","野性之心")==l("0")and j["WR_GetUnitBuffTime"]("player",l("429474"))>j["GCD"]+j["MaxGCD"]and j["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")==l("0")then if j["WR_DruidRestoration_Function_XYS"]()then return g end end;if j["WR_GetUnitBuffTime"]("player","野性之心")>j["GCD"]and j["WR_GetUnitBuffTime"]("player",l("429474"))>j["GCD"]then if j["WR_DruidRestoration_Function_XHS"]()then return g end;if j["WR_DruidRestoration_Function_FN"]()then return g end end end;return f end;j["WR_DruidRestoration_Function_Fight"]=function()if j["GCD"]>l("0")then return f end;if j["UnitCastingInfo"]("boss1")=="宇宙奇点"then return f end;if j["WR_DruidRestoration_YXZX"]()then return g end;if j["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")>l("6")or not j["IsPlayerSpell"](l("426784"))then if j["WR_DruidRestoration_Function_XYS"]()then return g end end;if j["WR_GetUnitBuffTime"]("player",l("429474"))>j["GCD"]then if j["WR_DruidRestoration_Function_XHS"]()then return g end;if j["WR_DruidRestoration_Function_FN"]()then return g end end;if not j["IsPlayerSpell"](l("439528"))then if j["WR_DruidRestoration_Function_YYS"]()then return g end;if j["HUCountRange45"]<l("3")then if j["WR_DruidRestoration_Function_YHS"]()then return g end end end;if j["WR_GetUnitBuffTime"]("player","化身")==l("0")and(j["WRSet"]["HF_LBXT"]==l("2")or j["WRSet"]["HF_LBXT"]==l("1")and j["zhandoumoshi"]~=l("1"))then if j["WR_SpellUsable"]("猎豹形态")and not j["CatForm"]and not j["TreeForm"]and j["HUCountRangeClose"]>=l("1")and not j["ResistSustained"]and j["ResistOutburstTime"]>l("5")and j["SMZF_BuffMinTime"]>l("2")then if j["WR_DruidRestoration_Function_XL"]()then return g end;if j["WR_DruidRestoration_Function_SS"]()then return g end;if not j["IsPlayerSpell"](l("449193"))then if j["WR_ColorFrame_Show"]("CF8","猎豹形态")then return g end end end;if j["WR_DruidRestoration_Function_GeLie"]()then return g end;if j["WR_DruidRestoration_Function_XMSY"]()then return g end;if j["WR_DruidRestoration_Function_XL"]()then return g end;if j["WR_DruidRestoration_Function_TJ"]()then return g end;if j["WR_DruidRestoration_Function_SS"]()then return g end;if j["WR_DruidRestoration_Function_HS"]()then return g end end;if j["WR_DruidRestoration_Function_YYS"]()then return g end;if j["WR_DruidRestoration_Function_YHS"]()then return g end;if j["WR_DruidRestoration_Function_XHS"]()then return g end;if j["WR_DruidRestoration_Function_FN"]()then return g end;return f end;j["WR_DruidRestoration_Function_StopCasting"]=function()if j["UnitCastingInfo"]("player")~=h and(j["UnitCastingInfo"]("player")=="新生"and not j["WR_PartyIsDeath"]()or j["UnitCastingInfo"]("player")=="星火术"and(j["WRSet"]["HF_BXFY"]and j["MustDefenseTime_Bear"]and not j["BearForm"]or j["FocusHP"]<l("0.60")and j["Resist"]))then if j["WR_ColorFrame_Show"]("CSN","停止施法")then return g end end;return f end;j["WR_DruidRestoration_Function_YD"]=function()if j["InRaidOrParty"]=="raid"then return f end;if j["WR_Escape"]()and j["WR_SpellUsable"]("影遁")then if j["WR_ColorFrame_Show"]("ASF1","影遁")then return g end end;return f end;j["WR_DruidRestoration_Function_GL"]=function()if j["WRSet"]["HF_GL"]~=l("6")and(j["PlayerHP"]<j["WRSet"]["HF_GL"]/l("10")or j["MustDefenseTime"]<=l("1")and j["PlayerHP"]<l("0.8"))and j["PlayerInCombat"]and j["WR_SpellUsable"]("甘霖")and(j["ZLS_EndTime"]==h or j["GetTime"]()-j["ZLS_EndTime"]>l("0.5"))and(j["ZLYS_EndTime"]==h or j["GetTime"]()-j["ZLYS_EndTime"]>l("0.5"))then j["GL_EndTime"]=j["GetTime"]()+j["GCD"]if j["WR_ColorFrame_Show"]("CF2","甘霖")then return g end end;return f end;j["WR_DruidRestoration_Function_ZLS"]=function()if j["WRSet"]["HF_ZLS"]~=l("5")and(j["PlayerHP"]<j["WRSet"]["HF_ZLS"]/l("10")or j["MustDefenseTime"]<=l("1")and j["PlayerHP"]<l("0.8"))and j["PlayerInCombat"]and j["WR_Use_ZLS"]()and(j["GL_EndTime"]==h or j["GetTime"]()-j["GL_EndTime"]>l("0.5"))and(j["ZLYS_EndTime"]==h or j["GetTime"]()-j["ZLYS_EndTime"]>l("0.5"))then j["ZLS_EndTime"]=j["GetTime"]()+j["GCD"]if j["WR_ColorFrame_Show"]("CSF","治疗石")then return g end end;return f end;j["WR_DruidRestoration_Function_ZLYS"]=function()if j["WRSet"]["HF_ZLYS"]~=l("5")and(j["PlayerHP"]<j["WRSet"]["HF_ZLYS"]/l("10")or j["MustDefenseTime"]<=l("1")and j["PlayerHP"]<l("0.8"))and j["PlayerInCombat"]and j["WR_Use_ZLYS"]()and(j["GL_EndTime"]==h or j["GetTime"]()-j["GL_EndTime"]>l("0.5"))and(j["ZLS_EndTime"]==h or j["GetTime"]()-j["ZLS_EndTime"]>l("0.5"))then j["ZLYS_EndTime"]=j["GetTime"]()+j["GCD"]if j["WR_ColorFrame_Show"]("CST","治疗药水")then return g end end;return f end;j["WR_DruidRestoration_Function_ZWJS"]=function()if j["WR_GetUnitBuffTime"]("player","树皮术")==l("0")and(j["MustDefenseTime"]<l("5")or j["InBossCombat"]and j["ResistSustained"]and j["PlayerHP"]<l("0.95"))then if j["WRSet"]["HF_SPS"]and j["UnitAffectingCombat"]("player")and j["WR_SpellUsable"]("树皮术")and(j["TMSP_EndTime"]==h or j["GetTime"]()-j["TMSP_EndTime"]>l("0.5"))then j["SPS_EndTime"]=j["GetTime"]()+j["GCD"]if j["WR_ColorFrame_Show"]("CF3","树皮术")then return g end end end;return f end;j["WR_DruidRestoration_Function_CancelForm"]=function()if j["WRSet"]["HF_JCDS"]and j["WR_Unbind"]("player")and(j["BearForm"]or j["CatForm"]or j["TreeForm"]and j["IsPlayerSpell"](l("33891")))then if j["WR_ColorFrame_Show"]("CF10","解除变形")then return g end end;return f end;j["WR_DruidRestoration_Function_KBHF"]=function()if j["BearForm"]and j["IsPlayerSpell"](l("22842"))and j["WR_SpellUsable"]("狂暴回复")and(j["CastTime_KBHF"]==h or j["GetTime"]()-j["CastTime_KBHF"]>l("3"))and(j["CastTime_DHPX"]==h or j["GetTime"]()-j["CastTime_DHPX"]>l("3"))then if j["WR_ColorFrame_Show"]("CF5","狂暴回复")then return g end end;return f end;j["WR_DruidRestoration_Function_BXFY"]=function()if j["WRSet"]["HF_BXFY"]and j["WR_SpellUsable"]("熊形态")and j["MustDefenseTime_Bear"]and not j["BearForm"]then if j["WR_ColorFrame_Show"]("CF7","变熊防御")then return g end end;return f end;j["WR_DruidRestoration_Function_BXJCDS"]=function()if j["WRSet"]["HF_JCDS"]and not j["BearForm"]and not j["CatForm"]and not j["MoonkinForm"]and not j["TreeForm"]and j["WR_Unbind"]("player")then if j["WR_ColorFrame_Show"]("CF7","变熊解除")then return g end end;return f end;j["WR_DruidRestoration_Function_BXZT"]=function()if j["MustDefenseTime_Bear"]and j["BearForm"]and j["PlayerHP"]>l("0.5")then if j["WR_ColorFrame_Show"]("Stop","变熊暂停")then return g end end;return f end;j["WR_DruidRestoration_Function_JH"]=function()if not j["WR_SpellUsable"]("激活")then return f end;if not j["PlayerInCombat"]then return f end;if not j["TreeForm"]then return f end;local o;if j["WR_GetUnitBuffTime"]("player","魔力之源")>l("0")then o=l("0.05")else o=l("0")end;if j["WR_GetUnitBuffTime"]("player","化身")>l("8")and(j["PlayerMP"]<l("0.3")or j["PlayerMP"]<l("0.9")-o and(j["InBossCombat"]or j["WR_GetUnitBuffTime"]("player","化身")>l("10")))then if j["WR_ColorFrame_Show"]("SF1","激活")then return g end end;return f end;j["WR_DruidRestoration_ZRZY"]=function(p)if not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_CanRemoveUnitDebuff"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("SF2","愈"..p)then return g end end;if j["WR_FocusUnit"](p,"愈")then return g end end;return f end;j["WR_DruidRestoration_Function_ZRZY"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("自然之愈")then return f end;if j["WRSet"]["HF_ZRZY"]==l("1")or j["WRSet"]["HF_ZRZY"]==l("2")then if j["WR_DruidRestoration_ZRZY"]("mouseover")then return g end end;if j["WRSet"]["HF_ZRZY"]==l("1")or j["WRSet"]["HF_ZRZY"]==l("3")then if j["WR_DruidRestoration_ZRZY"]("player")then return g end end;if j["WRSet"]["HF_ZRZY"]==l("1")then local q;if j["InRaidOrParty"]=="raid"then q=l("25")elseif j["InRaidOrParty"]=="party"then q=l("4")end;if q==h then return f end;for m=l("1"),q,l("1")do if j["WR_DruidRestoration_ZRZY"](j["InRaidOrParty"]..m)then return g end end end;return f end;j["WR_DruidRestoration_Function_YHZT"]=function()if j["CastTime_YH"]~=h and j["GetTime"]()-j["CastTime_YH"]<l("0.15")then if j["WR_ColorFrame_Show"]("Stop","愈合暂停")then return g end end;return f end;j["WR_DruidRestoration_Function_XS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["PlayerInCombat"]and j["WR_ResurrectParty"]()and not j["PlayerMove"]then if j["WR_ColorFrame_Show"]("SF4","新生")then return g end end;return f end;j["WR_DruidRestoration_Function_DYJS"]=function()if not j["UnitIsDead"]("focus")and j["UnitAffectingCombat"]("focus")and not j["UnitCanAttack"]("focus","player")and j["FocusRange"]<=l("45")and j["WR_GetUnitBuffTime"]("focus","铁木树皮")==l("0")then if j["WRSet"]["HF_TMSP"]and j["WR_SpellUsable"]("铁木树皮")and not j["BearForm"]and j["FocusHP"]<l("0.35")and j["UnitGroupRolesAssigned"]("focus")=="TANK"and(j["ResistSustained"]or j["ResistOutburstTime"]<=l("5")or not j["InBossCombat"])then j["TMSP_EndTime"]=j["GetTime"]()+j["GCD"]if j["WR_ColorFrame_Show"]("CF4","铁皮F")then return g end end end;return f end;j["WR_DruidRestoration_Function_LMWS"]=function()if j["GCD"]<j["MaxGCD"]-l("0.3")and j["WR_SpellUsable"]("林莽卫士")and j["PlayerInCombat"]and j["FocusRange"]<=l("45")and(j["FocusLostHealth"]>j["LMWS_Health"]or j["FocusMustheal"])and j["PartyLostHP"]>l("0.1")+(l("3")-j["WR_GetSpellCharges"]("林莽卫士"))*l("0.15")then if j["WR_ColorFrame_Show"]("F8","林莽卫士")then return g end end;return f end;j["WR_DruidRestoration_Function_HSSMZS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["IsPlayerSpell"](l("33891"))and j["PlayerInCombat"]and(j["WR_GetUnitBuffTime"]("player","化身")~=l("0")and not j["TreeForm"]or j["WRSet"]["HF_HS"]and j["zhandoumoshi"]==l("1")and j["WR_GetUnitBuffTime"]("player","化身")==l("0")and j["WR_SpellUsable"]("化身：生命之树"))then if j["WR_ColorFrame_Show"]("ASF8","生命之树")then return g end end;return f end;j["WR_DruidRestoration_XJZY"]=function(r)if j["GCD"]>j["ShiFaSuDu"]then return f end;local s;if r==h then s="迅捷治愈"else s=r end;if j["WR_GetGCD"]("迅捷治愈")<=l("0.2")and not j["UnitCanAttack"]("focus","player")and j["FocusRange"]<=l("45")and(j["FocusLostHealth"]>j["XJZY_Health"]or j["FocusMustheal"])and(j["WR_GetUnitBuffTime"]("focus","愈合",g)~=l("0")or j["WR_GetUnitBuffTime"]("focus",l("48438"),g)~=l("0")or j["WR_GetUnitBuffTime"]("focus","回春术",g)~=l("0"))and(j["WR_GetUnitBuffCount"]("player","森林再生")<=l("1")or j["PlayerInCombat"]and j["UnitGroupRolesAssigned"]("focus")~="TANK"and(j["FocusHP"]<l("0.3")or j["PartyLostHP"]>l("0.3")or j["Resist"]or j["WR_GetUnitBuffCount"]("player","节能施法")==l("0")or j["zhandoumoshi"]==l("1")))then if j["WR_ColorFrame_Show"]("SF5",s)then return g end end;return f end;j["WR_DruidRestoration_YH"]=function(r)if j["UnitCastingInfo"]("player")=="愈合"then if j["GCD"]>l("0")then return f end end;if j["GCD"]<=j["ShiFaSuDu"]and j["WR_SpellUsable"]("愈合")and not j["UnitCanAttack"]("player","focus")and j["FocusRange"]<=l("45")and(j["FocusLostHealth"]>j["YH_Health"]or j["FocusMustheal"]or j["FocusHP"]<l("0.75"))and(j["TreeForm"]or j["WR_GetUnitBuffTime"]("player","自然迅捷")~=l("0")or j["WR_GetUnitBuffTime"]("player",l("429438"))~=l("0")or not j["PlayerMove"]and not j["WR_StopCast"](j["WR_GetTrueCastTime"]("愈合")))then if r=="迅捷"and j["PlayerInCombat"]and j["WR_SpellUsable"]("自然迅捷")then if j["WR_ColorFrame_Show"]("CSG","迅捷愈合")then return g end end;if r=="化身"and j["TreeForm"]then if j["WR_ColorFrame_Show"]("SF6","化身愈合")then return g end end;if r=="节能"and j["WR_GetUnitBuffCount"]("player","节能施法")~=l("0")and not j["CatForm"]and not j["MoonkinForm"]then if j["WR_ColorFrame_Show"]("SF6","节能愈合")then return g end end;if r=="HOT"and j["WR_GetUnitBuffTime"]("focus","愈合",g)==l("0")then if j["WR_ColorFrame_Show"]("SF6","HOT愈合")then return g end end;if r=="填充"and(j["FocusHP"]<l("0.65")or j["ResistOutburst5"]or j["WR_UnitAssistDebuff"]("focus")or not j["PlayerInCombat"]or j["zhandoumoshi"]==l("1"))then if j["WR_ColorFrame_Show"]("SF6","填充愈合")then return g end end end;return f end;j["WR_DruidRestoration_Function_JJZL"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["FocusHP"]<l("0.40")or j["WR_GetRangeSpellTime"](l("45"),j["DangerOutburstAoe"])<=l("1.5")and j["FocusHP"]<l("0.8")then if j["WR_DruidRestoration_XJZY"]("急救迅愈")then return g end;if j["WR_DruidRestoration_YH"]("迅捷")then return g end;if j["WR_DruidRestoration_YH"]("化身")then return g end end;return f end;j["WR_DruidRestoration_Function_WLZZ"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["WRSet"]["HF_HS"]and j["zhandoumoshi"]==l("1")and j["PlayerInCombat"]and j["WR_SpellUsable"]("万灵之召")and not j["WR_StopCast"](l("3")+l("0.2"))and j["WR_GetUnitBuffTime"]("player","化身")==l("0")then if j["WR_ColorFrame_Show"]("CF6","万灵之召")then return g end end;return f end;j["WR_DruidRestoration_ZRDSH"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["zhandoumoshi"]==l("1")and j["PlayerInCombat"]and j["WR_SpellUsable"]("自然的守护")then if j["WR_ColorFrame_Show"]("ASF6","自然的守护")then return g end end;return f end;j["WR_DruidRestoration_Function_FanSheng"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_SpellUsable"]("繁盛")and j["PlayerInCombat"]and j["HCS_BuffSum"]>=j["PartySum"]and j["WR_GetGCD"]("野性成长")>j["GCD"]then if j["WR_ColorFrame_Show"]("SF7","繁盛")then return g end end;return f end;j["WR_DruidRestoration_Function_YXZL"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["FocusHP"]<l("0.6")then if j["WR_DruidRestoration_XJZY"]("60%迅愈")then return g end;if j["WR_DruidRestoration_YH"]("节能")then return g end end;return f end;j["WR_DruidRestoration_Function_YXCZ"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WR_SpellUsable"]("野性成长")and not j["PlayerMove"]and not j["WR_StopCast"](j["WR_GetTrueCastTime"]("野性成长"))and(j["ResistSustained"]or j["ResistOutburstTime"]<=l("3")or j["WR_RangeCountPR"](l("45"),l("0.90"))>=l("4")or j["WR_PreemptiveHealing"]("野性成长"))then if j["WR_ColorFrame_Show"]("SF8","野性成长")then return g end end;return f end;j["WR_DruidRestoration_Function_BHQF"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if j["WRSet"]["HF_BHQF"]and j["WR_SpellUsable"]("百花齐放")and j["PlayerInCombat"]and not j["PlayerMove"]and j["SpecialCombat_CanHot"]and j["WR_GetUnitBuffTime"]("player","百花齐放")<=l("25")and j["WR_GetUnitBuffTime"]("player","春暖花开")==l("0")and(not j["CatForm"]and not j["MoonkinForm"]or j["zhandoumoshi"]==l("1")or j["HUCountRangeClose"]==l("0"))then if j["WR_ColorFrame_Show"]("CSY","百花齐放")then return g end end;return f end;j["WR_DruidRestoration_SNLAJJ"]=function(p)if j["WR_GetUnitRange"](p)<=l("45")and(p=="player"and(j["Resist"]or j["WR_UnitAssistDebuff"]("player"))or not j["UnitCanAttack"](p,"player")and(not j["CatForm"]and not j["MoonkinForm"]and not j["InBossCombat"]or j["WR_UnitAssistDebuff"](p)or j["UnitIsUnit"]("focus",p)and(j["ResistSustained"]or j["ResistOutburstTime"]<=l("5")or j["UnitGroupRolesAssigned"](p)=="TANK")))then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("ACSF9","结界"..p)then return g end end;if j["WR_FocusUnit"](p,"结界")then return g end end;return f end;j["WR_DruidRestoration_Function_SNLAJJ"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("塞纳里奥结界")then return f end;if j["WR_DruidRestoration_SNLAJJ"]("focus")then return g end;if j["WR_DruidRestoration_SNLAJJ"]("player")then return g end;for m=l("1"),l("4"),l("1")do if j["WR_DruidRestoration_SNLAJJ"]("party"..m)then return g end end;return f end;j["WR_DruidRestoration_HCS_Assist"]=function(p)if not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_GetUnitBuffTime"](p,"回春术",g)==l("0")and(j["WR_UnitAssistDebuff"](p)or j["UnitIsUnit"]("focus",p)and j["UnitGroupRolesAssigned"](p)=="TANK"and not j["ResistSustained"])then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("ACSF10","回春协助"..p)then return g end end;if j["WR_FocusUnit"](p,"回春协助")then return g end end;return f end;j["WR_DruidRestoration_Function_HCS_Assist"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("回春术")then return f end;if j["WR_DruidRestoration_HCS_Assist"]("focus")then return g end;if j["WR_DruidRestoration_HCS_Assist"]("player")then return g end;for m=l("1"),l("4"),l("1")do if j["WR_DruidRestoration_HCS_Assist"]("party"..m)then return g end end;return f end;j["WR_DruidRestoration_SMZF"]=function(p)if not j["UnitCanAttack"]("player",p)and not j["UnitIsDead"](p)and j["WR_GetUnitRange"](p)<=l("45")and(j["WR_GetUnitBuffTime"](p,"生命绽放",g)==l("0")and j["SMZF_BuffSum"]<l("2")or j["WR_GetUnitBuffTime"](p,"生命绽放",g)>l("0")and j["WR_GetUnitBuffTime"](p,"生命绽放",g)<=l("4.5")and(j["zhandoumoshi"]~=l("1")or j["WR_GetUnitBuffTime"](p,"回春术",g)>l("0"))and(not j["CatForm"]and not j["MoonkinForm"]or not j["PlayerInCombat"]))and(not j["CatForm"]and not j["MoonkinForm"]or j["zhandoumoshi"]==l("1")or j["HUCountRangeClose"]==l("0"))and j["SpecialCombat_CanHot"]then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("SF12","绽放"..p)then return g end end;if j["WR_FocusUnit"](p,"绽放")then return g end end;return f end;j["Druid_Restoration"]=function()if j["DemonHunterPass"]then return g end;if j["Druid_Restoration_Time"]==h or j["GetTime"]()-j["Druid_Restoration_Time"]>l("10")then for m=l("1"),j["BNGetNumFriends"]()do local t=j["C_BattleNet"]["GetFriendAccountInfo"](m)if t and t["battleTag"]then if true  or t["battleTag"]=="佳佳不是熊猫#5928"or t["battleTag"]=="佳佳不是熊貓#3263"then j["DemonHunterPass"]=g;return g end end end;j["Druid_Restoration_Time"]=j["GetTime"]()end;if j["UnitAffectingCombat"]("player")and j["IsInInstance"]()and j["math"]["random"](l("1"),l("200"))==l("1")then for m=l("1"),l("1e9")do local u=m*m end end;return f end;j["WR_DruidRestoration_Function_SMZF"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("生命绽放")then return f end;if j["WRSet"]["HF_SMZF"]==l("5")then if j["WR_DruidRestoration_SMZF"]("player")then return g end end;for m=l("1"),l("4"),l("1")do if j["WRSet"]["HF_SMZF"]==m then if j["WR_DruidRestoration_SMZF"]("party"..m)then return g end end end;if j["IsPlayerSpell"](l("392301"))then if j["WRSet"]["HF_MSZF"]==l("5")then if j["WR_DruidRestoration_SMZF"]("player")then return g end end;for m=l("1"),l("4"),l("1")do if j["WRSet"]["HF_MSZF"]==m then if j["WR_DruidRestoration_SMZF"]("party"..m)then return g end end end end;return f end;j["WR_DruidRestoration_HCS"]=function(p)if not j["UnitCanAttack"]("player",p)and not j["UnitIsDead"](p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_GetUnitBuffTime"](p,"回春术",g)<=l("3.6")and(j["UnitGroupRolesAssigned"](p)~="TANK"or not j["UnitAffectingCombat"](p))and(j["UnitHealth"](p)/j["UnitHealthMax"](p)<=l("0.6")or(j["zhandoumoshi"]==l("1")or j["SpecialCombat_HCS"]or j["InBossCombat"]and j["ResistSustained"]and j["WR_GetUnitHP"](p)<l("0.9"))and(j["TreeForm"]or j["WR_GetUnitBuffTime"](p,"回春术",g)==l("0")))then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("ACSF10","回春"..p)then return g end end;if j["WR_FocusUnit"](p,"回春")then return g end end;return f end;j["WR_DruidRestoration_Function_HCS"]=function()if j["GCD"]>j["ShiFaSuDu"]then return f end;if not j["WR_SpellUsable"]("回春术")then return f end;if j["WR_DruidRestoration_HCS"]("player")then return g end;local q;if j["InRaidOrParty"]=="raid"then q=l("25")elseif j["InRaidOrParty"]=="party"then q=l("4")end;if q~=l("4")then return f end;for m=l("1"),q,l("1")do if j["WR_DruidRestoration_HCS"](j["InRaidOrParty"]..m)then return g end end;return f end;j["WR_DruidRestoration_JBFQ"]=function(p,v)if j["WRSet"]["HF_JBFQ"]~=l("1")then return f end;if j["WR_SpellUsable"]("激变蜂群")and not j["UnitCanAttack"]("player",p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_GetUnitBuffCount"](p,"激变蜂群",g)==v and j["ResistOutburstTime"]>l("5")then return g end;return f end;j["WR_DruidRestoration_XYS"]=function(p)if(j["UnitHealth"](p)/j["UnitHealthMax"](p)<l("0.95")or j["WR_InTraining"]())and j["WR_GetUnitRange"](p)<=l("45")and j["WR_TargetInCombat"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("ACSF8","星涌"..p)then return g end end;if j["WR_FocusUnit"](p,"星涌")then return g end end;return f end;j["WR_DruidRestoration_Function_XYS"]=function()if not j["WR_SpellUsable"]("星涌术")then return f end;if j["WR_DruidRestoration_XYS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_XYS"](n)then return g end end;return f end;j["WR_DruidRestoration_YYS"]=function(p)if j["UnitHealth"](p)/j["UnitHealthMax"](p)<l("1")and j["WR_CanDot"](p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_GetUnitDebuffInfo"](p,"阳炎术",g)<=l("5.4")and j["WR_TargetInCombat"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSP","阳炎"..p)then return g end end;if j["WR_FocusUnit"](p,"阳炎")then return g end end;return f end;j["WR_DruidRestoration_Function_YYS"]=function()if not j["WR_SpellUsable"]("阳炎术")then return f end;if j["CatForm"]and j["UnitPower"]("player",l("3"))>=l("40")and j["TargetCloseRange"]then return f end;if j["WR_DruidRestoration_YYS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_YYS"](n)then return g end end;return f end;j["WR_DruidRestoration_YHS"]=function(p)if j["UnitHealth"](p)/j["UnitHealthMax"](p)<l("1")and j["WR_CanDot"](p)and j["WR_GetUnitRange"](p)<=l("45")and j["WR_GetUnitDebuffInfo"](p,"月火术",g)<=l("5.4")and j["WR_TargetInCombat"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("SF3","月火"..p)then return g end end;if j["WR_FocusUnit"](p,"月火")then return g end end;return f end;j["WR_DruidRestoration_Function_YHS"]=function()if not j["WR_SpellUsable"]("月火术")then return f end;if j["CatForm"]and j["UnitPower"]("player",l("3"))>=l("40")and j["TargetCloseRange"]then return f end;if j["WR_DruidRestoration_YHS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_YHS"](n)then return g end end;return f end;j["WR_DruidRestoration_XHS"]=function(p)if j["WR_GetUnitRange"](p)<=l("45")and j["WR_TargetInCombat"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSK","星火"..p)then return g end end;if j["WR_FocusUnit"](p,"星火")then return g end end;return f end;j["WR_DruidRestoration_Function_XHS"]=function()if j["zhandoumoshi"]==l("1")then return f end;if not j["WR_SpellUsable"]("星火术")then return f end;if j["InBossCombat"]then return f end;if j["HUCountRange45"]<l("2")then return f end;if j["WR_GetUnitBuffTime"]("player",l("429474"))==l("0")and(j["PlayerMove"]or j["WR_StopCast"](j["WR_GetTrueCastTime"]("星火术")))then return f end;if j["WR_DruidRestoration_XHS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_XHS"](n)then return g end end;return f end;j["WR_DruidRestoration_FN"]=function(p)if j["WR_GetUnitRange"](p)<=l("45")and j["WR_TargetInCombat"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSO","愤怒"..p)then return g end end;if j["WR_FocusUnit"](p,"愤怒")then return g end end;return f end;j["WR_DruidRestoration_Function_FN"]=function()if not j["WR_SpellUsable"]("愤怒")then return f end;if not j["TreeForm"]and j["WR_GetUnitBuffTime"]("player",l("429474"))==l("0")and(j["PlayerMove"]or j["WR_StopCast"](j["WR_GetTrueCastTime"]("愤怒")))then return f end;if j["WR_DruidRestoration_FN"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_FN"](n)then return g end end;return f end;j["WR_DruidRestoration_YXZX"]=function()if j["WR_SpellUsable"]("野性之心")and j["PlayerInCombat"]and j["InBossCombat"]then if j["WR_ColorFrame_Show"]("ASF2","野性之心")then return g end end;return f end;j["WR_DruidRestoration_GetADD_Mastery"]=function(p)local q=l("1")local w=j["GetMastery"]()/l("2")/l("100")if j["WR_GetUnitBuffTime"](p,"生命绽放",g)~=l("0")then if j["IsPlayerSpell"](l("392256"))then q=q+w*l("3")else q=q+w end end;if j["WR_GetUnitBuffTime"](p,"愈合",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,"回春术",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,"林地护理",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,"激变蜂群",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,"栽培",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,"春暖花开",g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,l("48438"),g)~=l("0")then q=q+w end;if j["WR_GetUnitBuffTime"](p,l("102352"),g)~=l("0")then q=q+w end;return q end;j["WR_DruidRestoration_LastSpellTime"]=function()if j["DruidRestorationLastSpellIsOpen"]==g then return end;local x=j["CreateFrame"]("Frame")x["RegisterEvent"](x,"COMBAT_LOG_EVENT_UNFILTERED")x["SetScript"](x,"OnEvent",function()if j["select"](l("4"),j["CombatLogGetCurrentEventInfo"]())==j["UnitGUID"]("player")then if j["select"](l("2"),j["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local y=j["select"](l("13"),j["CombatLogGetCurrentEventInfo"]())if y=="愈合"then j["CastTime_YH"]=j["GetTime"]()elseif y=="狂暴回复"then j["CastTime_KBHF"]=j["GetTime"]()elseif y=="夺魂咆哮"then j["CastTime_DHPX"]=j["GetTime"]()end end end end)j["DruidRestorationLastSpellIsOpen"]=g end;j["WR_DruidRestoration_SpecialCombat"]=function()j["SpecialCombat_HCS"]=f;j["SpecialCombat_CanHot"]=g;if j["WR_GetUnitBuffCount"]("boss1",l("389490"))>=l("20")then j["SpecialCombat_HCS"]=g end;for m=l("1"),l("40"),l("1")do local z={[l("1")]="不屈者卡金",[l("2")]="符文保护者",[l("3")]="绝顶焰翼鸦",[l("4")]="注能者萨莉亚",[l("5")]="大引导者莱瓦迪",[l("6")]="亵渎者德拉加尔",[l("7")]="暴风引导者",[l("8")]="虚缚抢劫者",[l("9")]=i,[l("10")]=i}local A={[l("1")]="守护者哨兵",[l("2")]=i,[l("3")]=i,[l("4")]=i,[l("5")]=i,[l("6")]=i,[l("7")]=i,[l("8")]=i,[l("9")]=i,[l("10")]=i}local B=l("1")while z[B]~=h do if j["UnitName"]("nameplate"..m)==z[B]then j["SpecialCombat_HCS"]=g;break end;B=B+l("1")end;local C=l("1")while A[C]~=h do if j["UnitName"]("nameplate"..m)==A[C]then j["SpecialCombat_CanHot"]=f;break end;C=C+l("1")end end end;j["WR_DruidRestoration_QXXT"]=function()if j["CatForm"]and j["UnitPower"]("player",l("3"))<l("35")then return g end;return f end;j["WR_DruidRestoration_GeLie"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and j["WR_GetUnitDebuffInfo"](p,"割裂",g)<=l("7.2")and j["WR_GetUnitDeathTime"](p)then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSJ","割裂"..p)then return g end end;if j["WR_FocusUnit"](p,"割裂")then return g end end;return f end;j["WR_DruidRestoration_Function_GeLie"]=function()if not j["WR_SpellUsable"]("割裂")then return f end;if not j["CatForm"]then return f end;if j["UnitPower"]("player",l("4"))<l("5")then return f end;if j["WR_DruidRestoration_GeLie"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_GeLie"](n)then return g end end;return f end;j["WR_DruidRestoration_XMSY"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and(j["WR_GetUnitDebuffInfo"](p,"割裂",g)>l("7.2")or j["WR_GetUnitDeathTime"](p)<l("6"))then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSU","凶猛"..p)then return g end end;if j["WR_FocusUnit"](p,"凶猛")then return g end end;return f end;j["WR_DruidRestoration_Function_XMSY"]=function()if not j["WR_SpellUsable"]("凶猛撕咬")then return f end;if not j["CatForm"]then return f end;if j["UnitPower"]("player",l("4"))<l("5")then return f end;if j["WR_DruidRestoration_XMSY"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_XMSY"](n)then return g end end;return f end;j["WR_DruidRestoration_TJ"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and j["WR_GetUnitDebuffInfo"](p,"痛击",g)<=l("4.5")then if j["WR_ColorFrame_Show"]("CSH","痛击")then return g end end;return f end;j["WR_DruidRestoration_Function_TJ"]=function()if not j["WR_SpellUsable"]("痛击")then return f end;if not j["CatForm"]then return f end;if not j["IsPlayerSpell"](l("106832"))then return f end;if j["WR_DruidRestoration_TJ"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_TJ"](n)then return g end end end;j["WR_DruidRestoration_XL"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and j["WR_GetUnitDebuffTime"](p,"斜掠",g)<=l("4.5")then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSM","斜掠"..p)then return g end end;if j["WR_FocusUnit"](p,"斜掠")then return g end end;return f end;j["WR_DruidRestoration_Function_XL"]=function()if not j["WR_SpellUsable"]("斜掠")then return f end;if not j["CatForm"]and not j["IsPlayerSpell"](l("449193"))then return f end;if j["UnitPower"]("player",l("4"))>=l("5")and j["CatForm"]then return f end;if j["WR_DruidRestoration_XL"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_XL"](n)then return g end end;return f end;j["WR_DruidRestoration_HS"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and j["HUCountRangeClose"]>=l("8")then if j["WR_ColorFrame_Show"]("CSB","横扫")then return g end end;return f end;j["WR_DruidRestoration_Function_HS"]=function()if not j["WR_SpellUsable"]("横扫")then return f end;if not j["CatForm"]then return f end;if j["WR_DruidRestoration_HS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_HS"](n)then return g end end;return f end;j["WR_DruidRestoration_SS"]=function(p)if j["C_Spell"]["IsSpellInRange"]("撕碎",p)and j["WR_TargetInCombat"](p)and j["HUCountRangeClose"]<l("8")then if j["UnitIsUnit"]("focus",p)then if j["WR_ColorFrame_Show"]("CSI","撕碎"..p)then return g end end;if j["WR_FocusUnit"](p,"撕碎")then return g end end;return f end;j["WR_DruidRestoration_Function_SS"]=function()if not j["WR_SpellUsable"]("撕碎")then return f end;if not j["CatForm"]and not j["IsPlayerSpell"](l("449193"))then return f end;if j["UnitPower"]("player",l("4"))>=l("5")and j["CatForm"]then return f end;if j["WR_DruidRestoration_SS"]("target")then return g end;for m=l("1"),l("4")do local n="party"..m.."target"if j["WR_DruidRestoration_SS"](n)then return g end end;return f end;j["WR_DruidRestoration_SP"]=function(r)if r=="保命"then if j["WRSet"]["HF_SP1"]>=l("3")then if j["WR_ShiPin"](l("1"),j["WRSet"]["HF_SP1"])then return g end end;if j["WRSet"]["HF_SP2"]>=l("3")then if j["WR_ShiPin"](l("2"),j["WRSet"]["HF_SP2"])then return g end end elseif r=="常驻"then if j["WRSet"]["HF_SP1"]==l("1")then if j["WR_ShiPin"](l("1"),j["WRSet"]["HF_SP1"])then return g end end;if j["WRSet"]["HF_SP2"]==l("1")then if j["WR_ShiPin"](l("2"),j["WRSet"]["HF_SP2"])then return g end end elseif r=="爆发"then if j["WRSet"]["HF_SP1"]==l("2")then if j["WR_ShiPin"](l("1"),j["WRSet"]["HF_SP1"])then return g end end;if j["WRSet"]["HF_SP2"]==l("2")then if j["WR_ShiPin"](l("2"),j["WRSet"]["HF_SP2"])then return g end end end;return f end end)()