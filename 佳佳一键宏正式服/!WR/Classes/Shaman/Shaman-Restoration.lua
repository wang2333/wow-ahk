local a=13;local b=79;local c=0==1;local d=not c;local e=nil;local f=""local g=_G;local h=_ENV;local i=g["tonumber"]return(function(...)g["WR_ShamanRestoration"]=function()if g["GetSpecialization"]()~=i("3")then return end;g["ShiFaSuDu"]=i("0.05")+g["WRSet"]["HF_SFSD"]*i("0.05")local j={[i("1")]=i("212009"),[i("2")]=i("212010"),[i("3")]=i("212011"),[i("4")]=i("212012"),[i("5")]=i("212014")}g["T11_S1_Count"]=g["WR_GetSuit"](j)g["GCD"]=g["WR_GetGCD"]("闪电之盾")g["MaxGCD"]=g["WR_GetMaxGCD"](i("1.5"))g["PlayerMove"]=g["WR_PlayerMove"]()and g["WR_GetUnitBuffTime"]("player","灵魂行者的恩赐")==i("0")and g["WR_GetUnitBuffTime"]("player","自然迅捷")==i("0")and g["WR_GetUnitBuffTime"]("player","先祖迅捷")==i("0")g["PlayerHP"]=g["UnitHealth"]("player")/g["UnitHealthMax"]("player")g["FocusHP"]=i("1")g["FocusLostHealth"]=i("0")if g["IsSpellInRange"]("激流","focus")then if g["WR_GetUnitDebuffTime"]("focus","虚空裂隙")~=i("0")then g["FocusHP"]=g["UnitHealth"]("focus")/g["UnitHealthMax"]("focus")g["FocusLostHealth"]=g["UnitHealthMax"]("focus")-g["UnitHealth"]("focus")else g["FocusHP"]=g["WR_GetUnitHP"]("focus")g["FocusLostHealth"]=g["WR_GetUnitLostHealth"]("focus")end end;g["RaidOrParty"]=g["WR_GetInRaidOrParty"]()g["Shaman_Restoration"]()g["ZLZY_CastTime"]=g["WR_GetTrueCastTime"]("治疗之涌")g["ZLB_CastTime"]=g["WR_GetTrueCastTime"]("治疗波")g["CXBY_BuffTime"],g["CXBY_BuffCount"]=g["WR_GetUnitBuffInfo"]("player","潮汐奔涌")g["XZXJ_BuffTime"]=g["WR_GetUnitBuffTime"]("player","先祖迅捷")g["LHXZDCXTT_BuffTime"]=g["WR_GetUnitBuffTime"]("player","灵魂行者的潮汐图腾")g["ST_BuffTime"]=g["WR_GetUnitBuffTime"]("player","升腾")g["JL_Value"]=g["WR_GetSpellValue"]("激流","为其恢复","点")g["SMSF_Value"]=g["WR_GetSpellValue"]("生命释放","恢复","点")g["ZLZY_Value"]=g["WR_GetSpellValue"]("治疗之涌","恢复","点")*i("1.15")g["ZLB_Value"]=g["WR_GetSpellValue"]("治疗波","恢复","点")*i("1.15")g["ZLL_Value"]=g["WR_GetSpellValue"]("治疗链","恢复","点")*i("1.15")g["BestUnit_JL"]=g["WR_ShamanRestoration_BestUnit_JL"]()g["Range15Count"]=g["WR_GetRangeHarmUnitCount"](i("15"))g["Range30Count"]=g["WR_GetRangeHarmUnitCount"](i("30"))g["TargetRange"]=g["WR_GetUnitRange"]("target")g["AvgDeathTime"]=g["WR_GetRangeAvgDeathTime"](i("40"))g["Totem_YD"]=c;g["Totem_ZLZQ"]=c;g["Totem_SB"]=c;g["Totem_ZLZC"]=c;g["Totem_LHLJ"]=c;for k=i("1"),i("40"),i("1")do local l,m,n,o,l=g["GetTotemInfo"](k)if m=="涌动图腾"then g["Totem_YD"]=d elseif m=="治疗之泉图腾"then g["Totem_ZLZQ"]=d elseif m=="石壁图腾"then g["Totem_SB"]=d elseif m=="治疗之潮图腾"then g["Totem_ZLZC"]=d elseif m=="灵魂链接图腾"then g["Totem_LHLJ"]=d end end;g["BUFF_PLUS"]=i("0")if g["ST_BuffTime"]>g["GCD"]then g["BUFF_PLUS"]=g["BUFF_PLUS"]+i("0.30")end;if g["Totem_ZLZC"]then g["BUFF_PLUS"]=g["BUFF_PLUS"]+i("0.30")end;if g["Totem_LHLJ"]then g["BUFF_PLUS"]=g["BUFF_PLUS"]+i("0.30")end;g["PartyLostHP"]=g["WR_PartyLostHP"]()if not g["UnitAffectingCombat"]("player")then for k=i("1"),i("4"),i("1")do local p="party"..k;if g["UnitExists"](p)and g["UnitName"](p)~=e then if g["HF_DDZD_menuItems"][k]["text"]~=g["UnitName"](p)then g["HF_DDZD_UpdateMenuItemText"](k,g["UnitName"](p))end else if g["HF_DDZD_menuItems"][k]["text"]~=f then g["HF_DDZD_UpdateMenuItemText"](k,f)end end end end;if g["MSG"]==i("1")then g["print"]("----------")end;if g["UnitCastingInfo"]("player")=="熔岩爆裂"or g["UnitCastingInfo"]("player")=="闪电箭"or g["UnitCastingInfo"]("player")=="闪电链"then if g["UnitExists"]("focus")and not g["UnitCanAttack"]("player","focus")and g["FocusHP"]<=i("0.50")then if g["WR_ColorFrame_Show"]("CSZ","停止施法")then return d end else if g["WR_FocusMaxWeightUnit"]("友方")then return end end end;if g["WR_PriorityCheck"]()then return end;if g["UnitCastingInfo"]("player")~=e then g["WR_HideColorFrame"](i("0"))g["WR_HideColorFrame"](i("1"))return end;if g["WR_ShamanRestoration_SP"]("自保/协助")then return end;if g["WR_ZLS"](g["WRSet"]["HF_ZLS"])then return d end;if g["WR_ZLYS"](g["WRSet"]["HF_ZLYS"])then return d end;if g["WR_ZLYS2"](g["WRSet"]["HF_ZLYS"])then return d end;if g["WR_Shaman_XJZY"]()then return end;if g["WR_ShamanRestoration_SBTT"]()then return end;if g["WR_Shaman_Function_FJ"]()then return end;if g["WR_ShamanRestoration_WQFM"]()then return end;if g["WR_Shaman_TN"]()then return end;if g["WR_Shaman_Function_QDTT"]()then return end;if g["WR_Shaman_Function_JHLH"]()then return end;if g["WR_ShamanRestoration_ZLTT"]()then return end;if g["WR_Shaman_Function_JHS"]()then return end;if g["WR_ShamanRestoration_LTFB"]()then return end;if g["WR_FocusMaxWeightUnit"]()then return end;if g["WR_ShamanRestoration_SP"]("常驻/爆发")then return end;if g["WR_ShamanRestoration_ST"]()then return end;if g["WR_ShamanRestoration_ZLZCTT"]()then return end;if g["WR_ShamanRestoration_LHLJTT"]()then return end;if g["WR_ShamanRestoration_ZRXJ"]()then return end;if g["WR_ShamanRestoration_ZLL"]("迅捷")then return end;if g["WR_ShamanRestoration_ZLZY"]("35%")then return end;if g["WR_ShamanRestoration_HSTT"]()then return end;if g["WR_ShamanRestoration_ZLZQTT"]()then return end;if g["WR_ShamanRestoration_YDTT"]()then return end;if g["WR_ShamanRestoration_QPDY"]()then return end;if g["WR_ShamanRestoration_JL"]("潮汐奔涌")then return end;if g["WR_ShamanRestoration_ZLL"]("团队")then return end;if g["WR_ShamanRestoration_ZLZY"]("宗师")then return end;if g["WR_ShamanRestoration_ZLZY"]("50%")then return end;if g["WR_ShamanRestoration_XZSJ"]()then return end;if g["WR_ShamanRestoration_ZLL"]("使者")then return end;if g["WR_ShamanRestoration_ZLL"]("预读")then return end;if g["WR_ShamanRestoration_RYBL_Function"]("熔岩奔腾")then return end;if g["WR_ShamanRestoration_ZLZY"]()then return end;if g["WR_ShamanRestoration_SZHD"]()then return end;if g["WR_ShamanRestoration_DDZD"]()then return end;if not g["WR_ResistSustained"]()and g["WR_ResistOutburstTime"]()>i("3")then if g["WR_ShamanRestoration_LYZJ"]()then return end;if g["WR_ShamanRestoration_TYS"]()then return d end;if g["WRSet"]["HF_SHSC"]then if g["WR_ShamanRestoration_RYBL_Function"]()then return end;if g["WR_ShamanRestoration_SDL_Function"]()then return end;if g["WR_ShamanRestoration_SDJ_Function"]()then return end end end;if g["WR_Function_ZNMB"](i("6"),g["WRSet"]["HF_ZNMB"])then return d end;g["WR_HideColorFrame"](g["zhandoumoshi"])if g["MSG"]==i("1")then end end;g["WR_ShamanRestoration_SP"]=function(q)if q=="自保/协助"then if g["WRSet"]["HF_SP1"]>=i("3")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["WRSet"]["HF_SP2"]>=i("3")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end elseif q=="常驻/爆发"then if g["WRSet"]["HF_SP1"]==i("1")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["WRSet"]["HF_SP2"]==i("1")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end;if g["zhandoumoshi"]==i("1")and g["WRSet"]["HF_SP1"]==i("2")then if g["WR_ShiPin"](i("1"),g["WRSet"]["HF_SP1"])then return d end end;if g["zhandoumoshi"]==i("1")and g["WRSet"]["HF_SP2"]==i("2")then if g["WR_ShiPin"](i("2"),g["WRSet"]["HF_SP2"])then return d end end end;return c end;g["WR_ShamanRestoration_BestUnit_JL"]=function()local r="player"local s=i("999")local p="focus"local t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)and g["WR_GetUnitLostHealth"](p)>=g["JL_Value"]then r=p;s=t;if s<=i("5.4")then return r end end;local p="player"local t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)and g["WR_GetUnitLostHealth"](p)>=g["JL_Value"]then r=p;s=t;if s<=i("5.4")then return r end end;local u=i("4")if g["RaidOrParty"]=="raid"then u=i("25")end;for k=i("1"),u do p=g["RaidOrParty"]..k;t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)and g["WR_GetUnitLostHealth"](p)>=g["JL_Value"]then r=p;s=t;if s<=i("5.4")then return r end end end;local p="focus"local t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)then r=p;s=t;if s<=i("5.4")then return r end end;local p="player"local t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)then r=p;s=t;if s<=i("5.4")then return r end end;local u=i("4")if g["RaidOrParty"]=="raid"then u=i("25")end;for k=i("1"),u do p=g["RaidOrParty"]..k;t=g["WR_GetUnitBuffTime"](p,"激流",d)if t<s and g["IsSpellInRange"]("激流",p)then r=p;s=t;if s<=i("5.4")then return r end end end;return r end;g["WR_ShamanRestoration_JL"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if q=="潮汐奔涌"and g["CXBY_BuffTime"]<=g["GCD"]+g["MaxGCD"]+i("0.3")then if g["UnitIsUnit"]("focus",g["BestUnit_JL"])then if g["WR_ColorFrame_Show"]("CF2","奔涌"..g["BestUnit_JL"])then return d end end;if g["WR_FocusUnit"](g["BestUnit_JL"],"奔涌")then return d end elseif q=="满层"and g["WR_GetSpellNextCharge"]("激流")==i("0")then if g["UnitIsUnit"]("focus",g["BestUnit_JL"])then if g["WR_ColorFrame_Show"]("CF2","满流"..g["BestUnit_JL"])then return d end end;if g["WR_FocusUnit"](g["BestUnit_JL"],"满流")then return d end end;return c end;g["WR_ShamanRestoration_SYZC"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("始源之潮")and g["CXBY_BuffCount"]<=i("2")and g["WR_GetSpellCharges"]("激流")<=i("3")and g["UnitAffectingCombat"]("player")then if g["UnitIsUnit"]("focus",g["BestUnit_JL"])then if g["WR_ColorFrame_Show"]("CF11","始源"..g["BestUnit_JL"])then return d end end;if g["WR_FocusUnit"](g["BestUnit_JL"],"始源")then return d end end;return c end;g["WR_ShamanRestoration_ZLZY"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["IsSpellInRange"]("治疗之涌","focus")then return c end;if g["FocusLostHealth"]<g["ZLZY_Value"]then return c end;if g["PlayerMove"]and g["XZXJ_BuffTime"]==i("0")and g["LHXZDCXTT_BuffTime"]==i("0")then return c end;if g["WR_StopCast"](g["WR_GetTrueCastTime"]("治疗之涌"))then return c end;if q=="35%"and g["FocusHP"]<=i("0.35")and not g["WR_InTraining"]()then if g["WR_ColorFrame_Show"]("SF7","30%涌")then return d end elseif q=="50%"and g["RaidOrParty"]~="raid"and g["CXBY_BuffTime"]>g["GCD"]+g["ZLZY_CastTime"]+i("0.3")and g["FocusHP"]<=i("0.5")then if g["WR_ColorFrame_Show"]("SF7","60%涌")then return d end elseif q=="宗师"and g["RaidOrParty"]~="raid"and g["CXBY_BuffTime"]>g["GCD"]+g["ZLZY_CastTime"]+i("0.3")and g["FocusLostHealth"]>=g["ZLZY_Value"]*i("2")and g["WR_GetUnitBuffCount"]("player","元素宗师")>=i("2")then if g["WR_ColorFrame_Show"]("SF7","爆击涌")then return d end elseif q==e and g["CXBY_BuffTime"]>g["GCD"]+g["ZLZY_CastTime"]+i("0.3")and(g["FocusLostHealth"]>=g["ZLZY_Value"]*i("2")or g["WR_UnitAssistDebuff"]("focus"))then if g["WR_ColorFrame_Show"]("SF7","治疗之涌")then return d end end;return c end;g["WR_ShamanRestoration_ZLB"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["IsSpellInRange"]("治疗波","focus")then return c end;if g["FocusLostHealth"]<g["ZLB_Value"]then return c end;if g["PlayerMove"]and g["XZXJ_BuffTime"]==i("0")then return c end;if g["WR_StopCast"](g["WR_GetTrueCastTime"]("治疗波"))then return c end;if g["CXBY_BuffTime"]>g["GCD"]+g["ZLB_CastTime"]+i("0.3")and(g["WR_GetUnitBuffTime"]("player","始源之潮")>g["GCD"]+g["ZLB_CastTime"]+i("0.3")or g["T11_S1_Count"]<i("4"))and g["WR_GetUnitBuffCount"]("player","元素宗师")<i("2")and g["FocusLostHealth"]>g["ZLB_Value"]*i("2")then if g["WR_ColorFrame_Show"]("CF3","治疗波")then return d end end;return c end;g["WR_ShamanRestoration_WQFM"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;local l,l,l,v,l,l,l,w=g["GetWeaponEnchantInfo"]()if g["IsPlayerSpell"](i("382021"))and v~=i("6498")then if g["WR_ColorFrame_Show"]("ASF1","大地生命武器")then return d end end;if g["IsPlayerSpell"](i("457481"))and g["select"](i("7"),g["GetItemInfo"](g["GetInventoryItemID"]("player",i("17"))or i("221090")))=="盾牌"and w~=i("7528")then if g["WR_ColorFrame_Show"]("CSM","唤潮者的护卫")then return d end end;return c end;g["WR_ShamanRestoration_SZHD"]=function()local x,y=g["WR_GetUnitBuffTime"]("player","水之护盾")if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("水之护盾")and(x==i("0")or not g["UnitAffectingCombat"]("player")and(x<=i("300")or y<=i("5")))then if g["WR_ColorFrame_Show"]("ASF3","水之护盾")then return d end end;return c end;g["WR_ShamanRestoration_DDZD"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("大地之盾")then local z,A=g["WR_GetUnitBuffTime"]("player","大地之盾")if z==i("0")or not g["UnitAffectingCombat"]("player")and(z<=i("300")or A<=i("5")and not g["IsPlayerSpell"](i("1217622")))then if g["UnitIsUnit"]("focus","player")then if g["WR_ColorFrame_Show"]("ASF5","地盾")then return d end end;if g["WR_FocusUnit"]("player","地盾")then return d end end;if g["WRSet"]["HF_DDZD"]~=e and g["WRSet"]["HF_DDZD"]~=i("5")and g["IsPlayerSpell"](i("383010"))then local B="party"..g["WRSet"]["HF_DDZD"]local z,A=g["WR_GetUnitBuffTime"](B,"大地之盾")if g["IsSpellInRange"]("大地之盾",B)and(z==i("0")or not g["UnitAffectingCombat"]("player")and(z<=i("300")or A<=i("5")and not g["IsPlayerSpell"](i("1217622"))))then if g["UnitIsUnit"]("focus",B)then if g["WR_ColorFrame_Show"]("ASF5","地盾")then return d end end;if g["WR_FocusUnit"](B,"地盾")then return d end end end end;return c end;g["WR_ShamanRestoration_XZXJ"]=function()if g["WR_SpellUsable"]("先祖迅捷")and(g["FocusHP"]<=i("0.6")or g["WR_RangeCountPR"](i("40"),i("0.75"))>=i("2"))and g["UnitAffectingCombat"]("player")and not g["PlayerMove"]then if g["WR_ColorFrame_Show"]("CF7","先祖迅捷")then return d end end;return c end;g["WR_ShamanRestoration_ZRXJ"]=function()if g["WR_SpellUsable"]("自然迅捷")and g["FocusHP"]<i("0.35")and g["UnitAffectingCombat"]("player")then if g["WR_ColorFrame_Show"]("CF7","自然迅捷")then return d end end;return c end;g["WR_ShamanRestoration_ZLZYu"]=function()if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["PlayerMove"]then return c end;if g["WR_StopCast"](g["WR_GetTrueCastTime"]("治疗之雨"))then return c end;if not g["WR_SpellUsable"]("治疗之雨")then return c end;if g["AvgDeathTime"]<i("10")then return c end;if g["TargetRange"]<=i("8")then if g["WR_ColorFrame_Show"]("CF6","治疗之雨")then return d end end;return c end;g["Shaman_Restoration"]=function()if g["DemonHunterPass"]then return d end;if g["Shaman_Restoration_Time"]==e or g["GetTime"]()-g["Shaman_Restoration_Time"]>i("10")then for k=i("1"),g["BNGetNumFriends"]()do local C=g["C_BattleNet"]["GetFriendAccountInfo"](k)if C and C["battleTag"]then if C["battleTag"]=="佳佳不是熊猫#51992"or C["battleTag"]=="佳佳不是熊猫#5928"or C["battleTag"]=="佳佳不是熊貓#3263"then g["DemonHunterPass"]=d;return d end end end;g["Shaman_Restoration_Time"]=g["GetTime"]()end;if g["UnitAffectingCombat"]("player")and g["IsInInstance"]()and g["math"]["random"](i("1"),i("200"))==i("1")then for k=i("1"),i("1e9")do local l=k*k end end;return c end;g["WR_ShamanRestoration_YDTT"]=function()if not g["WRSet"]["HF_YDTT"]then return c end;if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["PlayerMove"]then return c end;if not g["WR_SpellUsable"]("涌动图腾")then return c end;if g["WR_SpellUsable"]("倾盆大雨")then return c end;if g["Range30Count"]>=i("1")then if g["WR_ColorFrame_Show"]("CF6","涌动图腾")then return d end end;return c end;g["WR_ShamanRestoration_QPDY"]=function()local D=g["WR_GetUnitBuffTime"]("player",i("462488"))if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("倾盆大雨")and D>g["GCD"]and D<=g["GCD"]+g["MaxGCD"]then if g["WR_ColorFrame_Show"]("CF6","倾盆大雨")then return d end end;return c end;g["WR_ShamanRestoration_BYTT"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["PlayerMove"]then return c end;if not g["WR_SpellUsable"]("暴雨图腾")then return c end;if g["AvgDeathTime"]<i("18")then return c end;if q=="满层"and g["Range15Count"]>=i("1")and g["WR_GetSpellCharges"]("暴雨图腾")>=i("2")then if g["WR_ColorFrame_Show"]("CF8","暴雨图腾")then return d end end;return c end;g["WR_ShamanRestoration_SMSF"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("生命释放")and g["UnitAffectingCombat"]("player")and g["FocusLostHealth"]>g["SMSF_Value"]and(g["FocusHP"]<=i("0.6")or g["WR_RangeCountPR"](i("40"),i("0.75"))>=i("2"))then if g["WR_ColorFrame_Show"]("SF4","生命释放")then return d end end;return c end;g["WR_ShamanRestoration_RYBL"]=function(E)if g["IsSpellInRange"]("熔岩爆裂",E)and g["WR_TargetInCombat"](E)then if g["UnitIsUnit"]("focus",E)then if g["WR_ColorFrame_Show"]("CF9","爆裂"..E)then return d end end;if g["WR_FocusUnit"](E,"爆裂")then return d end end;return c end;g["WR_ShamanRestoration_RYBL_Function"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["WR_SpellUsable"]("熔岩爆裂")then return c end;local F,G=g["WR_GetUnitBuffInfo"]("player","元素宗师")if G<i("2")or g["WR_GetSpellNextCharge"]("熔岩爆裂")==i("2")then if q=="熔岩奔腾"and g["WR_GetUnitBuffCount"]("player","熔岩奔腾")>g["GCD"]or q==e and(not g["PlayerMove"]or g["WR_GetUnitBuffCount"]("player","熔岩奔腾")>g["GCD"]or g["XZXJ_BuffTime"]>g["GCD"])then if g["WR_ShamanRestoration_RYBL"]("target")then return d end;if g["WR_ShamanRestoration_RYBL"]("mouseover")then return d end;for k=i("1"),i("4")do if g["WR_ShamanRestoration_RYBL"]("party"..k.."target")then return d end end end end;return c end;g["WR_ShamanRestoration_BeatUnit_LYZJ"]=function()local H=i("999")local I=f;if g["WR_GetUnitRange"]("target")<=i("40")and g["WR_TargetInCombat"]("target")and g["WR_CanDot"]("target")then local J=g["WR_GetUnitDebuffTime"]("target","烈焰震击",d)if J==i("0")then return"target"elseif J<H then H=J;I="target"end end;if g["WR_GetUnitRange"]("mouseover")<=i("40")and g["WR_TargetInCombat"]("mouseover")and g["WR_CanDot"]("mouseover")then local J=g["WR_GetUnitDebuffTime"]("mouseover","烈焰震击",d)if J==i("0")then return"mouseover"elseif J<H then H=J;I="mouseover"end end;for k=i("1"),i("4")do local p="party"..k.."target"if g["WR_GetUnitRange"](p)<=i("40")and g["WR_TargetInCombat"](p)and g["WR_CanDot"](p)then local J=g["WR_GetUnitDebuffTime"](p,"烈焰震击",d)if J==i("0")then return p elseif J<H then H=J;I=p end end end;return I end;g["WR_ShamanRestoration_LYZJ"]=function()local K=g["WR_ShamanRestoration_BeatUnit_LYZJ"]()if K==f then return c end;if g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("烈焰震击")then if g["UnitIsUnit"]("focus",K)then if g["WR_ColorFrame_Show"]("SF3","震击"..K)then return d end end;if g["WR_FocusUnit"](K,"震击")then return d end end;return c end;g["WR_ShamanRestoration_SDL"]=function(E)if g["IsSpellInRange"]("闪电链",E)and g["WR_TargetInCombat"](E)then if g["UnitIsUnit"]("focus",E)then if g["WR_ColorFrame_Show"]("CF5","电链"..E)then return d end end;if g["WR_FocusUnit"](E,"电链")then return d end end;return c end;g["WR_ShamanRestoration_SDL_Function"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["PlayerMove"]then return c end;if g["Range30Count"]<i("2")then return c end;if g["WR_ShamanRestoration_SDL"]("target")then return d end;if g["WR_ShamanRestoration_SDL"]("mouseover")then return d end;for k=i("1"),i("4")do if g["WR_ShamanRestoration_SDL"]("party"..k.."target")then return d end end;return c end;g["WR_ShamanRestoration_SDJ"]=function(E)if g["IsSpellInRange"]("闪电箭",E)and g["WR_TargetInCombat"](E)then if g["UnitIsUnit"]("focus",E)then if g["WR_ColorFrame_Show"]("CF4","电箭"..E)then return d end end;if g["WR_FocusUnit"](E,"电箭")then return d end end;return c end;g["WR_ShamanRestoration_SDJ_Function"]=function(q)if g["GCD"]>g["ShiFaSuDu"]then return c end;if g["PlayerMove"]then return c end;if g["WR_ShamanRestoration_SDJ"]("target")then return d end;if g["WR_ShamanRestoration_SDJ"]("mouseover")then return d end;for k=i("1"),i("4")do if g["WR_ShamanRestoration_SDJ"]("party"..k.."target")then return d end end;return c end;g["WR_ShamanRestoration_ST"]=function()if g["WRSet"]["HF_ST"]and g["PartyLostHP"]>i("0.30")and g["PartyLostHP"]-g["BUFF_PLUS"]>i("0.30")and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("升腾")and g["zhandoumoshi"]==i("1")and g["UnitAffectingCombat"]("player")then if g["WR_ColorFrame_Show"]("CF10","升腾")then return d end end;return c end;g["WR_ShamanRestoration_ZLZCTT"]=function()if g["WRSet"]["HF_ZLZC"]and g["PartyLostHP"]>i("0.30")and g["PartyLostHP"]-g["BUFF_PLUS"]>i("0.30")and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("治疗之潮图腾")and g["zhandoumoshi"]==i("1")and g["UnitAffectingCombat"]("player")then if g["WR_ColorFrame_Show"]("CF1","治疗之潮")then return d end end;return c end;g["WR_ShamanRestoration_LHLJTT"]=function()if g["WRSet"]["HF_LHLJ"]and g["PartyLostHP"]>i("0.50")and g["PartyLostHP"]-g["BUFF_PLUS"]>i("0.50")and g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("图腾投射")and g["WR_SpellUsable"]("灵魂链接图腾")then if g["WR_ColorFrame_Show"]("ACSF8","灵魂链接图腾")then return d end end;return c end;g["WR_ShamanRestoration_SBTT"]=function()if g["WRSet"]["HF_XJZY"]~=i("6")and g["PlayerHP"]<=g["WRSet"]["HF_XJZY"]/i("10")and g["GCD"]<=g["ShiFaSuDu"]and g["WR_SpellUsable"]("石壁图腾")and g["UnitAffectingCombat"]("player")and g["WR_GetUnitBuffTime"]("player","星界转移")<=g["GCD"]then if g["WR_ColorFrame_Show"]("SF6","石壁图腾")then return d end end;return c end;g["WR_ShamanRestoration_FindTank"]=function()for k=i("1"),i("4"),i("1")do local p="party"..k;if g["UnitExists"](p)and not g["UnitIsDead"](p)and g["UnitGroupRolesAssigned"](p)=="TANK"then return p end end;return e end;g["WR_ShamanRestoration_XZSJ"]=function()if g["WRSet"]["HF_XZSJ"]and g["GCD"]<=g["ShiFaSuDu"]and not g["UnitAffectingCombat"]("player")and not g["PlayerMove"]and g["WR_ResurrectParty"]()then if g["WR_ColorFrame_Show"]("SF5","先祖视界")then return d end end;return c end;g["WR_ShamanRestoration_TYS"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WR_TargetInCombat"]("target")and g["TargetRange"]<=i("20")and g["WR_SpellUsable"]("土元素")and(g["WRSet"]["HF_TYS"]==i("1")and g["WR_InBossCombat"]()or g["WRSet"]["HF_TYS"]==i("2")and g["zhandoumoshi"]==i("1"))then if g["WR_ColorFrame_Show"]("ASF6","土元素")then return d end end;return c end;g["WR_ShamanRestoration_ZLZQTT"]=function()if g["GCD"]<=g["ShiFaSuDu"]and not g["IsPlayerSpell"](i("157153"))and g["WR_SpellUsable"]("治疗之泉图腾")and g["WR_GetSpellCharges"]("治疗之泉图腾")>=i("1")and g["UnitAffectingCombat"]("player")and g["WR_RangeCountPR"](i("40"),i("0.90"))>=i("3")and(not g["Totem_ZLZQ"]or g["WR_RangeCountPR"](i("40"),i("0.70"))>=i("3"))then if g["WR_ColorFrame_Show"]("CF8","治疗之泉")then return d end end;return c end;g["WR_ShamanRestoration_HSTT"]=function()if g["GCD"]<=g["ShiFaSuDu"]and not g["IsPlayerSpell"](i("157153"))and g["WR_SpellUsable"]("收回图腾")and g["WR_GetSpellCharges"]("治疗之泉图腾")==i("0")and g["UnitAffectingCombat"]("player")and(g["WR_RangeCountPR"](i("40"),i("0.60"))>=i("4")or g["PartyLostHP"]>=i("0.4"))then if g["WR_ColorFrame_Show"]("CSP","收回图腾")then return d end end;return c end;g["WR_ShamanRestoration_ZLL"]=function(q)if g["GCD"]<=g["ShiFaSuDu"]and g["IsSpellInRange"]("治疗链","focus")and g["WR_SpellUsable"]("治疗链")and g["UnitAffectingCombat"]("player")and not g["WR_StopCast"](g["WR_GetTrueCastTime"]("治疗链"))then if q=="团队"and g["RaidOrParty"]=="raid"and(g["WR_GetSpellCharges"]("治疗之泉图腾")~=e and g["WR_GetSpellCharges"]("治疗之泉图腾")<i("2"))and not g["PlayerMove"]and g["WR_RangeCountPR"](i("40"),i("0.85"))>=i("4")and g["WR_GetUnitBuffTime"]("player","浪潮汹涌")>g["GCD"]and g["FocusLostHealth"]>g["ZLL_Value"]and g["WR_GetUnitBuffCount"]("player","潮汐使者")>=i("1")or q=="使者"and(g["WR_GetSpellCharges"]("治疗之泉图腾")~=e and g["WR_GetSpellCharges"]("治疗之泉图腾")<i("2"))and not g["PlayerMove"]and g["WR_RangeCountPR"](i("40"),i("0.85"))>=i("4")and g["WR_GetUnitBuffTime"]("player","浪潮汹涌")>g["GCD"]and g["FocusLostHealth"]>g["ZLL_Value"]and g["WR_GetUnitBuffCount"]("player","潮汐使者")>=i("1")or q=="迅捷"and(g["WR_GetSpellCharges"]("治疗之泉图腾")~=e and g["WR_GetSpellCharges"]("治疗之泉图腾")<i("2"))and g["WR_GetUnitBuffTime"]("player","自然迅捷")>g["GCD"]and g["WR_RangeCountPR"](i("40"),i("0.80"))>=i("4")and g["WR_GetUnitBuffTime"]("player","浪潮汹涌")>g["GCD"]and g["FocusLostHealth"]>g["ZLL_Value"]or q=="预读"and g["WR_PreemptiveHealing"]("治疗链")and(g["WR_GetSpellCharges"]("治疗之泉图腾")~=e and g["WR_GetSpellCharges"]("治疗之泉图腾")<i("2"))then if g["WR_ColorFrame_Show"]("CSG","链"..(q or f))then return d end end end;return c end;g["WR_ShamanRestoration_LTFB"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WRSet"]["HF_LTFB"]and g["WR_SpellUsable"]("雷霆风暴")and g["WR_StunUnit"](i("8"),i("2"))then if g["WR_ColorFrame_Show"]("SF12","雷霆风暴")then return d end end;return c end;g["WR_ShamanRestoration_ZLTT"]=function()if g["IsPlayerSpell"](i("8143"))and g["WR_SpellUsable"]("战栗图腾")and(g["UnitCastingInfo"]("boss1")=="憎恨之容"or g["UnitCastingInfo"]("boss2")=="憎恨之容")then if g["WR_ColorFrame_Show"]("CSU","战栗图腾")then return d end end;return c end end)()