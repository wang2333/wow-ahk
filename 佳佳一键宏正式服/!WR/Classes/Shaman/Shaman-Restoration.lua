local a=35;local b=64;local c=48;local d=89;local e=0==1;local f=not e;local g=nil;local h=""local i=_G;local j=_ENV;local k=i["tonumber"]return(function(...)i["WR_ShamanRestoration"]=function()if i["GetSpecialization"]()~=k("3")then return end;i["ShiFaSuDu"]=k("0.05")+i["WRSet"]["HF_SFSD"]*k("0.05")local l={[k("1")]=k("212009"),[k("2")]=k("212010"),[k("3")]=k("212011"),[k("4")]=k("212012"),[k("5")]=k("212014")}i["T11_S1_Count"]=i["WR_GetSuit"](l)i["GCD"]=i["WR_GetGCD"]("闪电之盾")i["MaxGCD"]=i["WR_GetMaxGCD"](k("1.5"))i["PlayerMove"]=i["WR_PlayerMove"]()and i["WR_GetUnitBuffTime"]("player","灵魂行者的恩赐")==k("0")and i["WR_GetUnitBuffTime"]("player","自然迅捷")==k("0")and i["WR_GetUnitBuffTime"]("player","先祖迅捷")==k("0")i["PlayerHP"]=i["UnitHealth"]("player")/i["UnitHealthMax"]("player")i["FocusHP"]=k("1")i["FocusLostHealth"]=k("0")if i["IsSpellInRange"]("激流","focus")then if i["WR_GetUnitDebuffTime"]("focus","虚空裂隙")~=k("0")then i["FocusHP"]=i["UnitHealth"]("focus")/i["UnitHealthMax"]("focus")i["FocusLostHealth"]=i["UnitHealthMax"]("focus")-i["UnitHealth"]("focus")else i["FocusHP"]=i["WR_GetUnitHP"]("focus")i["FocusLostHealth"]=i["WR_GetUnitLostHealth"]("focus")end end;i["RaidOrParty"]=i["WR_GetInRaidOrParty"]()i["Shaman_Restoration"]()i["ZLZY_CastTime"]=i["WR_GetTrueCastTime"]("治疗之涌")i["ZLB_CastTime"]=i["WR_GetTrueCastTime"]("治疗波")i["CXBY_BuffTime"],i["CXBY_BuffCount"]=i["WR_GetUnitBuffInfo"]("player","潮汐奔涌")i["XZXJ_BuffTime"]=i["WR_GetUnitBuffTime"]("player","先祖迅捷")i["LHXZDCXTT_BuffTime"]=i["WR_GetUnitBuffTime"]("player","灵魂行者的潮汐图腾")i["ST_BuffTime"]=i["WR_GetUnitBuffTime"]("player","升腾")i["JL_Value"]=i["WR_GetSpellValue"]("激流","为其恢复","点")i["SMSF_Value"]=i["WR_GetSpellValue"]("生命释放","恢复","点")i["ZLZY_Value"]=i["WR_GetSpellValue"]("治疗之涌","恢复","点")*k("1.15")i["ZLB_Value"]=i["WR_GetSpellValue"]("治疗波","恢复","点")*k("1.15")i["ZLL_Value"]=i["WR_GetSpellValue"]("治疗链","恢复","点")*k("1.15")i["BestUnit_JL"]=i["WR_ShamanRestoration_BestUnit_JL"]()i["Range15Count"]=i["WR_GetRangeHarmUnitCount"](k("15"))i["Range30Count"]=i["WR_GetRangeHarmUnitCount"](k("30"))i["TargetRange"]=i["WR_GetUnitRange"]("target")i["AvgDeathTime"]=i["WR_GetRangeAvgDeathTime"](k("40"))i["Totem_YD"]=e;i["Totem_ZLZQ"]=e;i["Totem_SB"]=e;i["Totem_ZLZC"]=e;i["Totem_LHLJ"]=e;for m=k("1"),k("40"),k("1")do local n,o,p,q,n=i["GetTotemInfo"](m)if o=="涌动图腾"then i["Totem_YD"]=f elseif o=="治疗之泉图腾"then i["Totem_ZLZQ"]=f elseif o=="石壁图腾"then i["Totem_SB"]=f elseif o=="治疗之潮图腾"then i["Totem_ZLZC"]=f elseif o=="灵魂链接图腾"then i["Totem_LHLJ"]=f end end;i["BUFF_PLUS"]=k("0")if i["ST_BuffTime"]>i["GCD"]then i["BUFF_PLUS"]=i["BUFF_PLUS"]+k("0.30")end;if i["Totem_ZLZC"]then i["BUFF_PLUS"]=i["BUFF_PLUS"]+k("0.30")end;if i["Totem_LHLJ"]then i["BUFF_PLUS"]=i["BUFF_PLUS"]+k("0.30")end;i["PartyLostHP"]=i["WR_PartyLostHP"]()if not i["UnitAffectingCombat"]("player")then for m=k("1"),k("4"),k("1")do local r="party"..m;if i["UnitExists"](r)and i["UnitName"](r)~=g then if i["HF_DDZD_menuItems"][m]["text"]~=i["UnitName"](r)then i["HF_DDZD_UpdateMenuItemText"](m,i["UnitName"](r))end else if i["HF_DDZD_menuItems"][m]["text"]~=h then i["HF_DDZD_UpdateMenuItemText"](m,h)end end end end;if i["MSG"]==k("1")then i["print"]("----------")end;if i["UnitCastingInfo"]("player")=="熔岩爆裂"or i["UnitCastingInfo"]("player")=="闪电箭"or i["UnitCastingInfo"]("player")=="闪电链"then if i["UnitExists"]("focus")and not i["UnitCanAttack"]("player","focus")and i["FocusHP"]<=k("0.50")then if i["WR_ColorFrame_Show"]("CSZ","停止施法")then return f end else if i["WR_FocusMaxWeightUnit"]("友方")then return end end end;if i["WR_PriorityCheck"]()then return end;if i["UnitCastingInfo"]("player")~=g then i["WR_HideColorFrame"](k("0"))i["WR_HideColorFrame"](k("1"))return end;if i["WR_ShamanRestoration_SP"]("自保/协助")then return end;if i["WR_ZLS"](i["WRSet"]["HF_ZLS"])then return f end;if i["WR_ZLYS"](i["WRSet"]["HF_ZLYS"])then return f end;if i["WR_ZLYS2"](i["WRSet"]["HF_ZLYS"])then return f end;if i["WR_Shaman_XJZY"]()then return end;if i["WR_ShamanRestoration_SBTT"]()then return end;if i["WR_Shaman_Function_FJ"]()then return end;if i["WR_ShamanRestoration_WQFM"]()then return end;if i["WR_Shaman_TN"]()then return end;if i["WR_Shaman_Function_QDTT"]()then return end;if i["WR_Shaman_Function_JHLH"]()then return end;if i["WR_ShamanRestoration_ZLTT"]()then return end;if i["WR_Shaman_Function_JHS"]()then return end;if i["WR_ShamanRestoration_LTFB"]()then return end;if i["WR_FocusMaxWeightUnit"]()then return end;if i["WR_ShamanRestoration_SP"]("常驻/爆发")then return end;if i["WR_ShamanRestoration_ST"]()then return end;if i["WR_ShamanRestoration_ZLZCTT"]()then return end;if i["WR_ShamanRestoration_LHLJTT"]()then return end;if i["WR_ShamanRestoration_ZRXJ"]()then return end;if i["WR_ShamanRestoration_ZLL"]("迅捷")then return end;if i["WR_ShamanRestoration_ZLZY"]("35%")then return end;if i["WR_ShamanRestoration_HSTT"]()then return end;if i["WR_ShamanRestoration_ZLZQTT"]()then return end;if i["WR_ShamanRestoration_YDTT"]()then return end;if i["WR_ShamanRestoration_QPDY"]()then return end;if i["WR_ShamanRestoration_JL"]("潮汐奔涌")then return end;if i["WR_ShamanRestoration_ZLL"]("团队")then return end;if i["WR_ShamanRestoration_ZLZY"]("宗师")then return end;if i["WR_ShamanRestoration_ZLZY"]("50%")then return end;if i["WR_ShamanRestoration_XZSJ"]()then return end;if i["WR_ShamanRestoration_ZLL"]("使者")then return end;if i["WR_ShamanRestoration_ZLL"]("预读")then return end;if i["WR_ShamanRestoration_RYBL_Function"]("熔岩奔腾")then return end;if i["WR_ShamanRestoration_ZLZY"]()then return end;if i["WR_ShamanRestoration_SZHD"]()then return end;if i["WR_ShamanRestoration_DDZD"]()then return end;if not i["WR_ResistSustained"]()and i["WR_ResistOutburstTime"]()>k("3")then if i["WR_ShamanRestoration_LYZJ"]()then return end;if i["WR_ShamanRestoration_TYS"]()then return f end;if i["WRSet"]["HF_SHSC"]then if i["WR_ShamanRestoration_RYBL_Function"]()then return end;if i["WR_ShamanRestoration_SDL_Function"]()then return end;if i["WR_ShamanRestoration_SDJ_Function"]()then return end end end;if i["WR_Function_ZNMB"](k("6"),i["WRSet"]["HF_ZNMB"])then return f end;i["WR_HideColorFrame"](i["zhandoumoshi"])if i["MSG"]==k("1")then end end;i["WR_ShamanRestoration_SP"]=function(s)if s=="自保/协助"then if i["WRSet"]["HF_SP1"]>=k("3")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["WRSet"]["HF_SP2"]>=k("3")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end elseif s=="常驻/爆发"then if i["WRSet"]["HF_SP1"]==k("1")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["WRSet"]["HF_SP2"]==k("1")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end;if i["zhandoumoshi"]==k("1")and i["WRSet"]["HF_SP1"]==k("2")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["zhandoumoshi"]==k("1")and i["WRSet"]["HF_SP2"]==k("2")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end end;return e end;i["WR_ShamanRestoration_BestUnit_JL"]=function()local t="player"local u=k("999")local r="focus"local v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)and i["WR_GetUnitLostHealth"](r)>=i["JL_Value"]then t=r;u=v;if u<=k("5.4")then return t end end;local r="player"local v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)and i["WR_GetUnitLostHealth"](r)>=i["JL_Value"]then t=r;u=v;if u<=k("5.4")then return t end end;local w=k("4")if i["RaidOrParty"]=="raid"then w=k("25")end;for m=k("1"),w do r=i["RaidOrParty"]..m;v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)and i["WR_GetUnitLostHealth"](r)>=i["JL_Value"]then t=r;u=v;if u<=k("5.4")then return t end end end;local r="focus"local v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)then t=r;u=v;if u<=k("5.4")then return t end end;local r="player"local v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)then t=r;u=v;if u<=k("5.4")then return t end end;local w=k("4")if i["RaidOrParty"]=="raid"then w=k("25")end;for m=k("1"),w do r=i["RaidOrParty"]..m;v=i["WR_GetUnitBuffTime"](r,"激流",f)if v<u and i["IsSpellInRange"]("激流",r)then t=r;u=v;if u<=k("5.4")then return t end end end;return t end;i["WR_ShamanRestoration_JL"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if s=="潮汐奔涌"and i["CXBY_BuffTime"]<=i["GCD"]+i["MaxGCD"]+k("0.3")then if i["UnitIsUnit"]("focus",i["BestUnit_JL"])then if i["WR_ColorFrame_Show"]("CF2","奔涌"..i["BestUnit_JL"])then return f end end;if i["WR_FocusUnit"](i["BestUnit_JL"],"奔涌")then return f end elseif s=="满层"and i["WR_GetSpellNextCharge"]("激流")==k("0")then if i["UnitIsUnit"]("focus",i["BestUnit_JL"])then if i["WR_ColorFrame_Show"]("CF2","满流"..i["BestUnit_JL"])then return f end end;if i["WR_FocusUnit"](i["BestUnit_JL"],"满流")then return f end end;return e end;i["WR_ShamanRestoration_SYZC"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("始源之潮")and i["CXBY_BuffCount"]<=k("2")and i["WR_GetSpellCharges"]("激流")<=k("3")and i["UnitAffectingCombat"]("player")then if i["UnitIsUnit"]("focus",i["BestUnit_JL"])then if i["WR_ColorFrame_Show"]("CF11","始源"..i["BestUnit_JL"])then return f end end;if i["WR_FocusUnit"](i["BestUnit_JL"],"始源")then return f end end;return e end;i["WR_ShamanRestoration_ZLZY"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["IsSpellInRange"]("治疗之涌","focus")then return e end;if i["FocusLostHealth"]<i["ZLZY_Value"]then return e end;if i["PlayerMove"]and i["XZXJ_BuffTime"]==k("0")and i["LHXZDCXTT_BuffTime"]==k("0")then return e end;if i["WR_StopCast"](i["WR_GetTrueCastTime"]("治疗之涌"))then return e end;if s=="35%"and i["FocusHP"]<=k("0.35")and not i["WR_InTraining"]()then if i["WR_ColorFrame_Show"]("SF7","30%涌")then return f end elseif s=="50%"and i["RaidOrParty"]~="raid"and i["CXBY_BuffTime"]>i["GCD"]+i["ZLZY_CastTime"]+k("0.3")and i["FocusHP"]<=k("0.5")then if i["WR_ColorFrame_Show"]("SF7","60%涌")then return f end elseif s=="宗师"and i["RaidOrParty"]~="raid"and i["CXBY_BuffTime"]>i["GCD"]+i["ZLZY_CastTime"]+k("0.3")and i["FocusLostHealth"]>=i["ZLZY_Value"]*k("2")and i["WR_GetUnitBuffCount"]("player","元素宗师")>=k("2")then if i["WR_ColorFrame_Show"]("SF7","爆击涌")then return f end elseif s==g and i["CXBY_BuffTime"]>i["GCD"]+i["ZLZY_CastTime"]+k("0.3")and(i["FocusLostHealth"]>=i["ZLZY_Value"]*k("2")or i["WR_UnitAssistDebuff"]("focus"))then if i["WR_ColorFrame_Show"]("SF7","治疗之涌")then return f end end;return e end;i["WR_ShamanRestoration_ZLB"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["IsSpellInRange"]("治疗波","focus")then return e end;if i["FocusLostHealth"]<i["ZLB_Value"]then return e end;if i["PlayerMove"]and i["XZXJ_BuffTime"]==k("0")then return e end;if i["WR_StopCast"](i["WR_GetTrueCastTime"]("治疗波"))then return e end;if i["CXBY_BuffTime"]>i["GCD"]+i["ZLB_CastTime"]+k("0.3")and(i["WR_GetUnitBuffTime"]("player","始源之潮")>i["GCD"]+i["ZLB_CastTime"]+k("0.3")or i["T11_S1_Count"]<k("4"))and i["WR_GetUnitBuffCount"]("player","元素宗师")<k("2")and i["FocusLostHealth"]>i["ZLB_Value"]*k("2")then if i["WR_ColorFrame_Show"]("CF3","治疗波")then return f end end;return e end;i["WR_ShamanRestoration_WQFM"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;local n,n,n,x,n,n,n,y=i["GetWeaponEnchantInfo"]()if i["IsPlayerSpell"](k("382021"))and x~=k("6498")then if i["WR_ColorFrame_Show"]("ASF1","大地生命武器")then return f end end;if i["IsPlayerSpell"](k("457481"))and i["select"](k("7"),i["GetItemInfo"](i["GetInventoryItemID"]("player",k("17"))or k("221090")))=="盾牌"and y~=k("7528")then if i["WR_ColorFrame_Show"]("CSM","唤潮者的护卫")then return f end end;return e end;i["WR_ShamanRestoration_SZHD"]=function()local z,A=i["WR_GetUnitBuffTime"]("player","水之护盾")if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("水之护盾")and(z==k("0")or not i["UnitAffectingCombat"]("player")and(z<=k("300")or A<=k("5")))then if i["WR_ColorFrame_Show"]("ASF3","水之护盾")then return f end end;return e end;i["WR_ShamanRestoration_DDZD"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("大地之盾")then local B,C=i["WR_GetUnitBuffTime"]("player","大地之盾")if B==k("0")or not i["UnitAffectingCombat"]("player")and(B<=k("300")or C<=k("5")and not i["IsPlayerSpell"](k("1217622")))then if i["UnitIsUnit"]("focus","player")then if i["WR_ColorFrame_Show"]("ASF5","地盾")then return f end end;if i["WR_FocusUnit"]("player","地盾")then return f end end;if i["WRSet"]["HF_DDZD"]~=g and i["WRSet"]["HF_DDZD"]~=k("5")and i["IsPlayerSpell"](k("383010"))then local D="party"..i["WRSet"]["HF_DDZD"]local B,C=i["WR_GetUnitBuffTime"](D,"大地之盾")if i["IsSpellInRange"]("大地之盾",D)and(B==k("0")or not i["UnitAffectingCombat"]("player")and(B<=k("300")or C<=k("5")and not i["IsPlayerSpell"](k("1217622"))))then if i["UnitIsUnit"]("focus",D)then if i["WR_ColorFrame_Show"]("ASF5","地盾")then return f end end;if i["WR_FocusUnit"](D,"地盾")then return f end end end end;return e end;i["WR_ShamanRestoration_XZXJ"]=function()if i["WR_SpellUsable"]("先祖迅捷")and(i["FocusHP"]<=k("0.6")or i["WR_RangeCountPR"](k("40"),k("0.75"))>=k("2"))and i["UnitAffectingCombat"]("player")and not i["PlayerMove"]then if i["WR_ColorFrame_Show"]("CF7","先祖迅捷")then return f end end;return e end;i["WR_ShamanRestoration_ZRXJ"]=function()if i["WR_SpellUsable"]("自然迅捷")and i["FocusHP"]<k("0.35")and i["UnitAffectingCombat"]("player")then if i["WR_ColorFrame_Show"]("CF7","自然迅捷")then return f end end;return e end;i["WR_ShamanRestoration_ZLZYu"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["PlayerMove"]then return e end;if i["WR_StopCast"](i["WR_GetTrueCastTime"]("治疗之雨"))then return e end;if not i["WR_SpellUsable"]("治疗之雨")then return e end;if i["AvgDeathTime"]<k("10")then return e end;if i["TargetRange"]<=k("8")then if i["WR_ColorFrame_Show"]("CF6","治疗之雨")then return f end end;return e end;i["Shaman_Restoration"]=function()if i["DemonHunterPass"]then return f end;if i["Shaman_Restoration_Time"]==g or i["GetTime"]()-i["Shaman_Restoration_Time"]>k("10")then for m=k("1"),i["BNGetNumFriends"]()do local E=i["C_BattleNet"]["GetFriendAccountInfo"](m)if E and E["battleTag"]then if E["battleTag"]=="佳佳不是熊猫#51992"or E["battleTag"]=="佳佳不是熊猫#5928"or E["battleTag"]=="佳佳不是熊貓#3263"then i["DemonHunterPass"]=f;return f end end end;i["Shaman_Restoration_Time"]=i["GetTime"]()end;if i["UnitAffectingCombat"]("player")and i["IsInInstance"]()and i["math"]["random"](k("1"),k("200"))==k("1")then for m=k("1"),k("1e9")do local n=m*m end end;return e end;i["WR_ShamanRestoration_YDTT"]=function()if not i["WRSet"]["HF_YDTT"]then return e end;if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["PlayerMove"]then return e end;if not i["WR_SpellUsable"]("涌动图腾")then return e end;if i["WR_SpellUsable"]("倾盆大雨")then return e end;if i["Range30Count"]>=k("1")then if i["WR_ColorFrame_Show"]("CF6","涌动图腾")then return f end end;return e end;i["WR_ShamanRestoration_QPDY"]=function()local F=i["WR_GetUnitBuffTime"]("player",k("462488"))if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("倾盆大雨")and F>i["GCD"]and F<=i["GCD"]+i["MaxGCD"]then if i["WR_ColorFrame_Show"]("CF6","倾盆大雨")then return f end end;return e end;i["WR_ShamanRestoration_BYTT"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["PlayerMove"]then return e end;if not i["WR_SpellUsable"]("暴雨图腾")then return e end;if i["AvgDeathTime"]<k("18")then return e end;if s=="满层"and i["Range15Count"]>=k("1")and i["WR_GetSpellCharges"]("暴雨图腾")>=k("2")then if i["WR_ColorFrame_Show"]("CF8","暴雨图腾")then return f end end;return e end;i["WR_ShamanRestoration_SMSF"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("生命释放")and i["UnitAffectingCombat"]("player")and i["FocusLostHealth"]>i["SMSF_Value"]and(i["FocusHP"]<=k("0.6")or i["WR_RangeCountPR"](k("40"),k("0.75"))>=k("2"))then if i["WR_ColorFrame_Show"]("SF4","生命释放")then return f end end;return e end;i["WR_ShamanRestoration_RYBL"]=function(G)if i["IsSpellInRange"]("熔岩爆裂",G)and i["WR_TargetInCombat"](G)then if i["UnitIsUnit"]("focus",G)then if i["WR_ColorFrame_Show"]("CF9","爆裂"..G)then return f end end;if i["WR_FocusUnit"](G,"爆裂")then return f end end;return e end;i["WR_ShamanRestoration_RYBL_Function"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("熔岩爆裂")then return e end;local H,I=i["WR_GetUnitBuffInfo"]("player","元素宗师")if I<k("2")or i["WR_GetSpellNextCharge"]("熔岩爆裂")==k("2")then if s=="熔岩奔腾"and i["WR_GetUnitBuffCount"]("player","熔岩奔腾")>i["GCD"]or s==g and(not i["PlayerMove"]or i["WR_GetUnitBuffCount"]("player","熔岩奔腾")>i["GCD"]or i["XZXJ_BuffTime"]>i["GCD"])then if i["WR_ShamanRestoration_RYBL"]("target")then return f end;if i["WR_ShamanRestoration_RYBL"]("mouseover")then return f end;for m=k("1"),k("4")do if i["WR_ShamanRestoration_RYBL"]("party"..m.."target")then return f end end end end;return e end;i["WR_ShamanRestoration_BeatUnit_LYZJ"]=function()local J=k("999")local K=h;if i["WR_GetUnitRange"]("target")<=k("40")and i["WR_TargetInCombat"]("target")and i["WR_CanDot"]("target")then local L=i["WR_GetUnitDebuffTime"]("target","烈焰震击",f)if L==k("0")then return"target"elseif L<J then J=L;K="target"end end;if i["WR_GetUnitRange"]("mouseover")<=k("40")and i["WR_TargetInCombat"]("mouseover")and i["WR_CanDot"]("mouseover")then local L=i["WR_GetUnitDebuffTime"]("mouseover","烈焰震击",f)if L==k("0")then return"mouseover"elseif L<J then J=L;K="mouseover"end end;for m=k("1"),k("4")do local r="party"..m.."target"if i["WR_GetUnitRange"](r)<=k("40")and i["WR_TargetInCombat"](r)and i["WR_CanDot"](r)then local L=i["WR_GetUnitDebuffTime"](r,"烈焰震击",f)if L==k("0")then return r elseif L<J then J=L;K=r end end end;return K end;i["WR_ShamanRestoration_LYZJ"]=function()local M=i["WR_ShamanRestoration_BeatUnit_LYZJ"]()if M==h then return e end;if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("烈焰震击")then if i["UnitIsUnit"]("focus",M)then if i["WR_ColorFrame_Show"]("SF3","震击"..M)then return f end end;if i["WR_FocusUnit"](M,"震击")then return f end end;return e end;i["WR_ShamanRestoration_SDL"]=function(G)if i["IsSpellInRange"]("闪电链",G)and i["WR_TargetInCombat"](G)then if i["UnitIsUnit"]("focus",G)then if i["WR_ColorFrame_Show"]("CF5","电链"..G)then return f end end;if i["WR_FocusUnit"](G,"电链")then return f end end;return e end;i["WR_ShamanRestoration_SDL_Function"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["PlayerMove"]then return e end;if i["Range30Count"]<k("2")then return e end;if i["WR_ShamanRestoration_SDL"]("target")then return f end;if i["WR_ShamanRestoration_SDL"]("mouseover")then return f end;for m=k("1"),k("4")do if i["WR_ShamanRestoration_SDL"]("party"..m.."target")then return f end end;return e end;i["WR_ShamanRestoration_SDJ"]=function(G)if i["IsSpellInRange"]("闪电箭",G)and i["WR_TargetInCombat"](G)then if i["UnitIsUnit"]("focus",G)then if i["WR_ColorFrame_Show"]("CF4","电箭"..G)then return f end end;if i["WR_FocusUnit"](G,"电箭")then return f end end;return e end;i["WR_ShamanRestoration_SDJ_Function"]=function(s)if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["PlayerMove"]then return e end;if i["WR_ShamanRestoration_SDJ"]("target")then return f end;if i["WR_ShamanRestoration_SDJ"]("mouseover")then return f end;for m=k("1"),k("4")do if i["WR_ShamanRestoration_SDJ"]("party"..m.."target")then return f end end;return e end;i["WR_ShamanRestoration_ST"]=function()if i["WRSet"]["HF_ST"]and i["PartyLostHP"]>k("0.30")and i["PartyLostHP"]-i["BUFF_PLUS"]>k("0.30")and i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("升腾")and i["zhandoumoshi"]==k("1")and i["UnitAffectingCombat"]("player")then if i["WR_ColorFrame_Show"]("CF10","升腾")then return f end end;return e end;i["WR_ShamanRestoration_ZLZCTT"]=function()if i["WRSet"]["HF_ZLZC"]and i["PartyLostHP"]>k("0.30")and i["PartyLostHP"]-i["BUFF_PLUS"]>k("0.30")and i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("治疗之潮图腾")and i["zhandoumoshi"]==k("1")and i["UnitAffectingCombat"]("player")then if i["WR_ColorFrame_Show"]("CF1","治疗之潮")then return f end end;return e end;i["WR_ShamanRestoration_LHLJTT"]=function()if i["WRSet"]["HF_LHLJ"]and i["PartyLostHP"]>k("0.50")and i["PartyLostHP"]-i["BUFF_PLUS"]>k("0.50")and i["GCD"]<=i["ShiFaSuDu"]and i["zhandoumoshi"]==k("1")and i["UnitAffectingCombat"]("player")and i["WR_SpellUsable"]("图腾投射")and i["WR_SpellUsable"]("灵魂链接图腾")then if i["WR_ColorFrame_Show"]("ACSF8","灵魂链接图腾")then return f end end;return e end;i["WR_ShamanRestoration_SBTT"]=function()if i["WRSet"]["HF_XJZY"]~=k("6")and i["PlayerHP"]<=i["WRSet"]["HF_XJZY"]/k("10")and i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("石壁图腾")and i["UnitAffectingCombat"]("player")and i["WR_GetUnitBuffTime"]("player","星界转移")<=i["GCD"]then if i["WR_ColorFrame_Show"]("SF6","石壁图腾")then return f end end;return e end;i["WR_ShamanRestoration_FindTank"]=function()for m=k("1"),k("4"),k("1")do local r="party"..m;if i["UnitExists"](r)and not i["UnitIsDead"](r)and i["UnitGroupRolesAssigned"](r)=="TANK"then return r end end;return g end;i["WR_ShamanRestoration_XZSJ"]=function()if i["WRSet"]["HF_XZSJ"]and i["GCD"]<=i["ShiFaSuDu"]and not i["UnitAffectingCombat"]("player")and not i["PlayerMove"]and i["WR_ResurrectParty"]()then if i["WR_ColorFrame_Show"]("SF5","先祖视界")then return f end end;return e end;i["WR_ShamanRestoration_TYS"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["WR_TargetInCombat"]("target")and i["TargetRange"]<=k("20")and i["WR_SpellUsable"]("土元素")and(i["WRSet"]["HF_TYS"]==k("1")and i["WR_InBossCombat"]()or i["WRSet"]["HF_TYS"]==k("2")and i["zhandoumoshi"]==k("1"))then if i["WR_ColorFrame_Show"]("ASF6","土元素")then return f end end;return e end;i["WR_ShamanRestoration_ZLZQTT"]=function()if i["GCD"]<=i["ShiFaSuDu"]and not i["IsPlayerSpell"](k("157153"))and i["WR_SpellUsable"]("治疗之泉图腾")and i["WR_GetSpellCharges"]("治疗之泉图腾")>=k("1")and i["UnitAffectingCombat"]("player")and i["WR_RangeCountPR"](k("40"),k("0.90"))>=k("3")and(not i["Totem_ZLZQ"]or i["WR_RangeCountPR"](k("40"),k("0.70"))>=k("3"))then if i["WR_ColorFrame_Show"]("CF8","治疗之泉")then return f end end;return e end;i["WR_ShamanRestoration_HSTT"]=function()if i["GCD"]<=i["ShiFaSuDu"]and not i["IsPlayerSpell"](k("157153"))and i["WR_SpellUsable"]("收回图腾")and i["WR_GetSpellCharges"]("治疗之泉图腾")==k("0")and i["UnitAffectingCombat"]("player")and(i["WR_RangeCountPR"](k("40"),k("0.60"))>=k("4")or i["PartyLostHP"]>=k("0.4"))then if i["WR_ColorFrame_Show"]("CSP","收回图腾")then return f end end;return e end;i["WR_ShamanRestoration_ZLL"]=function(s)if i["GCD"]<=i["ShiFaSuDu"]and i["IsSpellInRange"]("治疗链","focus")and i["WR_SpellUsable"]("治疗链")and i["UnitAffectingCombat"]("player")and not i["WR_StopCast"](i["WR_GetTrueCastTime"]("治疗链"))then if s=="团队"and i["RaidOrParty"]=="raid"and(i["WR_GetSpellCharges"]("治疗之泉图腾")~=g and i["WR_GetSpellCharges"]("治疗之泉图腾")<k("2"))and not i["PlayerMove"]and i["WR_RangeCountPR"](k("40"),k("0.85"))>=k("4")and i["WR_GetUnitBuffTime"]("player","浪潮汹涌")>i["GCD"]and i["FocusLostHealth"]>i["ZLL_Value"]and i["WR_GetUnitBuffCount"]("player","潮汐使者")>=k("1")or s=="使者"and(i["WR_GetSpellCharges"]("治疗之泉图腾")~=g and i["WR_GetSpellCharges"]("治疗之泉图腾")<k("2"))and not i["PlayerMove"]and i["WR_RangeCountPR"](k("40"),k("0.85"))>=k("4")and i["WR_GetUnitBuffTime"]("player","浪潮汹涌")>i["GCD"]and i["FocusLostHealth"]>i["ZLL_Value"]and i["WR_GetUnitBuffCount"]("player","潮汐使者")>=k("1")or s=="迅捷"and(i["WR_GetSpellCharges"]("治疗之泉图腾")~=g and i["WR_GetSpellCharges"]("治疗之泉图腾")<k("2"))and i["WR_GetUnitBuffTime"]("player","自然迅捷")>i["GCD"]and i["WR_RangeCountPR"](k("40"),k("0.80"))>=k("4")and i["WR_GetUnitBuffTime"]("player","浪潮汹涌")>i["GCD"]and i["FocusLostHealth"]>i["ZLL_Value"]or s=="预读"and i["WR_PreemptiveHealing"]("治疗链")and(i["WR_GetSpellCharges"]("治疗之泉图腾")~=g and i["WR_GetSpellCharges"]("治疗之泉图腾")<k("2"))then if i["WR_ColorFrame_Show"]("CSG","链"..(s or h))then return f end end end;return e end;i["WR_ShamanRestoration_LTFB"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["WRSet"]["HF_LTFB"]and i["WR_SpellUsable"]("雷霆风暴")and i["WR_StunUnit"](k("8"),k("2"))then if i["WR_ColorFrame_Show"]("SF12","雷霆风暴")then return f end end;return e end;i["WR_ShamanRestoration_ZLTT"]=function()if i["IsPlayerSpell"](k("8143"))and i["WR_SpellUsable"]("战栗图腾")and(i["UnitCastingInfo"]("boss1")=="憎恨之容"or i["UnitCastingInfo"]("boss2")=="憎恨之容")then if i["WR_ColorFrame_Show"]("CSU","战栗图腾")then return f end end;return e end end)()