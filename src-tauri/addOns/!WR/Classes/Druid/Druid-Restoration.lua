local a=85;local b=55;local c=68;local d=62;local e=0==1;local f=not e;local g=nil;local h=""local i=_G;local j=_ENV;local k=i["tonumber"]return(function(...)i["WR_DruidRestoration"]=function()i["WR_DebugTime"](k("0"))if i["GetSpecialization"]()~=k("4")then return end;i["ShiFaSuDu"]=k("0.05")+i["WRSet"]["HF_SFSD"]*k("0.05")i["GCD"]=i["WR_GetGCD"]("野性印记")i["MaxGCD"]=i["WR_GetMaxGCD"](k("1.5"))i["PlayerInCombat"]=i["UnitAffectingCombat"]("player")i["PlayerHP"]=i["UnitHealth"]("player")/i["UnitHealthMax"]("player")i["FocusHP"]=i["WR_GetUnitHP"]("focus")i["PlayerMove"]=i["WR_PlayerMove"]()i["PlayerMP"]=i["WR_GetUnitMP"]("player")i["PartyLostHP"]=i["WR_PartyLostHP"]()i["TargetCloseRange"]=i["C_Spell"]["IsSpellInRange"]("撕碎","target")i["TargetRange"]=i["WR_GetUnitRange"]("target")i["FocusRange"]=i["WR_GetUnitRange"]("focus")i["FocusMustheal"]=i["WR_Mustheal"]("focus")i["FocusLostHealth"]=i["WR_GetUnitLostHealth"]("focus")i["CatForm"]=i["WR_GetUnitBuffTime"]("player","猎豹形态")~=k("0")i["MoonkinForm"]=i["WR_GetUnitBuffTime"]("player","枭兽形态")~=k("0")i["BearForm"]=i["WR_GetUnitBuffTime"]("player","熊形态")~=k("0")i["TreeForm"]=i["WR_GetUnitBuffTime"]("player","化身：生命之树")~=k("0")i["TargetInCombat"]=i["WR_TargetInCombat"]("target")i["InBossCombat"]=i["WR_InBossCombat"]()i["InRaidOrParty"]=i["WR_GetInRaidOrParty"]()i["HUCountRangeClose"]=i["WR_GetSpellRangeHarmUnitCount"]("撕碎",e)i["HUCountRange45"]=i["WR_GetRangeHarmUnitCount"](k("45"),not i["WR_InTraining"]())i["ResistOutburstTime"]=i["WR_ResistOutburstTime"]()i["MustDefenseTime_Bear"]=i["ResistOutburstTime"]<=i["GCD"]+i["MaxGCD"]if i["MustDefenseTime_Bear"]then if i["WR_GetRangeSpellTime"](k("45"),i["NotBearAoe"])<k("10")then i["MustDefenseTime_Bear"]=e end end;i["Resist"]=e;i["ResistSustained"]=i["WR_ResistSustained"]()i["MustDefenseTime"]=i["WR_MustDefenseTime"]()if i["ResistSustained"]or i["ResistOutburstTime"]<=k("5")or i["MustDefenseTime"]<=k("5")then i["Resist"]=f end;i["WR_DruidRestoration_SpecialCombat"]()i["WR_DruidRestoration_LastSpellTime"]()i["PartySum"]=k("1")i["HCS_BuffSum"]=k("0")i["SMZF_BuffSum"]=k("0")i["SMZF_BuffMinTime"]=k("15")if i["WR_GetUnitBuffTime"]("player","生命绽放",f)>k("0")then i["SMZF_BuffSum"]=i["SMZF_BuffSum"]+k("1")if i["WR_GetUnitBuffTime"]("player","生命绽放",f)<i["SMZF_BuffMinTime"]then i["SMZF_BuffMinTime"]=i["WR_GetUnitBuffTime"]("player","生命绽放",f)end end;if i["WR_GetUnitBuffTime"]("player","回春术",f)>k("0")then i["HCS_BuffSum"]=i["HCS_BuffSum"]+k("1")end;if i["WR_DruidRefreshTime"]==g then i["WR_DruidRefreshTime"]=i["GetTime"]()i["MasteryADD"]=i["WR_DruidRestoration_GetADD_Mastery"]("focus")i["XJZY_Health"]=i["WR_GetSpellValue"]("迅捷治愈","恢复","点生命值")+i["WR_GetSpellValue"]("迅捷治愈","回复"," 点生命值")i["XJZY_Health"]=i["XJZY_Health"]*i["MasteryADD"]i["YH_Health"]=i["WR_GetSpellValue"]("愈合","目标恢复","点生命值")+i["WR_GetSpellValue"]("愈合","额外恢复","点生命值")if i["WR_GetUnitBuffTime"]("player","丛林之魂")>i["GCD"]+i["WR_GetTrueCastTime"]("愈合")+k("0.2")then i["YH_Health"]=i["YH_Health"]*(k("1")+k("1.5"))end;i["YH_Health"]=i["YH_Health"]*i["MasteryADD"]i["LMWS_Health"]=i["WR_GetSpellValue"]("林莽卫士","迅捷治愈，为其恢复","点生命值")i["LMWS_Health"]=i["LMWS_Health"]*i["MasteryADD"]if i["PlayerInCombat"]then if i["UnitGroupRolesAssigned"](i["Unit"])~="TANK"then i["XJZY_Health"]=i["XJZY_Health"]*k("1.3")if i["WR_GetUnitBuffCount"]("player","节能施法")==k("0")then i["YH_Health"]=i["YH_Health"]*k("2.5")elseif i["WR_GetUnitBuffCount"]("player","节能施法")>=k("1")then i["YH_Health"]=i["YH_Health"]*k("1.3")end;i["LMWS_Health"]=i["LMWS_Health"]*k("1.5")else i["XJZY_Health"]=i["XJZY_Health"]*k("3")i["YH_Health"]=i["YH_Health"]*k("3")i["LMWS_Health"]=i["LMWS_Health"]*k("3")end end;if not i["UnitAffectingCombat"]("player")then for l=k("1"),k("4"),k("1")do local m="party"..l;if i["WR_GetUnitBuffTime"](m,"生命绽放",f)>k("0")then i["SMZF_BuffSum"]=i["SMZF_BuffSum"]+k("1")if i["WR_GetUnitBuffTime"](m,"生命绽放",f)<i["SMZF_BuffMinTime"]then i["SMZF_BuffMinTime"]=i["WR_GetUnitBuffTime"](m,"生命绽放",f)end end;if i["WR_GetUnitBuffTime"](m,"回春术",f)>k("0")then i["HCS_BuffSum"]=i["HCS_BuffSum"]+k("1")end;if not i["UnitIsDead"](m)and not i["UnitCanAttack"]("player",m)and i["UnitGroupRolesAssigned"](m)~="TANK"then i["PartySum"]=i["PartySum"]+k("1")end end;for l=k("1"),k("4"),k("1")do local m="party"..l;if i["UnitExists"](m)and i["UnitName"](m)~=g then if i["HF_SMZF_menuItems"][l]["text"]~=i["WR_ClassesColor"](m)then i["HF_SMZF_UpdateMenuItemText"](l,i["WR_ClassesColor"](m))i["HF_MSZF_UpdateMenuItemText"](l,i["WR_ClassesColor"](m))end else if i["HF_SMZF_menuItems"][l]["text"]~=h then i["HF_SMZF_UpdateMenuItemText"](l,h)i["HF_MSZF_UpdateMenuItemText"](l,h)end end end;if i["HF_SMZF_menuItems"][k("5")]["text"]~=i["WR_ClassesColor"]("player")then i["HF_SMZF_UpdateMenuItemText"](k("5"),i["WR_ClassesColor"]("player"))i["HF_MSZF_UpdateMenuItemText"](k("5"),i["WR_ClassesColor"]("player"))end end elseif i["GetTime"]()-i["WR_DruidRefreshTime"]>=k("1")then i["WR_DruidRefreshTime"]=g end;if i["MSG"]==k("1")then end;if i["WR_PriorityCheck"]()then return end;if i["WR_DruidRestoration_Function_StopCasting"]()then return end;if i["WR_DruidRestoration_Function_YD"]()then return end;if i["WR_DruidRestoration_Function_GL"]()then return end;if i["WR_DruidRestoration_SP"]("保命")then return f end;if i["WR_ZLS"](i["WRSet"]["HF_ZLS"])then return f end;if i["WR_ZLYS"](i["WRSet"]["HF_ZLYS"])then return f end;if i["WR_ZLYS2"](i["WRSet"]["HF_ZLYS"])then return f end;if i["WR_DruidRestoration_Function_ZWJS"]()then return end;if i["WR_DruidRestoration_Function_CancelForm"]()then return end;if i["WR_DruidRestoration_Function_KBHF"]()then return end;if i["WR_Druid_Function_FS"]()then return end;if i["WR_DruidRestoration_Function_BXFY"]()then return end;if i["WR_DruidRestoration_Function_BXJCDS"]()then return end;if i["WR_DruidRestoration_Function_BXZT"]()then return end;if i["WR_Druid_Function_AF"]()then return end;if i["WR_Druid_Function_DHPX"]()then return end;if i["WR_Druid_Function_YXYJ"]()then return end;if i["WR_Druid_Function_YTTJ"]()then return end;if i["WR_DruidRestoration_Function_JH"]()then return end;if i["WR_DruidRestoration_Function_ZRZY"]()then return end;if i["WR_DruidRestoration_Function_YHZT"]()then return end;if i["WR_DruidRestoration_Function_XS"]()then return end;if i["WR_DruidRestoration_SP"]("常驻")then return f end;if i["WR_WuQi"](k("3"),i["WRSet"]["HF_WuQi"])then return f end;if i["WR_DruidRestoration_SP"]("爆发")then return f end;if i["WR_WuQi"](k("3"),i["WRSet"]["HF_WuQi"])then return f end;if i["WR_FocusMaxWeightUnit"]()then return end;if i["WR_DruidRestoration_Function_DYJS"]()then return end;if i["WR_DruidRestoration_Function_LMWS"]()then return end;if i["WR_DruidRestoration_Function_HSSMZS"]()then return end;if i["FocusHP"]<k("0.40")or i["WR_GetRangeSpellTime"](k("45"),i["DangerOutburstAoe"])<=k("1.5")and i["FocusHP"]<k("0.8")then if i["WR_DruidRestoration_XJZY"]("急救迅愈")then return f end;if i["WR_DruidRestoration_YH"]("迅捷")then return f end;if i["WR_DruidRestoration_YH"]("化身")then return f end end;if i["FocusHP"]<k("0.60")and i["WR_GetSpellCharges"]("自然迅捷")>=k("1")and i["WR_GetSpellNextCharge"]("自然迅捷")<k("2")then if i["WR_DruidRestoration_YH"]("迅捷")then return f end end;if i["WR_DruidRestoration_ZRDSH"]()then return end;if i["WR_DruidRestoration_Function_WLZZ"]()then return end;if i["WR_DruidRestoration_Function_FanSheng"]()then return end;if i["WR_DruidRestoration_Function_YXCZ"]()then return end;if i["WR_DruidRestoration_TSXD"]()then return end;if i["FocusHP"]<k("0.6")then if i["WR_DruidRestoration_XJZY"]("60%迅愈")then return f end;if i["WR_DruidRestoration_YH"]("节能")then return f end end;if i["WR_DruidRestoration_Function_BHQF"]()then return end;if i["WR_DruidRestoration_XJZY"]()then return f end;if i["WR_DruidRestoration_Function_SNLAJJ"]()then return end;if i["WR_DruidRestoration_YH"]("节能")then return f end;if i["WR_DruidRestoration_Function_HCS_Assist"]()then return end;if i["WR_DruidRestoration_Function_SMZF"]()then return end;if i["WR_DruidRestoration_YH"]("HOT")then return f end;if i["WR_DruidRestoration_Function_HCS"]()then return end;if i["WR_DruidRestoration_YH"]("填充")then return f end;if i["WR_DruidRestoration_Function_Fight"]()then return end;i["WR_HideColorFrame"](i["zhandoumoshi"])end;i["WR_DruidRestoration_TSXD"]=function()if i["IsPlayerSpell"](k("426784"))and i["IsPlayerSpell"](k("158504"))and i["zhandoumoshi"]==k("1")then if i["WR_GetUnitBuffTime"]("player","野性之心")==k("0")and i["WR_GetUnitBuffTime"]("player",k("429474"))>i["GCD"]+i["MaxGCD"]and i["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")==k("0")then if i["WR_DruidRestoration_Function_XYS"]()then return f end end;if i["WR_GetUnitBuffTime"]("player","野性之心")>i["GCD"]and i["WR_GetUnitBuffTime"]("player",k("429474"))>i["GCD"]then if i["WR_DruidRestoration_Function_XHS"]()then return f end;if i["WR_DruidRestoration_Function_FN"]()then return f end end end;return e end;i["WR_DruidRestoration_Function_Fight"]=function()if i["GCD"]>k("0")then return e end;if i["UnitCastingInfo"]("boss1")=="宇宙奇点"then return e end;if i["WRSet"]["HF_SHXT"]==k("4")then return e end;if i["WR_DruidRestoration_YXZX"]()then return f end;if i["WR_GetUnitDebuffTime"]("player","德鲁伊长者之唤")>k("6")or not i["IsPlayerSpell"](k("426784"))then if i["WR_DruidRestoration_Function_XYS"]()then return f end end;if i["WR_GetUnitBuffTime"]("player",k("429474"))>i["GCD"]then if i["WR_DruidRestoration_Function_XHS"]()then return f end;if i["WR_DruidRestoration_Function_FN"]()then return f end end;if not i["IsPlayerSpell"](k("439528"))then if i["WR_DruidRestoration_Function_YYS"]()then return f end;if i["HUCountRange45"]<k("3")then if i["WR_DruidRestoration_Function_YHS"]()then return f end end end;if i["WRSet"]["HF_SHXT"]==k("1")or i["WRSet"]["HF_SHXT"]==k("2")then if i["WR_GetUnitBuffTime"]("player","化身")==k("0")then if i["WR_SpellUsable"]("猎豹形态")and not i["CatForm"]and not i["TreeForm"]and i["HUCountRangeClose"]>=k("1")and not i["ResistSustained"]and i["ResistOutburstTime"]>k("5")and i["SMZF_BuffMinTime"]>k("2")then if i["WR_DruidRestoration_Function_XL"]()then return f end;if i["WR_DruidRestoration_Function_SS"]()then return f end;if not i["IsPlayerSpell"](k("449193"))then if i["WR_ColorFrame_Show"]("CF8","猎豹形态")then return f end end end;if i["WR_DruidRestoration_Function_GeLie"]()then return f end;if i["WR_DruidRestoration_Function_XMSY"]()then return f end;if i["WR_DruidRestoration_Function_XL"]()then return f end;if i["WR_DruidRestoration_Function_TJ"]()then return f end;if i["WR_DruidRestoration_Function_SS"]()then return f end;if i["WR_DruidRestoration_Function_HS"]()then return f end end end;if i["WRSet"]["HF_SHXT"]==k("1")or i["WRSet"]["HF_SHXT"]==k("3")then if i["WR_DruidRestoration_Function_YYS"]()then return f end;if i["WR_DruidRestoration_Function_YHS"]()then return f end;if i["WR_DruidRestoration_Function_XHS"]()then return f end;if i["WR_DruidRestoration_Function_FN"]()then return f end end;return e end;i["WR_DruidRestoration_Function_StopCasting"]=function()if i["UnitCastingInfo"]("player")~=g and(i["UnitCastingInfo"]("player")=="新生"and not i["WR_PartyIsDeath"]()or i["UnitCastingInfo"]("player")=="星火术"and(i["WRSet"]["HF_BXFY"]and i["MustDefenseTime_Bear"]and not i["BearForm"]or i["FocusHP"]<k("0.60")and i["Resist"]))then if i["WR_ColorFrame_Show"]("CSN","停止施法")then return f end end;return e end;i["WR_DruidRestoration_Function_YD"]=function()if i["InRaidOrParty"]=="raid"then return e end;if i["WR_Escape"]()and i["WR_SpellUsable"]("影遁")then if i["WR_ColorFrame_Show"]("ASF1","影遁")then return f end end;return e end;i["WR_DruidRestoration_Function_GL"]=function()if i["WRSet"]["HF_GL"]~=k("6")and(i["PlayerHP"]<i["WRSet"]["HF_GL"]/k("10")or i["MustDefenseTime"]<=k("1")and i["PlayerHP"]<k("0.8"))and i["PlayerInCombat"]and i["WR_SpellUsable"]("甘霖")and(i["ZLS_EndTime"]==g or i["GetTime"]()-i["ZLS_EndTime"]>k("0.5"))and(i["ZLYS_EndTime"]==g or i["GetTime"]()-i["ZLYS_EndTime"]>k("0.5"))then i["GL_EndTime"]=i["GetTime"]()+i["GCD"]if i["WR_ColorFrame_Show"]("CF2","甘霖")then return f end end;return e end;i["WR_DruidRestoration_Function_ZLS"]=function()if i["WRSet"]["HF_ZLS"]~=k("5")and(i["PlayerHP"]<i["WRSet"]["HF_ZLS"]/k("10")or i["MustDefenseTime"]<=k("1")and i["PlayerHP"]<k("0.8"))and i["PlayerInCombat"]and i["WR_Use_ZLS"]()and(i["GL_EndTime"]==g or i["GetTime"]()-i["GL_EndTime"]>k("0.5"))and(i["ZLYS_EndTime"]==g or i["GetTime"]()-i["ZLYS_EndTime"]>k("0.5"))then i["ZLS_EndTime"]=i["GetTime"]()+i["GCD"]if i["WR_ColorFrame_Show"]("CSF","治疗石")then return f end end;return e end;i["WR_DruidRestoration_Function_ZLYS"]=function()if i["WRSet"]["HF_ZLYS"]~=k("5")and(i["PlayerHP"]<i["WRSet"]["HF_ZLYS"]/k("10")or i["MustDefenseTime"]<=k("1")and i["PlayerHP"]<k("0.8"))and i["PlayerInCombat"]and i["WR_Use_ZLYS"]()and(i["GL_EndTime"]==g or i["GetTime"]()-i["GL_EndTime"]>k("0.5"))and(i["ZLS_EndTime"]==g or i["GetTime"]()-i["ZLS_EndTime"]>k("0.5"))then i["ZLYS_EndTime"]=i["GetTime"]()+i["GCD"]if i["WR_ColorFrame_Show"]("CST","治疗药水")then return f end end;return e end;i["WR_DruidRestoration_Function_ZWJS"]=function()if i["WR_GetUnitBuffTime"]("player","树皮术")==k("0")and(i["MustDefenseTime"]<k("5")or i["InBossCombat"]and i["ResistSustained"]and i["PlayerHP"]<k("0.95"))then if i["WRSet"]["HF_SPS"]and i["UnitAffectingCombat"]("player")and i["WR_SpellUsable"]("树皮术")and(i["TMSP_EndTime"]==g or i["GetTime"]()-i["TMSP_EndTime"]>k("0.5"))then i["SPS_EndTime"]=i["GetTime"]()+i["GCD"]if i["WR_ColorFrame_Show"]("CF3","树皮术")then return f end end end;return e end;i["WR_DruidRestoration_Function_CancelForm"]=function()if i["WRSet"]["HF_JCDS"]and i["WR_Unbind"]("player")and(i["BearForm"]or i["CatForm"]or i["TreeForm"]and i["IsPlayerSpell"](k("33891")))then if i["WR_ColorFrame_Show"]("CF10","解除变形")then return f end end;return e end;i["WR_DruidRestoration_Function_KBHF"]=function()if i["BearForm"]and i["IsPlayerSpell"](k("22842"))and i["WR_SpellUsable"]("狂暴回复")and(i["CastTime_KBHF"]==g or i["GetTime"]()-i["CastTime_KBHF"]>k("3"))and(i["CastTime_DHPX"]==g or i["GetTime"]()-i["CastTime_DHPX"]>k("3"))then if i["WR_ColorFrame_Show"]("CF5","狂暴回复")then return f end end;return e end;i["WR_DruidRestoration_Function_BXFY"]=function()if i["WRSet"]["HF_BXFY"]and i["WR_SpellUsable"]("熊形态")and i["MustDefenseTime_Bear"]and not i["BearForm"]then if i["WR_ColorFrame_Show"]("CF7","变熊防御")then return f end end;return e end;i["WR_DruidRestoration_Function_BXJCDS"]=function()if i["WRSet"]["HF_JCDS"]and not i["BearForm"]and not i["CatForm"]and not i["MoonkinForm"]and not i["TreeForm"]and i["WR_Unbind"]("player")then if i["WR_ColorFrame_Show"]("CF7","变熊解除")then return f end end;return e end;i["WR_DruidRestoration_Function_BXZT"]=function()if i["MustDefenseTime_Bear"]and i["BearForm"]and i["PlayerHP"]>k("0.5")then if i["WR_ColorFrame_Show"]("Stop","变熊暂停")then return f end end;return e end;i["WR_DruidRestoration_Function_JH"]=function()if not i["WR_SpellUsable"]("激活")then return e end;if not i["PlayerInCombat"]then return e end;if not i["TreeForm"]then return e end;local n;if i["WR_GetUnitBuffTime"]("player","魔力之源")>k("0")then n=k("0.05")else n=k("0")end;if i["WR_GetUnitBuffTime"]("player","化身")>k("8")and(i["PlayerMP"]<k("0.3")or i["PlayerMP"]<k("0.9")-n and(i["InBossCombat"]or i["WR_GetUnitBuffTime"]("player","化身")>k("10")))then if i["WR_ColorFrame_Show"]("SF1","激活")then return f end end;return e end;i["WR_DruidRestoration_ZRZY"]=function(o)if not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("45")and i["WR_CanRemoveUnitDebuff"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("SF2","愈"..o)then return f end end;if i["WR_FocusUnit"](o,"愈")then return f end end;return e end;i["WR_DruidRestoration_Function_ZRZY"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("自然之愈")then return e end;if i["WRSet"]["HF_ZRZY"]==k("1")or i["WRSet"]["HF_ZRZY"]==k("2")then if i["WR_DruidRestoration_ZRZY"]("mouseover")then return f end end;if i["WRSet"]["HF_ZRZY"]==k("1")or i["WRSet"]["HF_ZRZY"]==k("3")then if i["WR_DruidRestoration_ZRZY"]("player")then return f end end;if i["WRSet"]["HF_ZRZY"]==k("1")then local p;if i["InRaidOrParty"]=="raid"then p=k("25")elseif i["InRaidOrParty"]=="party"then p=k("4")end;if p==g then return e end;for l=k("1"),p,k("1")do if i["WR_DruidRestoration_ZRZY"](i["InRaidOrParty"]..l)then return f end end end;return e end;i["WR_DruidRestoration_Function_YHZT"]=function()if i["CastTime_YH"]~=g and i["GetTime"]()-i["CastTime_YH"]<k("0.15")then if i["WR_ColorFrame_Show"]("Stop","愈合暂停")then return f end end;return e end;i["WR_DruidRestoration_Function_XS"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["PlayerInCombat"]and i["WR_ResurrectParty"]()and not i["PlayerMove"]then if i["WR_ColorFrame_Show"]("SF4","新生")then return f end end;return e end;i["WR_DruidRestoration_Function_DYJS"]=function()if not i["UnitIsDead"]("focus")and i["UnitAffectingCombat"]("focus")and not i["UnitCanAttack"]("focus","player")and i["FocusRange"]<=k("45")and i["WR_GetUnitBuffTime"]("focus","铁木树皮")==k("0")then if i["WRSet"]["HF_TMSP"]and i["WR_SpellUsable"]("铁木树皮")and not i["BearForm"]and i["FocusHP"]<k("0.35")and i["UnitGroupRolesAssigned"]("focus")=="TANK"and(i["ResistSustained"]or i["ResistOutburstTime"]<=k("5")or not i["InBossCombat"])then i["TMSP_EndTime"]=i["GetTime"]()+i["GCD"]if i["WR_ColorFrame_Show"]("CF4","铁皮F")then return f end end end;return e end;i["WR_DruidRestoration_Function_LMWS"]=function()if i["GCD"]<i["MaxGCD"]-k("0.3")and i["WR_SpellUsable"]("林莽卫士")and i["PlayerInCombat"]and i["FocusRange"]<=k("45")and(i["FocusLostHealth"]>i["LMWS_Health"]or i["FocusMustheal"])and i["PartyLostHP"]>k("0.1")+(k("3")-i["WR_GetSpellCharges"]("林莽卫士"))*k("0.15")then if i["WR_ColorFrame_Show"]("F8","林莽卫士")then return f end end;return e end;i["WR_DruidRestoration_Function_HSSMZS"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["IsPlayerSpell"](k("33891"))and i["PlayerInCombat"]and(i["WR_GetUnitBuffTime"]("player","化身")~=k("0")and not i["TreeForm"]or i["WRSet"]["HF_HS"]and i["zhandoumoshi"]==k("1")and i["WR_GetUnitBuffTime"]("player","化身")==k("0")and i["WR_SpellUsable"]("化身：生命之树"))then if i["WR_ColorFrame_Show"]("ASF8","生命之树")then return f end end;return e end;i["WR_DruidRestoration_XJZY"]=function(q)if i["GCD"]>i["ShiFaSuDu"]then return e end;local r;if q==g then r="迅捷治愈"else r=q end;if i["WR_GetGCD"]("迅捷治愈")<=k("0.2")and not i["UnitCanAttack"]("focus","player")and i["FocusRange"]<=k("45")and(i["FocusLostHealth"]>i["XJZY_Health"]or i["FocusMustheal"])and(i["WR_GetUnitBuffTime"]("focus","愈合",f)~=k("0")or i["WR_GetUnitBuffTime"]("focus",k("48438"),f)~=k("0")or i["WR_GetUnitBuffTime"]("focus","回春术",f)~=k("0"))and(i["WR_GetUnitBuffCount"]("player","森林再生")<=k("1")or i["PlayerInCombat"]and i["UnitGroupRolesAssigned"]("focus")~="TANK"and(i["FocusHP"]<k("0.3")or i["PartyLostHP"]>k("0.3")or i["Resist"]or i["WR_GetUnitBuffCount"]("player","节能施法")==k("0")or i["zhandoumoshi"]==k("1")))then if i["WR_ColorFrame_Show"]("SF5",r)then return f end end;return e end;i["WR_DruidRestoration_YH"]=function(q)if i["UnitCastingInfo"]("player")=="愈合"then if i["GCD"]>k("0")then return e end end;if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("愈合")and not i["UnitCanAttack"]("player","focus")and i["FocusRange"]<=k("45")and(i["FocusLostHealth"]>i["YH_Health"]or i["FocusMustheal"]or i["FocusHP"]<k("0.75"))and(i["TreeForm"]or i["WR_GetUnitBuffTime"]("player","自然迅捷")~=k("0")or i["WR_GetUnitBuffTime"]("player",k("429438"))~=k("0")or not i["PlayerMove"]and not i["WR_StopCast"](i["WR_GetTrueCastTime"]("愈合")))then if q=="迅捷"and i["PlayerInCombat"]and i["WR_SpellUsable"]("自然迅捷")then if i["WR_ColorFrame_Show"]("CSG","迅捷愈合")then return f end end;if q=="化身"and i["TreeForm"]then if i["WR_ColorFrame_Show"]("SF6","化身愈合")then return f end end;if q=="节能"and i["WR_GetUnitBuffCount"]("player","节能施法")~=k("0")and not i["CatForm"]and not i["MoonkinForm"]then if i["WR_ColorFrame_Show"]("SF6","节能愈合")then return f end end;if q=="HOT"and i["WR_GetUnitBuffTime"]("focus","愈合",f)==k("0")then if i["WR_ColorFrame_Show"]("SF6","HOT愈合")then return f end end;if q=="填充"and(i["FocusHP"]<k("0.65")or i["ResistOutburst5"]or i["WR_UnitAssistDebuff"]("focus")or not i["PlayerInCombat"]or i["zhandoumoshi"]==k("1"))then if i["WR_ColorFrame_Show"]("SF6","填充愈合")then return f end end end;return e end;i["WR_DruidRestoration_Function_WLZZ"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["WRSet"]["HF_HS"]and i["zhandoumoshi"]==k("1")and i["PlayerInCombat"]and i["WR_SpellUsable"]("万灵之召")and not i["WR_StopCast"](k("3")+k("0.2"))and i["WR_GetUnitBuffTime"]("player","化身")==k("0")then if i["WR_ColorFrame_Show"]("CF6","万灵之召")then return f end end;return e end;i["WR_DruidRestoration_ZRDSH"]=function()if i["GCD"]<=i["ShiFaSuDu"]and i["zhandoumoshi"]==k("1")and i["PlayerInCombat"]and i["WR_SpellUsable"]("自然的守护")then if i["WR_ColorFrame_Show"]("ASF6","自然的守护")then return f end end;return e end;i["WR_DruidRestoration_Function_FanSheng"]=function()if i["WRSet"]["HF_FanSheng"]and i["zhandoumoshi"]==k("1")and i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("繁盛")and i["PlayerInCombat"]and i["HCS_BuffSum"]>=i["PartySum"]and i["WR_GetGCD"]("野性成长")>i["GCD"]then if i["WR_ColorFrame_Show"]("SF7","繁盛")then return f end end;return e end;i["WR_DruidRestoration_Function_YXCZ"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WR_SpellUsable"]("野性成长")and not i["PlayerMove"]and not i["WR_StopCast"](i["WR_GetTrueCastTime"]("野性成长"))and(i["ResistSustained"]or i["ResistOutburstTime"]<=k("3")or i["WR_RangeCountPR"](k("45"),k("0.90"))>=k("4")or i["WR_PreemptiveHealing"]("野性成长"))then if i["WR_ColorFrame_Show"]("SF8","野性成长")then return f end end;return e end;i["WR_DruidRestoration_Function_BHQF"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if i["WRSet"]["HF_BHQF"]and i["WR_SpellUsable"]("百花齐放")and i["PlayerInCombat"]and not i["PlayerMove"]and i["SpecialCombat_CanHot"]and i["WR_GetUnitBuffTime"]("player","百花齐放")<=k("25")and i["WR_GetUnitBuffTime"]("player","春暖花开")==k("0")and(not i["CatForm"]and not i["MoonkinForm"]or i["zhandoumoshi"]==k("1")or i["HUCountRangeClose"]==k("0"))then if i["WR_ColorFrame_Show"]("CSY","百花齐放")then return f end end;return e end;i["WR_DruidRestoration_SNLAJJ"]=function(o)if i["WR_GetUnitRange"](o)<=k("45")and(o=="player"and(i["Resist"]or i["WR_UnitAssistDebuff"]("player"))or not i["UnitCanAttack"](o,"player")and(not i["CatForm"]and not i["MoonkinForm"]and not i["InBossCombat"]or i["WR_UnitAssistDebuff"](o)or i["UnitIsUnit"]("focus",o)and(i["ResistSustained"]or i["ResistOutburstTime"]<=k("5")or i["UnitGroupRolesAssigned"](o)=="TANK")))then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF9","结界"..o)then return f end end;if i["WR_FocusUnit"](o,"结界")then return f end end;return e end;i["WR_DruidRestoration_Function_SNLAJJ"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("塞纳里奥结界")then return e end;if i["WR_DruidRestoration_SNLAJJ"]("focus")then return f end;if i["WR_DruidRestoration_SNLAJJ"]("player")then return f end;for l=k("1"),k("4"),k("1")do if i["WR_DruidRestoration_SNLAJJ"]("party"..l)then return f end end;return e end;i["WR_DruidRestoration_HCS_Assist"]=function(o)if not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("45")and(i["WR_GetUnitBuffTime"](o,"回春术",f)==k("0")or i["IsPlayerSpell"](k("155675"))and i["WR_GetUnitBuffTime"](o,"回春术（萌芽）",f)==k("0"))and(i["WR_UnitAssistDebuff"](o)or i["UnitIsUnit"]("focus",o)and i["UnitGroupRolesAssigned"](o)=="TANK"and not i["ResistSustained"])then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF10","回春协助"..o)then return f end end;if i["WR_FocusUnit"](o,"回春协助")then return f end end;return e end;i["WR_DruidRestoration_Function_HCS_Assist"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("回春术")then return e end;if i["WR_DruidRestoration_HCS_Assist"]("focus")then return f end;if i["WR_DruidRestoration_HCS_Assist"]("player")then return f end;for l=k("1"),k("4"),k("1")do if i["WR_DruidRestoration_HCS_Assist"]("party"..l)then return f end end;return e end;i["WR_DruidRestoration_SMZF"]=function(o)if not i["UnitCanAttack"]("player",o)and not i["UnitIsDead"](o)and i["WR_GetUnitRange"](o)<=k("45")and(i["WR_GetUnitBuffTime"](o,"生命绽放",f)==k("0")and i["SMZF_BuffSum"]<k("2")or i["WR_GetUnitBuffTime"](o,"生命绽放",f)>k("0")and i["WR_GetUnitBuffTime"](o,"生命绽放",f)<=k("4.5")and(i["zhandoumoshi"]~=k("1")or i["WR_GetUnitBuffTime"](o,"回春术",f)>k("0"))and(not i["CatForm"]and not i["MoonkinForm"]or not i["PlayerInCombat"]))and(not i["CatForm"]and not i["MoonkinForm"]or i["zhandoumoshi"]==k("1")or i["HUCountRangeClose"]==k("0"))and i["SpecialCombat_CanHot"]then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("SF12","绽放"..o)then return f end end;if i["WR_FocusUnit"](o,"绽放")then return f end end;return e end;i["WR_DruidRestoration_Function_SMZF"]=function()if i["GCD"]>i["ShiFaSuDu"]then return e end;if not i["WR_SpellUsable"]("生命绽放")then return e end;if i["WRSet"]["HF_SMZF"]==k("6")then return e end;if i["WRSet"]["HF_SMZF"]==k("5")then if i["WR_DruidRestoration_SMZF"]("player")then return f end end;if i["WRSet"]["HF_SMZF"]<=k("4")then for l=k("1"),k("4"),k("1")do if i["WRSet"]["HF_SMZF"]==l then if i["WR_DruidRestoration_SMZF"]("party"..l)then return f end end end end;if i["IsPlayerSpell"](k("392301"))then if i["WRSet"]["HF_MSZF"]==k("5")then if i["WR_DruidRestoration_SMZF"]("player")then return f end end;for l=k("1"),k("4"),k("1")do if i["WRSet"]["HF_MSZF"]==l then if i["WR_DruidRestoration_SMZF"]("party"..l)then return f end end end end;return e end;i["WR_DruidRestoration_HCS"]=function(o,q)if not i["UnitCanAttack"]("player",o)and not i["UnitIsDead"](o)and i["WR_GetUnitRange"](o)<=k("45")and(i["UnitHealth"](o)/i["UnitHealthMax"](o)<=k("0.6")or not i["PlayerInCombat"]or i["zhandoumoshi"]==k("1")or i["SpecialCombat_HCS"]or i["ResistOutburstTime"]<k("10")or i["ResistSustained"])then if q==g and i["WR_GetUnitBuffTime"](o,"回春术",f)<=k("3.6")then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF10","回春"..o)then return f end end;if i["WR_FocusUnit"](o,"回春")then return f end end;if q=="HOT"and i["WR_GetUnitBuffTime"](o,"回春术",f)<=k("3.6")and i["WR_GetUnitBuffTime"](o,"生命绽放",f)<i["GCD"]then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF10","HOT回春"..o)then return f end end;if i["WR_FocusUnit"](o,"HOT回春")then return f end end;if q=="萌芽"and i["WR_GetUnitBuffTime"](o,"回春术（萌芽）",f)<=k("3.6")and i["WR_GetUnitBuffTime"](o,"生命绽放",f)<i["GCD"]then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF10","萌芽"..o)then return f end end;if i["WR_FocusUnit"](o,"萌芽")then return f end end end;return e end;i["WR_DruidRestoration_Function_HCS"]=function()local p=k("4")if i["InRaidOrParty"]=="raid"then p=k("25")end;if i["GCD"]<=i["ShiFaSuDu"]and i["WR_SpellUsable"]("回春术")then if i["WR_DruidRestoration_HCS"]("player","HOT")then return f end;for l=k("1"),p,k("1")do if i["WR_DruidRestoration_HCS"](i["InRaidOrParty"]..l,"HOT")then return f end end;if i["WR_DruidRestoration_HCS"]("player")then return f end;for l=k("1"),p,k("1")do if i["WR_DruidRestoration_HCS"](i["InRaidOrParty"]..l)then return f end end;if i["IsPlayerSpell"](k("155675"))then if i["WR_DruidRestoration_HCS"]("player","萌芽")then return f end;for l=k("1"),p,k("1")do if i["WR_DruidRestoration_HCS"](i["InRaidOrParty"]..l,"萌芽")then return f end end end end;return e end;i["WR_DruidRestoration_JBFQ"]=function(o,s)if i["WRSet"]["HF_JBFQ"]~=k("1")then return e end;if i["WR_SpellUsable"]("激变蜂群")and not i["UnitCanAttack"]("player",o)and i["WR_GetUnitRange"](o)<=k("45")and i["WR_GetUnitBuffCount"](o,"激变蜂群",f)==s and i["ResistOutburstTime"]>k("5")then return f end;return e end;i["WR_DruidRestoration_XYS"]=function(o)if(i["UnitHealth"](o)/i["UnitHealthMax"](o)<k("0.95")or i["WR_InTraining"]())and i["WR_GetUnitRange"](o)<=k("45")and i["WR_TargetInCombat"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("ACSF8","星涌"..o)then return f end end;if i["WR_FocusUnit"](o,"星涌")then return f end end;return e end;i["WR_DruidRestoration_Function_XYS"]=function()if not i["WR_SpellUsable"]("星涌术")then return e end;if i["WR_DruidRestoration_XYS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_XYS"](m)then return f end end;return e end;i["WR_DruidRestoration_YYS"]=function(o)if i["UnitHealth"](o)/i["UnitHealthMax"](o)<k("1")and i["WR_CanDot"](o)and i["WR_GetUnitRange"](o)<=k("45")and i["WR_GetUnitDebuffInfo"](o,"阳炎术",f)<=k("5.4")and i["WR_TargetInCombat"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSP","阳炎"..o)then return f end end;if i["WR_FocusUnit"](o,"阳炎")then return f end end;return e end;i["WR_DruidRestoration_Function_YYS"]=function()if not i["WR_SpellUsable"]("阳炎术")then return e end;if i["CatForm"]and i["UnitPower"]("player",k("3"))>=k("40")and i["TargetCloseRange"]then return e end;if i["WR_DruidRestoration_YYS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_YYS"](m)then return f end end;return e end;i["WR_DruidRestoration_YHS"]=function(o)if i["UnitHealth"](o)/i["UnitHealthMax"](o)<k("1")and i["WR_CanDot"](o)and i["WR_GetUnitRange"](o)<=k("45")and i["WR_GetUnitDebuffInfo"](o,"月火术",f)<=k("5.4")and i["WR_TargetInCombat"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("SF3","月火"..o)then return f end end;if i["WR_FocusUnit"](o,"月火")then return f end end;return e end;i["WR_DruidRestoration_Function_YHS"]=function()if not i["WR_SpellUsable"]("月火术")then return e end;if i["CatForm"]and i["UnitPower"]("player",k("3"))>=k("40")and i["TargetCloseRange"]then return e end;if i["WR_DruidRestoration_YHS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_YHS"](m)then return f end end;return e end;i["WR_DruidRestoration_XHS"]=function(o)if i["WR_GetUnitRange"](o)<=k("45")and i["WR_TargetInCombat"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSK","星火"..o)then return f end end;if i["WR_FocusUnit"](o,"星火")then return f end end;return e end;i["WR_DruidRestoration_Function_XHS"]=function()if i["zhandoumoshi"]==k("1")then return e end;if not i["WR_SpellUsable"]("星火术")then return e end;if i["InBossCombat"]then return e end;if i["HUCountRange45"]<k("2")then return e end;if i["WR_GetUnitBuffTime"]("player",k("429474"))==k("0")and(i["PlayerMove"]or i["WR_StopCast"](i["WR_GetTrueCastTime"]("星火术")))then return e end;if i["WR_DruidRestoration_XHS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_XHS"](m)then return f end end;return e end;i["WR_DruidRestoration_FN"]=function(o)if i["WR_GetUnitRange"](o)<=k("45")and i["WR_TargetInCombat"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSO","愤怒"..o)then return f end end;if i["WR_FocusUnit"](o,"愤怒")then return f end end;return e end;i["WR_DruidRestoration_Function_FN"]=function()if not i["WR_SpellUsable"]("愤怒")then return e end;if not i["TreeForm"]and i["WR_GetUnitBuffTime"]("player",k("429474"))==k("0")and(i["PlayerMove"]or i["WR_StopCast"](i["WR_GetTrueCastTime"]("愤怒")))then return e end;if i["WR_DruidRestoration_FN"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_FN"](m)then return f end end;return e end;i["WR_DruidRestoration_YXZX"]=function()if i["WRSet"]["HF_YXZX"]and i["WR_SpellUsable"]("野性之心")and i["PlayerInCombat"]then if i["WR_ColorFrame_Show"]("ASF2","野性之心")then return f end end;return e end;i["WR_DruidRestoration_GetADD_Mastery"]=function(o)local p=k("1")local t=i["GetMastery"]()/k("2")/k("100")if i["WR_GetUnitBuffTime"](o,"生命绽放",f)~=k("0")then if i["IsPlayerSpell"](k("392256"))then p=p+t*k("3")else p=p+t end end;if i["WR_GetUnitBuffTime"](o,"愈合",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,"回春术",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,"林地护理",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,"激变蜂群",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,"栽培",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,"春暖花开",f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,k("48438"),f)~=k("0")then p=p+t end;if i["WR_GetUnitBuffTime"](o,k("102352"),f)~=k("0")then p=p+t end;return p end;i["WR_DruidRestoration_LastSpellTime"]=function()if i["DruidRestorationLastSpellIsOpen"]==f then return end;local u=i["CreateFrame"]("Frame")u["RegisterEvent"](u,"COMBAT_LOG_EVENT_UNFILTERED")u["SetScript"](u,"OnEvent",function()if i["select"](k("4"),i["CombatLogGetCurrentEventInfo"]())==i["UnitGUID"]("player")then if i["select"](k("2"),i["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local v=i["select"](k("13"),i["CombatLogGetCurrentEventInfo"]())if v=="愈合"then i["CastTime_YH"]=i["GetTime"]()elseif v=="狂暴回复"then i["CastTime_KBHF"]=i["GetTime"]()elseif v=="夺魂咆哮"then i["CastTime_DHPX"]=i["GetTime"]()end end end end)i["DruidRestorationLastSpellIsOpen"]=f end;i["WR_DruidRestoration_SpecialCombat"]=function()i["SpecialCombat_HCS"]=e;i["SpecialCombat_CanHot"]=f;if i["WR_GetUnitBuffCount"]("boss1",k("389490"))>=k("20")then i["SpecialCombat_HCS"]=f end;for l=k("1"),k("40"),k("1")do local w={[k("1")]="不屈者卡金",[k("2")]="符文保护者",[k("3")]="绝顶焰翼鸦",[k("4")]="注能者萨莉亚",[k("5")]="大引导者莱瓦迪",[k("6")]="亵渎者德拉加尔",[k("7")]="暴风引导者",[k("8")]="虚缚抢劫者",[k("9")]=h,[k("10")]=h}local x={[k("1")]="守护者哨兵",[k("2")]=h,[k("3")]=h,[k("4")]=h,[k("5")]=h,[k("6")]=h,[k("7")]=h,[k("8")]=h,[k("9")]=h,[k("10")]=h}local y=k("1")while w[y]~=g do if i["UnitName"]("nameplate"..l)==w[y]then i["SpecialCombat_HCS"]=f;break end;y=y+k("1")end;local z=k("1")while x[z]~=g do if i["UnitName"]("nameplate"..l)==x[z]then i["SpecialCombat_CanHot"]=e;break end;z=z+k("1")end end end;i["WR_DruidRestoration_QXXT"]=function()if i["CatForm"]and i["UnitPower"]("player",k("3"))<k("35")then return f end;return e end;i["WR_DruidRestoration_GeLie"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and i["WR_GetUnitDebuffInfo"](o,"割裂",f)<=k("7.2")and i["WR_GetUnitDeathTime"](o)then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSJ","割裂"..o)then return f end end;if i["WR_FocusUnit"](o,"割裂")then return f end end;return e end;i["WR_DruidRestoration_Function_GeLie"]=function()if not i["WR_SpellUsable"]("割裂")then return e end;if not i["CatForm"]then return e end;if i["UnitPower"]("player",k("4"))<k("5")then return e end;if i["WR_DruidRestoration_GeLie"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_GeLie"](m)then return f end end;return e end;i["WR_DruidRestoration_XMSY"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and(i["WR_GetUnitDebuffInfo"](o,"割裂",f)>k("7.2")or i["WR_GetUnitDeathTime"](o)<k("6"))then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSU","凶猛"..o)then return f end end;if i["WR_FocusUnit"](o,"凶猛")then return f end end;return e end;i["WR_DruidRestoration_Function_XMSY"]=function()if not i["WR_SpellUsable"]("凶猛撕咬")then return e end;if not i["CatForm"]then return e end;if i["UnitPower"]("player",k("4"))<k("5")then return e end;if i["WR_DruidRestoration_XMSY"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_XMSY"](m)then return f end end;return e end;i["WR_DruidRestoration_TJ"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and i["WR_GetUnitDebuffInfo"](o,"痛击",f)<=k("4.5")then if i["WR_ColorFrame_Show"]("CSH","痛击")then return f end end;return e end;i["WR_DruidRestoration_Function_TJ"]=function()if not i["WR_SpellUsable"]("痛击")then return e end;if not i["CatForm"]then return e end;if not i["IsPlayerSpell"](k("106832"))then return e end;if i["WR_DruidRestoration_TJ"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_TJ"](m)then return f end end end;i["WR_DruidRestoration_XL"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and i["WR_GetUnitDebuffTime"](o,"斜掠",f)<=k("4.5")then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSM","斜掠"..o)then return f end end;if i["WR_FocusUnit"](o,"斜掠")then return f end end;return e end;i["WR_DruidRestoration_Function_XL"]=function()if not i["WR_SpellUsable"]("斜掠")then return e end;if not i["CatForm"]and not i["IsPlayerSpell"](k("449193"))then return e end;if i["UnitPower"]("player",k("4"))>=k("5")and i["CatForm"]then return e end;if i["WR_DruidRestoration_XL"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_XL"](m)then return f end end;return e end;i["WR_DruidRestoration_HS"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and i["HUCountRangeClose"]>=k("8")then if i["WR_ColorFrame_Show"]("CSB","横扫")then return f end end;return e end;i["WR_DruidRestoration_Function_HS"]=function()if not i["WR_SpellUsable"]("横扫")then return e end;if not i["CatForm"]then return e end;if i["WR_DruidRestoration_HS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_HS"](m)then return f end end;return e end;i["WR_DruidRestoration_SS"]=function(o)if i["C_Spell"]["IsSpellInRange"]("撕碎",o)and i["WR_TargetInCombat"](o)and i["HUCountRangeClose"]<k("8")then if i["UnitIsUnit"]("focus",o)then if i["WR_ColorFrame_Show"]("CSI","撕碎"..o)then return f end end;if i["WR_FocusUnit"](o,"撕碎")then return f end end;return e end;i["WR_DruidRestoration_Function_SS"]=function()if not i["WR_SpellUsable"]("撕碎")then return e end;if not i["CatForm"]and not i["IsPlayerSpell"](k("449193"))then return e end;if i["UnitPower"]("player",k("4"))>=k("5")and i["CatForm"]then return e end;if i["WR_DruidRestoration_SS"]("target")then return f end;for l=k("1"),k("4")do local m="party"..l.."target"if i["WR_DruidRestoration_SS"](m)then return f end end;return e end;i["WR_DruidRestoration_SP"]=function(q)if q=="保命"then if i["WRSet"]["HF_SP1"]>=k("3")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["WRSet"]["HF_SP2"]>=k("3")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end elseif q=="常驻"then if i["WRSet"]["HF_SP1"]==k("1")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["WRSet"]["HF_SP2"]==k("1")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end elseif q=="爆发"then if i["WRSet"]["HF_SP1"]==k("2")then if i["WR_ShiPin"](k("1"),i["WRSet"]["HF_SP1"])then return f end end;if i["WRSet"]["HF_SP2"]==k("2")then if i["WR_ShiPin"](k("2"),i["WRSet"]["HF_SP2"])then return f end end end;return e end end)()