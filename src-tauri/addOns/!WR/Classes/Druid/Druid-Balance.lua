local a=38;local b=19;local c=0==1;local d=not c;local e=nil;local f=""local g=_G;local h=_ENV;local i=g["tonumber"]return(function(...)g["WR_DruidBalance"]=function()if g["GetSpecialization"]()~=i("1")then return end;g["WR_DruidBalance_LastSpellTime"]()g["ShiFaSuDu"]=i("0.05")+g["WRSet"]["PH_SFSD"]*i("0.05")g["WR_GetLastSpellName"]()g["PlayerHP"]=g["UnitHealth"]("player")/g["UnitHealthMax"]("player")g["PlayerMove"]=g["WR_PlayerMove"]()g["GCD"]=g["WR_GetGCD"]("野性印记")g["MaxGCD"]=g["WR_GetMaxGCD"](i("1.5"))g["CD_HS"]=g["WR_GetGCD"]("超凡之盟")g["CD_ALEZN"]=g["WR_GetGCD"]("艾露恩之怒")g["PartyLostHP"]=g["WR_PartyLostHP"]("愈合")g["CastingName"],g["_"],g["_"],g["_"],g["CastingendTimeMS"],g["_"],g["_"],g["_"],g["_"]=g["UnitCastingInfo"]("player")g["CastingTime"]=i("0")if g["CastingendTimeMS"]~=e then g["CastingTime"]=g["CastingendTimeMS"]/i("1000")-g["GetTime"]()end;g["YueHuoShuDebuffTime"]=g["WR_GetUnitDebuffInfo"]("target","月火术",d)g["YangYanShuDebuffTime"]=g["WR_GetUnitDebuffInfo"]("target","阳炎术",d)g["ResistOutburstTime"]=g["WR_ResistOutburstTime"]()g["MustDefenseTime_Bear"]=g["ResistOutburstTime"]<=g["GCD"]+g["MaxGCD"]g["HUCountRange45"]=g["WR_GetRangeHarmUnitCount"](i("45"),not g["WR_InTraining"]())g["TargetInRange45"]=g["IsSpellInRange"]("愤怒","target")g["TargetInCombat"]=g["WR_TargetInCombat"]("target")g["TargetDeathTime"]=g["WR_GetUnitDeathTime"]("target")g["SingleUnit"]=g["WR_SingleUnit"]()g["Party1TargetDeathTime"]=g["WR_GetUnitDeathTime"]("party1target")g["Party2TargetDeathTime"]=g["WR_GetUnitDeathTime"]("party2target")g["Party3TargetDeathTime"]=g["WR_GetUnitDeathTime"]("party3target")g["Party4TargetDeathTime"]=g["WR_GetUnitDeathTime"]("party4target")g["AvgDeathTime"]=g["WR_GetRangeAvgDeathTime"](i("45"))g["InBossCombat"]=g["WR_InBossCombat"]()g["TargetIsBoss"]=g["WR_TargetIsBoss"]()g["TargetInvincible"]=g["WR_Invincible"]("target")g["XingJiePower"]=g["UnitPower"]("player",i("8"))g["HongMingXingChenBuffTime"],g["HongMingXingChenBuffCount"]=g["WR_GetUnitBuffInfo"]("player","轰鸣星辰")g["_"],g["ALEDZS_BuffCount"],g["_"]=g["WR_GetUnitBuffInfo"]("player","艾露恩的战士")g["_"],g["MM_BuffCount"],g["_"]=g["WR_GetUnitBuffInfo"]("player","迷梦")g["XCLZ_BuffTime"],g["XCLZ_BuffCount"],g["_"]=g["WR_GetUnitBuffInfo"]("player","星辰领主")g["_"],g["XCZL_BuffCount"],g["_"]=g["WR_GetUnitBuffInfo"]("player","星辰坠落")g["_"],g["XSXT_BuffCount"],g["_"]=g["WR_GetUnitBuffInfo"]("player","枭兽形态")g["XSKN_BuffTime"]=g["WR_GetUnitBuffInfo"]("player","枭兽狂怒")g["YueShiBuffTime"]=g["WR_GetUnitBuffInfo"]("player","月蚀")g["RiShiBuffTime"]=g["WR_GetUnitBuffInfo"]("player","日蚀")g["HuaShenBuffTime"]=i("0")local j=g["WR_GetUnitBuffInfo"]("player","化身：艾露恩之眷")local k=g["WR_GetUnitBuffInfo"]("player","超凡之盟")if j>i("0")then g["HuaShenBuffTime"]=j elseif k>i("0")then g["HuaShenBuffTime"]=k end;g["FenNuCount"]=g["C_Spell"]["GetSpellCastCount"]("愤怒")g["XingHuoShuCount"]=g["C_Spell"]["GetSpellCastCount"]("星火术")g["_"],g["_"],g["_"],g["FenNuCastTime"]=g["GetSpellInfo"]("愤怒")if g["FenNuCastTime"]~=e then g["FenNuCastTime"]=g["FenNuCastTime"]/i("1000")else g["FenNuCastTime"]=i("0")end;g["_"],g["_"],g["_"],g["XingHuoShuCastTime"]=g["GetSpellInfo"]("星火术")if g["XingHuoShuCastTime"]~=e then g["XingHuoShuCastTime"]=g["XingHuoShuCastTime"]/i("1000")else g["XingHuoShuCastTime"]=i("0")end;g["_"],g["_"],g["_"],g["XingChenYaoBanCastTime"]=g["GetSpellInfo"]("星辰耀斑")if g["XingChenYaoBanCastTime"]~=e then g["XingChenYaoBanCastTime"]=g["XingChenYaoBanCastTime"]/i("1000")else g["XingChenYaoBanCastTime"]=i("0")end;if g["CastingName"]=="愤怒"then g["FenNuCasting"]=d else g["FenNuCasting"]=c end;if g["CastingName"]=="星火术"then g["XingHuoShuCasting"]=d else g["XingHuoShuCasting"]=c end;g["_"],g["_"],g["_"],g["MoonCastTime"]=g["GetSpellInfo"]("新月")local l=i("0")g["NextMoonCastTime"]=i("0")if g["MoonCastTime"]~=e and(g["WR_GetSpellCharges"]("新月")>=i("2")or g["WR_GetSpellCharges"]("新月")==i("1")and g["CastingName"]~="满月"and g["CastingName"]~="半月"and g["CastingName"]~="新月")then g["MoonCastTime"]=g["MoonCastTime"]/i("1000")if g["CastingName"]=="新月"then l=i("12")end;if g["CastingName"]=="半月"then l=i("24")end;if g["CastingName"]=="满月"then l=i("50")end;g["ManYue"]=g["WR_GetSpellCharges"]("满月")or i("0")g["BanYue"]=g["WR_GetSpellCharges"]("半月")or i("0")g["XinYue"]=g["ManYue"]==i("0")and g["BanYue"]==i("0")and g["WR_GetSpellCharges"]("新月")or i("0")if g["ManYue"]>i("0")and g["CastingName"]~="满月"then l=l+i("50")g["NextMoonCastTime"]=g["MoonCastTime"]end;if g["BanYue"]>i("0")and g["CastingName"]=="半月"then l=l+i("50")g["NextMoonCastTime"]=g["MoonCastTime"]/i("2")*i("3")end;if g["BanYue"]>i("0")and g["CastingName"]~="半月"then l=l+i("24")g["NextMoonCastTime"]=g["MoonCastTime"]end;if g["XinYue"]>i("0")and g["CastingName"]=="新月"then l=l+i("24")g["NextMoonCastTime"]=g["MoonCastTime"]*i("2")end;if g["XinYue"]>i("0")and g["CastingName"]~="新月"then l=l+i("12")g["NextMoonCastTime"]=g["MoonCastTime"]end;if g["ManYue"]>i("0")and g["CastingName"]=="满月"then l=l+i("12")g["NextMoonCastTime"]=g["MoonCastTime"]/i("3")end end;if l~=i("0")and g["XingJiePower"]+l<=i("90")then g["NewMoon"]=d else g["NewMoon"]=c end;g["NextPower"]=g["XingJiePower"]if g["CastingName"]=="愤怒"then if g["CastingTime"]<g["RiShiBuffTime"]then g["NextPower"]=g["XingJiePower"]+i("12")else g["NextPower"]=g["XingJiePower"]+i("8")end end;if g["CastingName"]=="星火术"then if g["CastingTime"]<g["YueShiBuffTime"]then g["NextPower"]=g["XingJiePower"]+i("16")else g["NextPower"]=g["XingJiePower"]+i("12")end end;if g["CastingName"]=="星辰耀斑"then g["NextPower"]=g["XingJiePower"]+i("12")end;if g["CastingName"]=="新月"then g["NextPower"]=g["XingJiePower"]+i("12")end;if g["CastingName"]=="半月"then g["NextPower"]=g["XingJiePower"]+i("24")end;if g["CastingName"]=="满月"then g["NextPower"]=g["XingJiePower"]+i("50")end;if g["MSG"]==i("1")then g["print"]("GCD:"..g["GCD"])g["print"]("下一个GCD星界能量：",g["NextPower"])g["print"]("----------")end;local m=g["C_UnitAuras"]["GetPlayerAuraBySpellID"](i("393961"))if m==e then g["AoNengCount"]=i("0")else g["AoNengCount"]=m["points"][i("1")]end;if g["MSG"]==i("1")then g["print"]("----------")end;if g["WR_PriorityCheck"]()then return end;if g["WR_Druid_SPS"]()then return end;if g["WR_Druid_GL"]()then return end;if g["WRSet"]["PH_SP1"]>=i("3")then if g["WR_ShiPin"](i("1"),g["WRSet"]["PH_SP1"])then return d end end;if g["WRSet"]["PH_SP2"]>=i("3")then if g["WR_ShiPin"](i("2"),g["WRSet"]["PH_SP2"])then return d end end;if g["WR_ZLS"](g["WRSet"]["PH_ZLS"])then return d end;if g["WR_ZLYS"](g["WRSet"]["PH_ZLYS"])then return d end;if g["WR_ZLYS2"](g["WRSet"]["PH_ZLYS"])then return d end;if g["WR_DruidBalance_ZRDSH"]()then return end;if g["WR_DruidBalance_YH"]()then return end;if g["WR_DruidBalance_JCDS"]()then return end;if g["WR_DruidBalance_RGS"]()then return end;if g["WR_Druid_Function_FS"]()then return end;if g["WR_DruidBalance_KBHF"]()then return end;if g["WR_DruidBalance_BXFY"]()then return end;if g["WR_Druid_Function_DHPX"]()then return end;if g["WR_Druid_Function_AF"]()then return end;if g["WR_Druid_Function_YXYJ"]()then return end;if g["WR_Druid_Function_QCFS"]()then return end;if g["WR_Druid_SSXT"]()then return end;if g["TargetInRange45"]and g["TargetInCombat"]then if g["WRSet"]["PH_SP1"]==i("1")then if g["WR_ShiPin"](i("1"),g["WRSet"]["PH_SP1"])then return d end end;if g["WRSet"]["PH_SP2"]==i("1")then if g["WR_ShiPin"](i("2"),g["WRSet"]["PH_SP2"])then return d end end;if g["WR_WuQi"](i("45"),g["WRSet"]["PH_WuQi"])then return d end end;if g["WR_DruidBalance_ALEDZS"]("皎月呼唤")then return d end;if g["WR_DruidBalance_function_YHS"]("DOT")then return d end;if g["WR_DruidBalance_function_YYS"]("DOT")then return d end;if g["WRSet"]["PH_XHLX"]==i("3")or g["WRSet"]["PH_XHLX"]==i("1")and not g["SingleUnit"]and g["HUCountRange45"]>i("1")then if g["WR_DruidBalance_XCYB"]()then return d end;if g["WR_DruidBalance_ZRZL"]()then return d end;if g["WR_DruidBalance_ALEZN"]()then return d end;if g["WR_DruidBalance_CFHS"]()then return d end;if g["WR_DruidBalance_FenNu"]("月蚀")then return d end;if g["WR_DruidBalance_XCYL"]()then return d end;if g["WR_DruidBalance_WLZZ"]()then return d end;if g["WR_DruidBalance_function_YYS"]("刷新")then return d end;if g["WR_DruidBalance_function_YHS"]("刷新")then return d end;if g["YueShiBuffTime"]>g["GCD"]+g["XingHuoShuCastTime"]or g["FenNuCount"]==i("1")and g["FenNuCasting"]then if g["WR_DruidBalance_XHS"]()then return d end else if g["WR_DruidBalance_FenNu"]()then return d end end end;if g["WRSet"]["PH_XHLX"]==i("2")or g["WRSet"]["PH_XHLX"]==i("1")and(g["SingleUnit"]or g["HUCountRange45"]<=i("1"))then if g["WR_DruidBalance_ZRZL"]()then return d end;if g["WR_DruidBalance_ALEZN"]()then return d end;if g["WR_DruidBalance_CFHS"]()then return d end;if g["IsPlayerSpell"](i("429523"))then if g["WR_DruidBalance_FenNu"]("月蚀")then return d end else if g["WR_DruidBalance_XHS"]("日蚀")then return d end end;if g["WR_DruidBalance_XYS"]("领主")then return d end;if g["WR_DruidBalance_function_YYS"]("刷新")then return d end;if g["WR_DruidBalance_function_YHS"]("刷新")then return d end;if g["WR_DruidBalance_XCYB"]()then return d end;if g["WR_DruidBalance_XYS"]("万灵")then return d end;if g["WR_DruidBalance_WLZZ"]()then return d end;if g["WR_DruidBalance_XYS"]()then return d end;if g["IsPlayerSpell"](i("429523"))then if g["WR_DruidBalance_XHS"]()then return d end else if g["WR_DruidBalance_FenNu"]()then return d end end end;if g["WRSet"]["PH_XHLX"]==i("4")then if g["WR_DruidBalance_XCYB"]()then return d end;if g["WR_DruidBalance_ZRZL"]()then return d end;if g["WR_DruidBalance_ALEZN"]()then return d end;if g["WR_DruidBalance_CFHS"]()then return d end;if g["IsPlayerSpell"](i("429523"))then if g["WR_DruidBalance_FenNu"]("月蚀")then return d end else if g["WR_DruidBalance_XHS"]("日蚀")then return d end end;if g["SingleUnit"]or g["HUCountRange45"]<=i("1")then if g["WR_DruidBalance_XYS"]()then return d end else if g["WR_DruidBalance_XCYL"]()then return d end end;if g["WR_DruidBalance_WLZZ"]()then return d end;if g["YueShiBuffTime"]>g["GCD"]+g["XingHuoShuCastTime"]or g["FenNuCount"]==i("1")and g["FenNuCasting"]then if g["WR_DruidBalance_XHS"]()then return d end else if g["WR_DruidBalance_FenNu"]()then return d end end end;if g["WR_DruidBalance_function_YYS"]("移动")then return d end;if g["WR_DruidBalance_function_YHS"]("移动")then return d end;if g["WR_DruidBalance_function_YHS"]("无脑")then return d end;if g["WR_Function_ZNMB"](i("45"),g["WRSet"]["PH_ZNMB"])then return d end;g["WR_HideColorFrame"](g["zhandoumoshi"])if g["MSG"]==i("1")then end end;g["WR_DruidBalance_ZRDSH"]=function()if g["WRSet"]["PH_ZRDSH"]and g["UnitAffectingCombat"]("player")and g["WR_SpellUsable"]("自然的守护")and g["WR_PartyLostHP"]("愈合")>i("0.40")then if g["WR_ColorFrame_Show"]("ASF6","自然守护")then return d end end;return c end;g["WR_DruidBalance_JCDS"]=function()if g["WRSet"]["PH_JCDS"]and g["XSXT_BuffCount"]and g["WR_Unbind"]("player")then if g["WR_ColorFrame_Show"]("CF10","解除变形")then return d end end;return c end;g["WR_DruidBalance_YH"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["PlayerHP"]<i("0.5")and g["WR_SpellUsable"]("愈合")and g["WR_GetUnitBuffTime"]("player",i("429438"))>i("0")then if g["WR_ColorFrame_Show"]("SF6","愈合")then return d end end;return c end;g["WR_DruidBalance_BXFY"]=function()if g["WRSet"]["PH_BXFY"]and g["WR_SpellUsable"]("熊形态")and g["MustDefenseTime_Bear"]and g["WR_GetUnitBuffTime"]("player","熊形态")==i("0")then if g["HuaShenBuffTime"]>g["GCD"]then if g["WRSet"]["PH_SPS"]~=i("10")then if g["WR_ColorFrame_Show"]("CF3","树皮术")then return d end end else if g["WR_ColorFrame_Show"]("CF7","变熊防御")then return d end end end;return c end;g["WR_DruidBalance_RGS"]=function()if g["WRSet"]["PH_RGS"]and g["IsPlayerSpell"](i("78675"))and g["IsSpellInRange"]("日光术","target")and g["WR_GetGCD"]("日光术")<=g["GCD"]and g["WR_GetCastInterruptible"]("target",i("0.3"),d)then if g["WR_ColorFrame_Show"]("CSF5","日光术T")then return d end end;return c end;g["WR_DruidBalance_KBHF"]=function()if g["WR_GetUnitBuffTime"]("player","熊形态")~=i("0")and g["PlayerHP"]<=i("0.8")and g["IsPlayerSpell"](i("22842"))and g["WR_GetGCD"]("狂暴回复")<=g["GCD"]and(g["CastTime_KBHF"]==e or g["GetTime"]()-g["CastTime_KBHF"]>i("3"))and(g["CastTime_DHPX"]==e or g["GetTime"]()-g["CastTime_DHPX"]>i("3"))then if g["WR_ColorFrame_Show"]("CF5","狂暴回复")then return d end end;return c end;g["WR_Druid_SSXT"]=function()if g["IsPlayerSpell"](i("24858"))and g["XSXT_BuffCount"]==i("0")then if g["WR_ColorFrame_Show"]("CF4","枭兽形态")then return d end end;return c end;g["WR_DruidBalance_YHS"]=function(n,o)if not g["WR_CanDot"](n)then return c end;if not g["IsSpellInRange"]("月火术",n)then return c end;if not g["WR_TargetInCombat"](n)then return c end;local p=g["WR_GetUnitDebuffTime"](n,"月火术",d)if g["WR_GetUnitDeathTime"](n)-p>i("6")and(o=="DOT"and p<=g["GCD"]and g["HuaShenBuffTime"]<=g["GCD"]or o=="刷新"and p<=i("6.6")or o=="移动"and g["WRSet"]["PH_YDYH"]and p<=i("6.6")or o=="无脑"and g["WRSet"]["PH_YDYH"])then if n=="target"then if g["WR_ColorFrame_Show"]("SF3",(o or f).."月火T")then return d end elseif n=="mouseover"then if g["WR_ColorFrame_Show"]("CSF6",(o or f).."月火M")then return d end elseif n=="focus"then if g["WR_ColorFrame_Show"]("CSF7",(o or f).."月火F")then return d end elseif n=="party1target"then if g["WR_ColorFrame_Show"]("CSF1",(o or f).."月火P1T")then return d end elseif n=="party2target"then if g["WR_ColorFrame_Show"]("CSF2",(o or f).."月火P2T")then return d end elseif n=="party3target"then if g["WR_ColorFrame_Show"]("CSF3",(o or f).."月火P3T")then return d end elseif n=="party4target"then if g["WR_ColorFrame_Show"]("CSF4",(o or f).."月火P4T")then return d end end end;return c end;g["WR_DruidBalance_function_YHS"]=function(o)if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["IsPlayerSpell"](i("8921"))then return c end;if g["WR_GetUnitBuffTime"]("player","林中和谐")>g["GCD"]then return c end;if g["WRSet"]["PH_XJFS"]and(o~="移动"and o~="无脑")and g["NextPower"]+i("8")>i("90")then return c end;if g["WR_GetUnitBuffTime"]("player","林中和谐")<=g["GCD"]and(g["zhandoumoshi"]~=i("1")or g["WR_GetGCD"]("自然之力")>i("3")or not g["IsPlayerSpell"](i("428544")))then if g["WRSet"]["PH_SHMB"]==i("1")then if g["WR_DruidBalance_YHS"]("target",o)then return d end elseif g["WRSet"]["PH_SHMB"]==i("2")then if g["WR_DruidBalance_YHS"]("target",o)then return d end;if g["WR_DruidBalance_YHS"]("mouseover",o)then return d end elseif g["WRSet"]["PH_SHMB"]==i("3")then if g["WR_DruidBalance_YHS"]("target",o)then return d end;if g["WR_DruidBalance_YHS"]("mouseover",o)then return d end;if g["WR_DruidBalance_YHS"]("focus",o)then return d end;for q=i("1"),i("4")do if g["WR_DruidBalance_YHS"]("party"..q.."target",o)then return d end end end end;return c end;g["WR_DruidBalance_YYS"]=function(n,o)if not g["WR_CanDot"](n)then return c end;if not g["IsSpellInRange"]("阳炎术",n)then return c end;if not g["WR_TargetInCombat"](n)then return c end;local r=g["WR_GetUnitDebuffTime"](n,"阳炎术",d)if g["WR_GetUnitDeathTime"](n)-r>i("6")and(o=="DOT"and r<=g["GCD"]and g["HuaShenBuffTime"]<=g["GCD"]or o=="刷新"and r<=i("5.4")or o=="移动"and g["WRSet"]["PH_YDYH"]and r<=i("5.4"))then if n=="target"then if g["WR_ColorFrame_Show"]("CSP",(o or f).."阳炎T")then return d end elseif n=="mouseover"then if g["WR_ColorFrame_Show"]("CSF8",(o or f).."阳炎M")then return d end elseif n=="focus"then if g["WR_ColorFrame_Show"]("CSF9",(o or f).."阳炎F")then return d end elseif n=="party1target"then if g["WR_ColorFrame_Show"]("CN7",(o or f).."阳炎P1T")then return d end elseif n=="party2target"then if g["WR_ColorFrame_Show"]("CN8",(o or f).."阳炎P2T")then return d end elseif n=="party3target"then if g["WR_ColorFrame_Show"]("CN9",(o or f).."阳炎P3T")then return d end elseif n=="party4target"then if g["WR_ColorFrame_Show"]("CN0",(o or f).."阳炎P4T")then return d end end end;return c end;g["WR_DruidBalance_function_YYS"]=function(o)if g["GCD"]>g["ShiFaSuDu"]then return c end;if not g["IsPlayerSpell"](i("93402"))then return c end;if g["WRSet"]["PH_XJFS"]and o~="移动"and g["NextPower"]+i("6")>i("90")then return c end;if g["WRSet"]["PH_SHMB"]==i("1")then if g["WR_DruidBalance_YYS"]("target",o)then return d end elseif g["WRSet"]["PH_SHMB"]==i("2")then if g["WR_DruidBalance_YYS"]("target",o)then return d end;if g["WR_DruidBalance_YYS"]("mouseover",o)then return d end elseif g["WRSet"]["PH_SHMB"]==i("3")then if g["WR_DruidBalance_YYS"]("target",o)then return d end;if g["WR_DruidBalance_YYS"]("mouseover",o)then return d end;if g["WR_DruidBalance_YYS"]("focus",o)then return d end;for q=i("1"),i("4")do if g["WR_DruidBalance_YYS"]("party"..q.."target",o)then return d end end end;return c end;g["WR_DruidBalance_ALEZN"]=function()if g["IsPlayerSpell"](i("202770"))and g["WR_GetGCD"]("艾露恩之怒")<=g["GCD"]and g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["TargetInCombat"]and g["TargetInRange45"]and g["NextPower"]<i("90")then if g["WR_ColorFrame_Show"]("CF12","艾怒")then return d end end;return c end;g["WR_DruidBalance_CFHS"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["TargetInCombat"]and g["TargetInRange45"]and g["WRSet"]["PH_HS"]and g["HuaShenBuffTime"]<=g["GCD"]and g["IsPlayerSpell"](i("194223"))and g["WR_GetGCD"]("超凡之盟")<=g["GCD"]and(g["WR_GetUnitBuffTime"]("player","林中和谐")>g["GCD"]or not g["IsPlayerSpell"](i("428731"))or g["WR_GetGCD"]("自然之力")>i("25")or not g["IsPlayerSpell"](i("205636")))then if g["WRSet"]["PH_SP1"]==i("2")then if g["WR_ShiPin"](i("1"),g["WRSet"]["PH_SP1"])then return d end end;if g["WRSet"]["PH_SP2"]==i("2")then if g["WR_ShiPin"](i("2"),g["WRSet"]["PH_SP2"])then return d end end;if g["WR_ColorFrame_Show"]("ASF8","超凡化身")then return d end end;return c end;g["WR_DruidBalance_ALEDZS"]=function(o)if g["IsPlayerSpell"](i("202425"))and g["WR_GetGCD"]("艾露恩的战士")<=g["GCD"]and g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["TargetInCombat"]and g["TargetInRange45"]and g["UnitAffectingCombat"]("player")and g["WR_GetUnitBuffTime"]("player","迷梦")<=g["GCD"]then if o=="皎月呼唤"and g["IsPlayerSpell"](i("429523"))then if g["WR_ColorFrame_Show"]("SF4","皎月艾战")then return d end end end;return c end;g["WR_DruidBalance_FenNu"]=function(o)if g["IsPlayerSpell"](i("190984"))and g["GCD"]<=g["ShiFaSuDu"]and not g["PlayerMove"]and g["TargetInCombat"]and g["TargetInRange45"]and not g["WR_StopCast"](g["FenNuCastTime"])then if o=="月蚀"and(g["YueShiBuffTime"]>g["GCD"]and g["YueShiBuffTime"]<g["GCD"]+g["FenNuCastTime"]or g["YueShiBuffTime"]<=g["GCD"]and g["RiShiBuffTime"]<=g["GCD"])and(g["FenNuCount"]==i("0")or g["FenNuCount"]==i("2")or g["FenNuCount"]==i("1")and not g["FenNuCasting"])then if g["WR_ColorFrame_Show"]("CSO","愤怒月蚀")then return d end end;if o==e then if g["WR_ColorFrame_Show"]("CSO","愤怒")then return d end end end;return c end;g["WR_DruidBalance_XCYL"]=function()if g["WRSet"]["PH_XJFS"]and g["IsPlayerSpell"](i("191034"))and g["GCD"]<=g["ShiFaSuDu"]and g["TargetInCombat"]and g["TargetInRange45"]and(g["NextPower"]>=i("45")or g["HuaShenBuffTime"]>g["GCD"]and g["IsPlayerSpell"](i("393991"))and g["NextPower"]>=i("33"))then if g["WR_ColorFrame_Show"]("SF5","星辰坠落")then return d end end;return c end;g["WR_DruidBalance_XYS"]=function(o)if g["WRSet"]["PH_XJFS"]and g["IsPlayerSpell"](i("78674"))and g["GCD"]<=g["ShiFaSuDu"]and g["TargetInCombat"]and g["TargetInRange45"]and(g["NextPower"]>=i("36")or g["HuaShenBuffTime"]>g["GCD"]and g["IsPlayerSpell"](i("393991"))and g["NextPower"]>=i("26"))then if o=="双目标"and g["HUCountRange45"]==i("2")then if g["WR_ColorFrame_Show"]("ACSF8","星涌双目标")then return d end end;if o=="领主"and g["XCLZ_BuffCount"]<i("3")then if g["WR_ColorFrame_Show"]("ACSF8","星涌领主")then return d end end;if o=="万灵"and g["zhandoumoshi"]==i("1")and g["IsPlayerSpell"](i("391528"))and g["WR_GetGCD"]("万灵之召")<=g["GCD"]+g["MaxGCD"]*i("2")then if g["WR_ColorFrame_Show"]("ACSF8","星涌万灵")then return d end end;if o==e and(g["NextPower"]>=i("60")or g["WR_GetUnitBuffCount"]("player","394049")+g["WR_GetUnitBuffCount"]("player","394050")>=i("3")or g["WR_InBossCombat"]()and g["WR_GetRangeAvgDeathTime"](i("45"))<i("5"))then if g["WR_ColorFrame_Show"]("ACSF8","星涌S4")then return d end end end;return c end;g["WR_DruidBalance_XHS"]=function(o)if g["IsPlayerSpell"](i("194153"))and g["GCD"]<=g["ShiFaSuDu"]and g["TargetInCombat"]and g["TargetInRange45"]and(not g["PlayerMove"]and not g["WR_StopCast"](g["XingHuoShuCastTime"])or g["ALEDZS_BuffCount"]>=i("1")or g["XSKN_BuffTime"]>i("0"))then if o==e then if g["WR_ColorFrame_Show"]("CSK","星火术")then return d end end;if o=="日蚀"and(g["RiShiBuffTime"]>g["GCD"]and g["RiShiBuffTime"]<g["GCD"]+g["XingHuoShuCastTime"]or g["RiShiBuffTime"]<=g["GCD"]and g["YueShiBuffTime"]<=g["GCD"])and(g["XingHuoShuCount"]==i("0")or g["XingHuoShuCount"]==i("2")or g["XingHuoShuCount"]==i("1")and not g["XingHuoShuCasting"])then if g["WR_ColorFrame_Show"]("CSK","星火日蚀")then return d end end end;return c end;g["WR_DruidBalance_WLZZ"]=function()if g["GCD"]<=g["ShiFaSuDu"]and g["WRSet"]["PH_WLZZ"]and g["zhandoumoshi"]==i("1")and g["TargetInCombat"]and g["TargetInRange45"]and g["IsPlayerSpell"](i("391528"))and g["WR_GetGCD"]("万灵之召")<=g["GCD"]and g["WR_GetUnitBuffTime"]("player","迷梦")<=g["GCD"]and g["WR_GetUnitBuffTime"]("player","星影之拥")<=g["GCD"]and g["HUCountRange45"]<i("7")and not g["WR_StopCast"](i("3")+i("0.2"))and(g["HuaShenBuffTime"]>g["GCD"]or g["WR_GetGCD"]("超凡之盟")>i("40"))and(g["WR_GetUnitBuffTime"]("player","林中和谐")>g["GCD"]or g["WR_GetGCD"]("自然之力")>i("15"))then if g["WR_ColorFrame_Show"]("CF6","万灵之召")then return d end end;return c end;g["WR_DruidBalance_XCYB"]=function()if g["IsPlayerSpell"](i("202347"))and g["GCD"]<=g["ShiFaSuDu"]and g["TargetInCombat"]and g["TargetInRange45"]and not g["PlayerMove"]and g["UnitCastingInfo"]("player")~="星辰耀斑"and not g["WR_StopCast"](g["XingChenYaoBanCastTime"])and g["WR_GetUnitDebuffInfo"]("target","星辰耀斑",d)<=i("7.2")+g["XingChenYaoBanCastTime"]and g["TargetDeathTime"]-g["WR_GetUnitDebuffInfo"]("target","星辰耀斑",d)>i("8")then if g["WR_ColorFrame_Show"]("CSJ","星辰耀斑")then return d end end;return c end;g["WR_DruidBalance_ZRZL"]=function()if g["IsPlayerSpell"](i("205636"))and g["WR_GetGCD"]("自然之力")<=g["GCD"]and g["GCD"]<=g["ShiFaSuDu"]and g["zhandoumoshi"]==i("1")and g["TargetInCombat"]and g["TargetInRange45"]then if g["WR_ColorFrame_Show"]("SF7","自然之力")then return d end end;return c end;g["WR_DruidBalance_LastSpellTime"]=function()if g["DruidBalanceLastSpellIsOpen"]==d then return end;local s=g["CreateFrame"]("Frame")s["RegisterEvent"](s,"COMBAT_LOG_EVENT_UNFILTERED")s["SetScript"](s,"OnEvent",function()if g["select"](i("4"),g["CombatLogGetCurrentEventInfo"]())==g["UnitGUID"]("player")then if g["select"](i("2"),g["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local t=g["select"](i("13"),g["CombatLogGetCurrentEventInfo"]())if t=="狂暴回复"then g["CastTime_KBHF"]=g["GetTime"]()elseif t=="夺魂咆哮"then g["CastTime_DHPX"]=g["GetTime"]()end end end end)g["DruidBalanceLastSpellIsOpen"]=d end end)()