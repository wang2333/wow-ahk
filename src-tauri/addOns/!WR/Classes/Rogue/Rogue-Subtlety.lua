local a=33;local b=42;local c=28;local d=78;local e=42;local f=0==1;local g=not f;local h=nil;local i=""local j=_G;local k=_ENV;local l=j["tonumber"]return(function(...)j["WR_RogueSubtlety"]=function()if j["GetSpecialization"]()~=l("3")then return end;j["ShiFaSuDu"]=l("0.05")+j["WRSet"]["MR_SFSD"]*l("0.05")j["GCD"]=j["WR_GetGCD"]("偷袭")+j["math"]["min"](j["WR_GetMaxLatency"](),l("0.1"))j["BuffTime_QX"],j["BuffCount_QX"],j["BuffSum_QX"]=j["WR_GetUnitBuffInfo"]("player","潜行")j["BuffTime_XS"],j["BuffCount_XS"],j["BuffSum_XS"]=j["WR_GetUnitBuffInfo"]("player","消失")j["BuffTime_AYZW"],j["BuffCount_AYZW"],j["BuffSum_AYZW"]=j["WR_GetUnitBuffInfo"]("player","暗影之舞")j["BuffTime_GZ"],j["BuffCount_GZ"],j["BuffSum_GZ"]=j["WR_GetUnitBuffInfo"]("player","诡诈")j["BuffTime_QG"],j["BuffCount_QG"],j["BuffSum_QG"]=j["WR_GetUnitBuffInfo"]("player","切割")j["BuffTime_YG"],j["BuffCount_YG"],j["BuffSum_YG"]=j["WR_GetUnitBuffInfo"]("player","佯攻")j["BuffTime_SXYG"],j["BuffCount_SXYG"],j["BuffSum_SXYG"]=j["WR_GetUnitBuffInfo"]("player","速效药膏")j["BuffTime_ZSYG"],j["BuffCount_ZSYG"],j["BuffSum_ZSYG"]=j["WR_GetUnitBuffInfo"]("player","致伤药膏")j["BuffTime_YM"],j["BuffCount_YM"],j["BuffSum_YM"]=j["WR_GetUnitBuffInfo"]("player","预谋")j["BuffTime_ZJJ_GL"],j["BuffCount_ZJJ_GL"],j["BuffSum_ZJJ_GL"]=j["WR_GetUnitBuffInfo"]("player","终结技：割裂")j["BuffTime_DHZW"],j["BuffCount_DHZW"],j["BuffSum_DHZW"]=j["WR_GetUnitBuffInfo"]("player","断魂之舞")j["BuffTime_SWFJ"],j["BuffCount_SWFJ"],j["BuffSum_SWFJ"]=j["WR_GetUnitBuffInfo"]("player","死亡符记")j["BuffTime_KRBC"],j["BuffCount_KRBC"],j["BuffSum_KRBC"]=j["WR_GetUnitBuffInfo"]("player","狂热鞭笞")j["BuffTime_AYZR"],j["BuffCount_AYZR"],j["BuffSum_AYZR"]=j["WR_GetUnitBuffInfo"]("player","暗影之刃")j["BuffTime_XJXF"],j["BuffCount_XJXF"],j["BuffSum_XJXF"]=j["WR_GetUnitBuffInfo"]("player","袖剑旋风")j["BuffTime_JHC"],j["BuffCount_JHC"],j["BuffSum_JHC"]=j["WR_GetUnitBuffTime"]("player","菊花茶")j["BuffTime_WXZX"],j["BuffCount_WXZX"],j["BuffSum_WXZX"]=j["WR_GetUnitBuffTime"]("player","无瑕之形")j["BuffTime_FHYJ"],j["BuffCount_FHYJ"],j["BuffSum_FHYJ"]=j["WR_GetUnitBuffTime"]("player","腐化印记")j["DebuffTime_GL"],j["DebuffCount_GL"],j["DebuffSum_GL"]=j["WR_GetUnitDebuffInfo"]("target","割裂",g)j["DebuffTime_JH"],j["DebuffCount_JH"],j["DebuffSum_JH"]=j["WR_GetUnitDebuffInfo"]("target","惊慌",g)j["Energy"]=j["UnitPower"]("player",l("3"))j["ComboPoints"]=j["UnitPower"]("player",l("4"))j["PlayerHP"]=j["UnitHealth"]("player")/j["UnitHealthMax"]("player")j["PlayerMove"]=j["WR_PlayerMove"]()j["PlayerCombat"]=j["UnitAffectingCombat"]("player")j["Training"]=j["WR_InTraining"]()j["TargetRange"]=j["WR_GetUnitRange"]("target")j["TargetInCombat"]=j["WR_TargetInCombat"]("target")j["HUCountRange10"]=j["WR_GetRangeHarmUnitCount"](l("10"))j["SingleUnit"]=j["WR_SingleUnit"]()if j["SingleUnit"]then j["HUCountRange10"]=l("1")end;j["HUCountRange30"]=j["WR_GetRangeHarmUnitCount"](l("30"),not j["Training"])j["StealthEruption"]=f;if j["BuffTime_QX"]>j["GCD"]or j["BuffTime_XS"]>j["GCD"]or j["BuffTime_AYZW"]>j["GCD"]or j["BuffTime_GZ"]>j["GCD"]then j["StealthEruption"]=g end;if j["WR_PriorityCheck"]()then return end;if j["WR_ZNJD"](j["WRSet"]["MR_ZNJD"])then return end;if j["WR_Function_ZNMB"](l("3"),j["WRSet"]["MR_ZNMB"])then return g end;if j["WR_RogueSubtlety_ShiPin"]("保命")then return end;if j["WR_RogueSubtlety_XHZP"]()then return end;if j["WR_ZLS"](j["WRSet"]["MR_ZLS"])then return g end;if j["WR_ZLYS"](j["WRSet"]["MR_ZLYS"])then return g end;if j["WR_ZLYS2"](j["WRSet"]["MR_ZLYS"])then return g end;if j["WR_RogueSubtlety_YG"]()then return end;if j["WR_Rogue_JiaoTi_Function"]()then return end;if j["WR_Rogue_ShenJi_Function"]()then return end;if j["WR_RogueSubtlety_QX"]()then return end;if j["WR_RogueSubtlety_DuYao"]()then return end;if j["WR_RogueSubtlety_JHJQ"]()then return end;if j["WR_RogueSubtlety_ShiPin"]("常驻")then return end;if j["WR_WuQi"](l("3"),j["WRSet"]["MR_WuQi"])then return g end;if j["WR_RogueSubtlety_DuRen"]()then return end;if j["WR_RogueSubtlety_LX"]()then return end;if j["WR_RogueSubtlety_AYZR"]()then return end;if j["WR_RogueSubtlety_KRBC"]()then return end;if j["WR_RogueSubtlety_YWSF"]()then return end;if j["WR_RogueSubtlety_XS"]()then return end;if j["WR_RogueSubtlety_YFS"]()then return end;if j["WR_RogueSubtlety_GL"]()then return end;if j["WR_RogueSubtlety_GL_PS"]()then return end;if j["WR_RogueSubtlety_ZMYJ"]()then return end;if j["WR_RogueSubtlety_HHY"]()then return end;if j["WR_RogueSubtlety_CG"]()then return end;if j["WR_RogueSubtlety_XJFB"]()then return end;if j["WR_RogueSubtlety_AYDJ"]()then return end;if j["WR_RogueSubtlety_BC"]()then return end;j["WR_HideColorFrame"](j["zhandoumoshi"])if j["MSG"]==l("1")then end end;j["WR_RogueSubtlety_ShiPin"]=function(m)if j["BuffTime_QX"]>l("0")or j["BuffTime_XS"]>l("0")then return f end;if m=="保命"then if j["WRSet"]["MR_SP1"]>=l("3")then if j["WR_ShiPin"](l("1"),j["WRSet"]["MR_SP1"])then return g end end;if j["WRSet"]["MR_SP2"]>=l("3")then if j["WR_ShiPin"](l("2"),j["WRSet"]["MR_SP2"])then return g end end elseif m=="常驻"then if j["WRSet"]["MR_SP1"]==l("1")then if j["WR_ShiPin"](l("1"),j["WRSet"]["MR_SP1"])then return g end end;if j["WRSet"]["MR_SP2"]==l("1")then if j["WR_ShiPin"](l("2"),j["WRSet"]["MR_SP2"])then return g end end elseif m=="爆发"then if j["WRSet"]["MR_SP1"]==l("2")then if j["WR_ShiPin"](l("1"),j["WRSet"]["MR_SP1"])then return g end end;if j["WRSet"]["MR_SP2"]==l("2")then if j["WR_ShiPin"](l("2"),j["WRSet"]["MR_SP2"])then return g end end end;return f end;j["WR_RogueSubtlety_XHZP"]=function()if j["WRSet"]["MR_XHZP"]~=l("8")and j["WR_SpellUsable"]("猩红之瓶")and j["GCD"]<=j["ShiFaSuDu"]and j["PlayerHP"]<j["WRSet"]["MR_XHZP"]/l("10")and j["WR_RogueSubtlety_EnergyControl"](l("10"))then if j["WR_ColorFrame_Show"]("ACSF10","猩红之瓶")then return g end end;return f end;j["WR_RogueSubtlety_YG"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["WRSet"]["MR_YG"]and j["BuffTime_QX"]==l("0")and j["BuffTime_XS"]==l("0")and j["WR_SpellUsable"]("佯攻")and j["WR_GetUnitBuffTime"]("player","佯攻")<=j["GCD"]and(j["WR_ResistSustained"]()or j["WR_ResistOutburstTime"]()<=l("3"))and j["WR_RogueSubtlety_EnergyControl"](l("25"))then if j["WR_ColorFrame_Show"]("SF12","佯攻")then return g end end;return f end;j["WR_RogueSubtlety_DuYao"]=function()if j["PlayerMove"]then return f end;if j["GCD"]>j["ShiFaSuDu"]then return f end;local n=j["WR_GetUnitBuffTime"]("player","速效药膏")if j["WR_SpellUsable"]("速效药膏")and j["UnitCastingInfo"]("player")~="速效药膏"and(n==l("0")or n<l("300")and not j["PlayerCombat"])then if j["WR_ColorFrame_Show"]("CN0","速效药膏")then return g end end;if j["WR_GetUnitBuffTime"]("player","减速药膏")==l("0")then local o=j["WR_GetUnitBuffTime"]("player","萎缩药膏")if j["WR_SpellUsable"]("萎缩药膏")and j["UnitCastingInfo"]("player")~="萎缩药膏"and(o==l("0")or o<l("300")and not j["PlayerCombat"])then if j["WR_ColorFrame_Show"]("CN7","萎缩药膏")then return g end end end;return f end;j["WR_RogueSubtlety_JHJQ_Unit"]=function(p)if j["UnitGroupRolesAssigned"](p)=="TANK"and not j["UnitIsDead"](p)and j["IsSpellInRange"]("嫁祸诀窍",p)and j["UnitAffectingCombat"](p)then if p=="focus"then if j["WR_ColorFrame_Show"]("SF5","嫁祸F")then return g end elseif p=="party1"then if j["WR_ColorFrame_Show"]("SF1","嫁祸P1")then return g end elseif p=="party2"then if j["WR_ColorFrame_Show"]("SF2","嫁祸P2")then return g end elseif p=="party3"then if j["WR_ColorFrame_Show"]("SF3","嫁祸P3")then return g end elseif p=="party4"then if j["WR_ColorFrame_Show"]("SF4","嫁祸P4")then return g end end end;return f end;j["WR_RogueSubtlety_JHJQ"]=function()if j["WRSet"]["MR_JH"]and j["WR_SpellUsable"]("嫁祸诀窍")and j["WR_GetUnitBuffTime"]("player","嫁祸诀窍")<=j["GCD"]then if j["WR_RogueSubtlety_JHJQ_Unit"]("focus")then return g end;for q=l("1"),l("4")do if j["WR_RogueSubtlety_JHJQ_Unit"]("party"..q)then return g end end end;return f end;j["WR_RogueSubtlety_DuRen"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["IsSpellInRange"]("毒刃","target")and j["WR_SpellUsable"]("毒刃")and j["WR_UnitEnragedBuff"]("target")and j["WR_RogueSubtlety_EnergyControl"](l("30"))then if j["WR_ColorFrame_Show"]("SF6","毒刃")then return g end end end;j["WR_RogueSubtlety_QX"]=function()if not j["UnitAffectingCombat"]("player")and j["BuffCount_QX"]==l("0")and j["BuffCount_XS"]==l("0")and j["BuffCount_AYZW"]==l("0")and j["WR_SpellUsable"]("潜行")then if j["WR_ColorFrame_Show"]("CF4","潜行")then return g end end;return f end;j["WR_RogueSubtlety_SWFJ"]=function()if j["zhandoumoshi"]==l("1")and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["WR_SpellUsable"]("死亡符记")and j["BuffTime_SWFJ"]<=l("3")and(j["SWFJ_CastTime"]==h or j["GetTime"]()-j["SWFJ_CastTime"]>l("1"))and j["BuffTime_QG"]>j["GCD"]and(j["DebuffTime_GL"]>j["GCD"]or j["BuffTime_AYZW"]>j["GCD"])and(j["WR_GetGCD"]("狂热鞭笞")>=l("30")and j["WR_GetGCD"]("影分身")<l("8"))then if j["WR_ColorFrame_Show"]("F9","死亡符记")then return g end end;return f end;j["WR_RogueSubtlety_AYZR"]=function()if j["WRSet"]["MR_AYZR"]and j["zhandoumoshi"]==l("1")and j["WR_SpellUsable"]("暗影之刃")and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["BuffTime_AYZW"]>j["GCD"]and j["BuffTime_QG"]>j["GCD"]and j["BuffTime_YM"]<=j["GCD"]and j["ComboPoints"]>=l("5")and j["WR_GetGCD"]("狂热鞭笞")>j["GCD"]then if j["WR_RogueSubtlety_ShiPin"]("爆发")then return g end;if j["WR_ColorFrame_Show"]("CF11","暗影之刃")then return g end end;return f end;j["WR_RogueSubtlety_KRBC"]=function()if j["WRSet"]["MR_KRBC"]and j["GCD"]<=j["ShiFaSuDu"]and j["zhandoumoshi"]==l("1")and j["WR_SpellUsable"]("狂热鞭笞")and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["WR_GetGCD"]("暗影之刃")<=j["GCD"]+l("3")and j["WR_GetGCD"]("暗影之舞")<=j["GCD"]+l("2")then if j["WR_ColorFrame_Show"]("CF12","狂热鞭笞")then return g end end;return f end;j["WR_RogueSubtlety_YWSF"]=function()if j["WRSet"]["MR_AYZW"]and j["zhandoumoshi"]==l("1")and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]<l("5")and not j["StealthEruption"]and j["WR_SpellUsable"]("暗影之舞")and j["WR_GetSpellCharges"]("暗影之舞")>=l("1")and j["TargetRange"]<=l("5")and j["BuffTime_QG"]>j["GCD"]and j["DebuffTime_GL"]>j["GCD"]and(j["SWFJ_CastTime"]==h or j["GetTime"]()-j["YWSF_CastTime"]>l("1"))and j["WR_GetGCD"]("影分身")<=j["GCD"]+l("1")then if j["WR_ColorFrame_Show"]("F9","暗影死符")then return g end end;return f end;j["WR_RogueSubtlety_XS"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["WRSet"]["MR_XS"]and j["zhandoumoshi"]==l("1")and not j["StealthEruption"]and j["TargetRange"]<=l("30")and j["TargetInCombat"]and j["Energy"]>=l("40")and j["ComboPoints"]<=l("3")and j["WR_SpellUsable"]("消失")then if j["WR_ColorFrame_Show"]("ACSF9","消失")then return g end end;return f end;j["WR_RogueSubtlety_YFS"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["zhandoumoshi"]==l("1")and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["WR_SpellUsable"]("影分身")and j["BuffTime_QG"]>j["GCD"]and j["DebuffTime_GL"]>j["GCD"]and j["WR_RogueSubtlety_EnergyControl"](l("30"))then if j["BuffTime_AYZW"]>j["GCD"]then if j["BuffTime_JHC"]<=j["GCD"]and j["WR_GetSpellCharges"]("菊花茶")>=l("1")and(j["BuffTime_AYZR"]>j["GCD"]or j["WR_GetSpellCharges"]("菊花茶")>=l("2"))then if j["WR_ColorFrame_Show"]("CF9","菊花茶")then return g end end;if j["WR_ColorFrame_Show"]("CF3","影舞分身")then return g end end;if j["WR_GetGCD"]("狂热鞭笞")>l("20")and j["WR_GetGCD"]("狂热鞭笞")<l("40")then if j["WR_ColorFrame_Show"]("CF3","影分身")then return g end end end;return f end;j["WR_RogueSubtlety_GL"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["WR_SpellUsable"]("割裂")and j["BuffTime_AYZW"]<=j["GCD"]and j["BuffTime_QG"]>j["GCD"]and j["DebuffTime_GL"]<=j["GCD"]+(l("4")+j["ComboPoints"]*l("4"))*l("0.3")and j["WR_RogueSubtlety_EnergyControl"](l("25"))then if j["WR_ColorFrame_Show"]("CF1","割裂")then return g end end;return f end;j["WR_RogueSubtlety_GeLie_Unit"]=function(p)local r=j["WR_GetUnitDebuffTime"](p,"割裂",g)if j["C_Spell"]["IsSpellInRange"]("割裂",p)and j["WR_TargetInCombat"](p)and r<=(j["ComboPoints"]*l("4")+l("4"))*l("0.3")and j["WR_GetUnitDeathTime"](p)-(r+l("4")+j["ComboPoints"]*l("4"))>l("6")then if p=="mouseover"then if j["WR_ColorFrame_Show"]("CSF5","割裂M")then return g end elseif p=="focus"then if j["WR_ColorFrame_Show"]("CSF6","割裂F")then return g end elseif p=="party1target"then if j["WR_ColorFrame_Show"]("CSF1","割裂P1")then return g end elseif p=="party2target"then if j["WR_ColorFrame_Show"]("CSF2","割裂P1")then return g end elseif p=="party3target"then if j["WR_ColorFrame_Show"]("CSF3","割裂P1")then return g end elseif p=="party4target"then if j["WR_ColorFrame_Show"]("CSF4","割裂P1")then return g end end end;return f end;j["WR_RogueSubtlety_GL_PS"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["zhandoumoshi"]~=l("1")and j["ComboPoints"]>=l("5")and j["WR_SpellUsable"]("割裂")and j["BuffTime_AYZW"]<=j["GCD"]and j["WR_RogueSubtlety_EnergyControl"](l("25"))then if j["WR_RogueSubtlety_GeLie_Unit"]("mouseover")then return g end;if j["WR_RogueSubtlety_GeLie_Unit"]("focus")then return g end;for q=l("1"),l("4")do if j["WR_RogueSubtlety_GeLie_Unit"]("party"..q.."target")then return g end end end;return f end;j["WR_RogueSubtlety_ZMYJ"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["IsSpellOverlayed"](l("441776"))and j["DebuffTime_JH"]>j["GCD"]and(j["CastTime_ZMYJ"]==h or j["GetTime"]()-j["CastTime_ZMYJ"]>l("5"))and j["WR_RogueSubtlety_EnergyControl"](l("35"))then if j["WR_ColorFrame_Show"]("CF2","致命一击")then return g end end;return f end;j["WR_RogueSubtlety_HHY"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["WR_SpellUsable"]("黑火药")and j["BuffTime_QG"]>j["GCD"]and(j["DebuffTime_GL"]>j["GCD"]or j["BuffTime_AYZW"]>j["GCD"])and j["HUCountRange10"]>=l("5")and j["WR_RogueSubtlety_EnergyControl"](l("35"))then if j["WR_ColorFrame_Show"]("CF10","黑火药")then return g end end;return f end;j["WR_RogueSubtlety_CG"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["ComboPoints"]>=l("5")and j["WR_SpellUsable"]("刺骨")and j["WR_RogueSubtlety_EnergyControl"](l("35"))then if j["WR_ColorFrame_Show"]("CF2","刺骨")then return g end end;return f end;j["WR_RogueSubtlety_XJFB"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["WR_SpellUsable"]("袖剑风暴")and(j["HUCountRange10"]>=l("3")and not j["StealthEruption"]or j["BuffCount_FHYJ"]==l("1")and j["HUCountRange10"]>=l("5")and j["BuffTime_AYZW"]>j["GCD"])and j["WR_RogueSubtlety_EnergyControl"](l("45"))then if j["WR_ColorFrame_Show"]("CF7","袖剑风暴")then return g end end;return f end;j["WR_RogueSubtlety_AYDJ"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetInCombat"]and j["IsSpellInRange"]("暗影打击","target")and j["WR_SpellUsable"]("暗影打击")and j["WR_RogueSubtlety_EnergyControl"](l("45"))then if j["WR_ColorFrame_Show"]("CN9","暗影打击")then return g end end;return f end;j["WR_RogueSubtlety_BC"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["Energy"]>=l("45")and j["WR_SpellUsable"]("背刺")and j["WR_RogueSubtlety_EnergyControl"](l("40"))then if j["WR_ColorFrame_Show"]("AN1","背刺")then return g end end;return f end;j["WR_RogueSubtlety_LX"]=function()if j["GCD"]<=j["ShiFaSuDu"]and j["TargetRange"]<=l("5")and j["TargetInCombat"]and j["WR_SpellUsable"]("冷血")and j["BuffTime_AYZW"]>j["GCD"]and j["ComboPoints"]>=l("5")and j["BuffTime_KRBC"]>j["GCD"]then if j["WR_ColorFrame_Show"]("ASF1","冷血")then return g end end;return f end;j["WR_RogueSubtlety_LastSpellTime"]=function()if j["RogueSubtletyLastSpellIsOpen"]==g then return end;local s=j["CreateFrame"]("Frame")s["RegisterEvent"](s,"COMBAT_LOG_EVENT_UNFILTERED")s["SetScript"](s,"OnEvent",function()if j["select"](l("4"),j["CombatLogGetCurrentEventInfo"]())==j["UnitGUID"]("player")then if j["select"](l("2"),j["CombatLogGetCurrentEventInfo"]())=="SPELL_CAST_SUCCESS"then local t=j["select"](l("13"),j["CombatLogGetCurrentEventInfo"]())if t=="致命一击"then j["CastTime_ZMYJ"]=j["GetTime"]()end end end end)j["RogueSubtletyLastSpellIsOpen"]=g end;j["WR_RogueSubtlety_EnergyControl"]=function(u)if j["Energy"]>=u+l("30")or not j["IsPlayerSpell"](l("381623"))or j["WR_GetSpellCharges"]("菊花茶")==l("0")and j["WR_GetSpellNextCharge"]("菊花茶")>l("5")then return g end;return f end end)()